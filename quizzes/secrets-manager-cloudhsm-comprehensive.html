<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secrets Manager & CloudHSM Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #f97316; --accent-secondary: #fb923c; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(249, 115, 22, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(249, 115, 22, 0.2); box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.25), inset 0 0 12px rgba(249, 115, 22, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(249, 115, 22, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(249, 115, 22, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(249, 115, 22, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(249, 115, 22, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(249, 115, 22, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(249, 115, 22, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(249, 115, 22, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown, .btn-group { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 5: Data Protection (18%)</span>
            <h1>Secrets Manager & CloudHSM</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group" id="resultsButtons">
                <button class="btn btn-primary" id="reviewBtn" onclick="showReview()" style="display: none;">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "A company stores database credentials in their application code. Security requires moving to a secrets management solution with automatic rotation. Which service should they use?", options: ["AWS Systems Manager Parameter Store with SecureString parameters and Lambda-based rotation", "AWS Secrets Manager with built-in rotation support for RDS and custom Lambda rotation", "AWS Key Management Service with automatic key rotation enabled for credential encryption", "AWS Certificate Manager with automatic certificate renewal for database authentication"], correct: 1, explanation: "Secrets Manager is designed for secrets requiring rotation. It has native rotation for RDS, Redshift, and DocumentDB, plus Lambda-based custom rotation. Parameter Store lacks built-in rotation; KMS rotates encryption keys, not credentials.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html" },
            { id: 2, question: "A custom rotation Lambda function has been written for Secrets Manager. Which four steps must it implement to complete rotation?", options: ["authenticate, generateCredential, validateCredential, storeCredential for the secret lifecycle", "createSecret, setSecret, testSecret, finishSecret to handle the rotation workflow stages", "initializeRotation, updateDatabase, verifyConnection, completeRotation for database secrets", "generateNewSecret, disableOldSecret, activateNewSecret, deleteOldSecret for credential swap"], correct: 1, explanation: "Rotation Lambda uses four steps: createSecret (creates new version with AWSPENDING), setSecret (updates service with new credentials), testSecret (verifies new credentials work), finishSecret (moves AWSPENDING to AWSCURRENT).", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotate-secrets_lambda.html" },
            { id: 3, question: "During rotation, an application needs to continue using the current credentials while new ones are being validated. Which staging labels manage this?", options: ["CURRENT, PENDING, and PREVIOUS to track version lifecycle during rotation", "AWSCURRENT, AWSPENDING, and AWSPREVIOUS for active, rotating, and previous versions", "ACTIVE, ROTATING, and ARCHIVED for production, transitional, and backup states", "PRIMARY, STAGING, and ROLLBACK for main, testing, and recovery versions"], correct: 1, explanation: "Secrets Manager uses staging labels: AWSCURRENT (active version apps use), AWSPENDING (new version during rotation), and AWSPREVIOUS (previous version after rotation completes). This enables safe rotation and rollback.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/getting-started.html" },
            { id: 4, question: "A company uses Aurora PostgreSQL, Redshift, and self-hosted MongoDB on EC2. Which databases have native Secrets Manager rotation support?", options: ["All three have native rotation support as they're running on AWS infrastructure", "Aurora PostgreSQL and Redshift have native support; MongoDB requires custom Lambda rotation", "Only Aurora PostgreSQL has native support; Redshift and MongoDB require custom rotation", "None have native support; all database rotation requires custom Lambda functions"], correct: 1, explanation: "Secrets Manager provides managed rotation for RDS (including Aurora), Redshift, and DocumentDB. Self-hosted databases like MongoDB on EC2 require custom Lambda functions for rotation.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotating-secrets.html" },
            { id: 5, question: "A compliance audit asks how Secrets Manager protects secrets at rest. How should you describe the encryption mechanism?", options: ["Secrets are encrypted using AES-256 symmetric encryption with keys stored in Secrets Manager", "Secrets are encrypted using envelope encryption with AWS KMS customer-managed or AWS-managed keys", "Secrets are stored in encrypted S3 buckets with server-side encryption using S3-managed keys", "Secrets are encrypted using the AWS Encryption SDK with local key caching for performance"], correct: 1, explanation: "Secrets Manager uses envelope encryption with AWS KMS. A data key encrypts the secret, then a KMS key encrypts the data key. You can use the default Secrets Manager KMS key or specify a customer managed key.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/security-encryption.html" },
            { id: 6, question: "A team asks whether to use Secrets Manager or Parameter Store for their configuration values and database credentials. What guidance should you provide?", options: ["Use Parameter Store for everything - it supports SecureString encryption and is more cost-effective", "Use Secrets Manager for credentials requiring rotation; Parameter Store for configuration without rotation needs", "Use Secrets Manager exclusively - it's the newer service and will eventually replace Parameter Store", "Use both interchangeably - they have identical features and differ only in naming conventions"], correct: 1, explanation: "Secrets Manager has built-in rotation and costs $0.40/secret/month. Parameter Store is free for standard parameters but lacks native rotation. Use Secrets Manager for rotating credentials; Parameter Store for static configuration.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html" },
            { id: 7, question: "Account B needs to retrieve a secret stored in Account A's Secrets Manager. How is this configured?", options: ["Create an IAM role in Account A that Account B can assume, with permissions to the secret", "Add a resource-based policy to the secret allowing Account B, plus ensure KMS key access if needed", "Use AWS Resource Access Manager (RAM) to share the secret with Account B", "Replicate the secret to Account B since cross-account access is not supported"], correct: 1, explanation: "Attach a resource-based policy to the secret allowing the cross-account principal. Account B also needs IAM permissions. If using a customer managed KMS key, you must also grant cross-account access to that key.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_examples_cross.html" },
            { id: 8, question: "A regulated financial application requires cryptographic modules validated to the highest security level. Which AWS service meets FIPS 140-2 Level 3?", options: ["AWS KMS which uses HSMs validated to FIPS 140-2 Level 3 for key storage", "AWS CloudHSM which provides dedicated HSMs validated to FIPS 140-2 Level 3", "AWS Certificate Manager with private CA using FIPS-validated cryptographic libraries", "AWS Secrets Manager using FIPS endpoints for all secret operations"], correct: 1, explanation: "AWS CloudHSM is FIPS 140-2 Level 3 validated - the highest commonly achieved level, requiring physical tamper evidence and identity-based authentication. KMS uses FIPS 140-2 Level 2 (or Level 3 via Custom Key Store with CloudHSM).", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/introduction.html" },
            { id: 9, question: "A company is deploying CloudHSM for production use. How many HSMs does AWS recommend for high availability?", options: ["1 HSM is sufficient since CloudHSM automatically handles failover to AWS backup HSMs", "At least 2 HSMs in different Availability Zones with automatic key synchronization", "At least 3 HSMs to form a quorum for cryptographic operations", "At least 5 HSMs to meet FIPS 140-2 Level 3 high availability requirements"], correct: 1, explanation: "AWS recommends at least 2 HSMs in different Availability Zones. If one fails, the other continues. Keys are automatically synchronized across all HSMs in the cluster. AWS has no backup HSMs - you manage your own redundancy.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/clusters.html" },
            { id: 10, question: "A company wants to use KMS APIs and integrations but store keys in their own CloudHSM cluster for control. What should they configure?", options: ["AWS PrivateLink endpoints connecting KMS to the CloudHSM cluster VPC", "A Custom Key Store in KMS backed by the CloudHSM cluster", "IAM policies granting KMS service access to the CloudHSM cluster", "CloudHSM client SDK configured with KMS as the key consumer"], correct: 1, explanation: "A Custom Key Store connects KMS to your CloudHSM cluster. You get KMS convenience (AWS service integrations, familiar APIs) with CloudHSM security (dedicated single-tenant HSMs, keys never leave your HSM).", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/custom-key-store-overview.html" },
            { id: 11, question: "A legacy Java application needs to integrate with CloudHSM for cryptographic operations. Which interface should the development team use?", options: ["AWS SDK for Java with CloudHSM-specific extensions for cryptographic calls", "PKCS#11 library since Java applications must use C-based cryptographic interfaces", "Java Cryptography Extension (JCE) provider for seamless Java KeyStore integration", "REST API calls to CloudHSM endpoints using standard HTTP client libraries"], correct: 2, explanation: "CloudHSM supports industry-standard APIs: PKCS#11 (C/C++), JCE (Java), and Microsoft CNG (Windows). JCE integrates naturally with Java applications and provides standard Java KeyStore functionality.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/use-hsm.html" },
            { id: 12, question: "A security administrator loses the Crypto Officer credentials for a CloudHSM cluster. AWS Support is contacted for key recovery. What can AWS do?", options: ["AWS can reset the Crypto Officer password and restore access within 24 hours", "AWS can recover the keys from their backup systems with proper authorization", "AWS cannot access or recover the keys - they are permanently inaccessible without CO credentials", "AWS can provision a new HSM and transfer keys from the cluster's encrypted backup"], correct: 2, explanation: "ONLY you have access to your CloudHSM keys. AWS cannot access, recover, or see your keys under any circumstances. If you lose Crypto Officer credentials, the keys are permanently inaccessible. This is a key security feature.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/introduction.html" },
            { id: 13, question: "A database requires zero-downtime credential rotation. With single-user rotation, there's a brief window where the old password is invalidated before apps get the new one. What strategy avoids this?", options: ["Immediate rotation that updates all applications simultaneously using blue-green deployment", "Alternating users rotation maintaining two database users and rotating the inactive one", "Cached rotation where applications cache credentials for 24 hours during rotation windows", "Coordinated rotation with application health checks before invalidating old credentials"], correct: 1, explanation: "Alternating users strategy maintains two database users (e.g., user1, user2). Rotation updates the INACTIVE user's password. Apps using the CURRENT user continue working. After rotation, apps switch to the newly-rotated user.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotating-secrets_strategies.html" },
            { id: 14, question: "A Secrets Manager rotation fails midway. Applications were using the secret before rotation started. What is the current state?", options: ["Both AWSCURRENT and AWSPENDING versions are invalidated; applications cannot authenticate", "AWSCURRENT version remains intact and functional; AWSPENDING is left incomplete", "The secret is rolled back to AWSPREVIOUS automatically for safety", "Secrets Manager deletes the secret and creates a new one with the original value"], correct: 1, explanation: "If rotation fails, AWSCURRENT remains intact so applications continue working. AWSPENDING stays until cleanup or next rotation. You should monitor CloudWatch for rotation failures and investigate promptly.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/troubleshoot_rotation.html" },
            { id: 15, question: "A company needs to protect SSL/TLS private keys and run Oracle TDE with FIPS 140-2 Level 3 compliance. Which AWS service should they use?", options: ["AWS KMS with customer managed keys for SSL certificates and Oracle TDE encryption", "AWS CloudHSM for SSL/TLS offloading and Oracle Transparent Data Encryption", "AWS Certificate Manager for SSL certificates and KMS for Oracle TDE", "AWS Secrets Manager for SSL private keys and Parameter Store for Oracle TDE passwords"], correct: 1, explanation: "CloudHSM is ideal for SSL/TLS offloading (private keys protected in HSM), Oracle TDE, SQL Server TDE, and CA operations. These use cases require FIPS 140-2 Level 3 or applications that need PKCS#11/JCE interfaces.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/use-cases.html" },
            { id: 16, question: "Lambda functions retrieve secrets on every invocation, causing high latency and Secrets Manager API throttling. How can this be optimized?", options: ["Store secrets in Lambda environment variables encrypted with KMS for faster access", "Use the Secrets Manager Lambda extension to cache secrets locally within the Lambda environment", "Implement a DynamoDB cache layer that stores decrypted secrets for Lambda functions", "Configure Lambda provisioned concurrency to keep secrets pre-loaded in warm instances"], correct: 1, explanation: "The Secrets Manager Lambda extension retrieves and caches secrets locally in the Lambda environment. This reduces latency and API calls. The cache is automatically refreshed based on the secret's TTL.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/retrieving-secrets_lambda.html" },
            { id: 17, question: "A security policy requires credentials to rotate every 4 hours. Can this be configured in Secrets Manager?", options: ["No, the minimum rotation period is 24 hours to prevent service disruption", "Yes, 4 hours is the minimum rotation interval supported by Secrets Manager", "No, rotation can only be scheduled daily, weekly, or monthly using fixed intervals", "Yes, but only for AWS-managed secrets; custom secrets require at least 12-hour intervals"], correct: 1, explanation: "The minimum rotation interval is 4 hours. You configure rotation using rate expressions (rate(4 hours)) or cron expressions. More frequent rotation improves security but increases operational complexity and costs.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotating-secrets.html" },
            { id: 18, question: "A multi-region application needs access to the same secret in us-east-1 and eu-west-1. How should this be configured?", options: ["Create separate secrets in each region and manually synchronize values during rotation", "Configure secret replication from the primary region to eu-west-1 for automatic sync", "Use multi-region KMS keys to encrypt a single secret accessible from both regions", "Deploy a global secret endpoint that routes requests to the nearest regional secret"], correct: 1, explanation: "Secret replication automatically maintains copies in multiple regions. The primary secret is read-write; replicas are read-only and automatically synchronized. This supports DR and multi-region applications.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/create-manage-multi-region-secrets.html" },
            { id: 19, question: "A CloudHSM cluster shows intermittent failures. Which CloudWatch metrics should be monitored for HSM health?", options: ["CPUUtilization and NetworkIn/Out metrics to identify performance bottlenecks", "HSMUnhealthy and HSMDegraded metrics to detect hardware or connectivity issues", "DiskReadOps and DiskWriteOps to monitor cryptographic operation storage impact", "MemoryUtilization and SwapUsage to detect resource exhaustion during high load"], correct: 1, explanation: "Monitor HSMUnhealthy (HSM has failed), HSMDegraded (HSM has issues), and cluster health metrics. Set CloudWatch alarms for these. Also monitor SSL handshake rates and operations per second for performance.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/monitoring-cloudwatch.html" },
            { id: 20, question: "A CloudHSM cluster has Crypto Officer (CO) and Crypto User (CU) accounts. Which operations can each perform?", options: ["CO performs encryption and signing; CU manages users and keys for the cluster", "CO manages HSM users and key lifecycle; CU performs cryptographic operations like encrypt/sign", "Both CO and CU can perform all operations but with different audit logging levels", "CO has full access to all operations; CU is restricted to read-only operations"], correct: 1, explanation: "Crypto Officer (CO) manages HSM users and keys (create, delete, share) but CANNOT perform cryptographic operations. Crypto User (CU) performs cryptographic operations (encrypt, decrypt, sign) using keys they have access to.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/cli-users.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Secrets Manager & CloudHSM</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; document.getElementById('reviewBtn').style.display = currentMode === 'exam' ? 'inline-block' : 'none'; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
    </script>
</body>
</html>
