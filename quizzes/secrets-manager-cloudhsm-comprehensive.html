<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secrets Manager & CloudHSM Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #f97316; --accent-secondary: #fb923c; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(249, 115, 22, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(249, 115, 22, 0.2); box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.25), inset 0 0 12px rgba(249, 115, 22, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(249, 115, 22, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(249, 115, 22, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(249, 115, 22, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 5: Data Protection (18%)</span>
            <h1>Secrets Manager & CloudHSM</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is the primary purpose of AWS Secrets Manager?", options: ["To encrypt data at rest", "To store, rotate, and manage access to secrets like database credentials and API keys", "To manage IAM passwords", "To create SSL certificates"], correct: 1, explanation: "Secrets Manager securely stores secrets (database credentials, API keys, OAuth tokens) and can automatically rotate them. It integrates with RDS, Redshift, and DocumentDB for managed rotation, or uses Lambda for custom rotation.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html" },
            { id: 2, question: "What are the four stages of the Secrets Manager rotation Lambda function?", options: ["Create, Read, Update, Delete", "createSecret, setSecret, testSecret, finishSecret", "Initialize, Rotate, Validate, Complete", "Generate, Store, Test, Activate"], correct: 1, explanation: "Rotation uses four steps: createSecret (creates new version with AWSPENDING label), setSecret (updates the service with new credentials), testSecret (verifies new credentials work), finishSecret (moves AWSPENDING to AWSCURRENT).", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotate-secrets_lambda.html" },
            { id: 3, question: "What secret version labels does Secrets Manager use?", options: ["v1, v2, v3", "AWSCURRENT, AWSPENDING, AWSPREVIOUS", "ACTIVE, INACTIVE, DEPRECATED", "PRIMARY, SECONDARY, BACKUP"], correct: 1, explanation: "Secrets Manager uses staging labels: AWSCURRENT (current active version), AWSPENDING (new version during rotation), and AWSPREVIOUS (previous current version after rotation). This enables safe rotation and rollback.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/getting-started.html" },
            { id: 4, question: "Which databases have native (managed) rotation support in Secrets Manager?", options: ["Only MySQL", "RDS, Redshift, and DocumentDB", "All databases including on-premises", "Only Amazon Aurora"], correct: 1, explanation: "Secrets Manager provides managed rotation for Amazon RDS (all engines), Amazon Redshift, and Amazon DocumentDB. For other databases or services, you use Lambda functions for custom rotation.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotating-secrets.html" },
            { id: 5, question: "How does Secrets Manager encrypt secrets?", options: ["Using S3 server-side encryption", "Using envelope encryption with AWS KMS", "Using AES-256 only", "Secrets are not encrypted"], correct: 1, explanation: "Secrets Manager uses envelope encryption with AWS KMS. It generates a data key, encrypts the secret with that key, then encrypts the data key with your KMS key. You can use the default Secrets Manager key or a customer managed key.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/security-encryption.html" },
            { id: 6, question: "What is the difference between Secrets Manager and Systems Manager Parameter Store?", options: ["They are the same service", "Secrets Manager has built-in rotation; Parameter Store is simpler and cheaper", "Parameter Store only works with EC2", "Secrets Manager is free"], correct: 1, explanation: "Secrets Manager has automatic rotation and costs $0.40/secret/month. Parameter Store is free for standard parameters, simpler, but lacks built-in rotation. Choose Secrets Manager for credentials requiring rotation; Parameter Store for configuration.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html" },
            { id: 7, question: "How do you enable cross-account access to a secret?", options: ["Use VPC peering", "Add a resource-based policy to the secret allowing the other account", "Secrets cannot be shared cross-account", "Copy the secret to the other account"], correct: 1, explanation: "You can attach a resource-based policy to a secret granting access to principals in other accounts. The other account's IAM policies must also allow access. You may also need cross-account KMS key access for encrypted secrets.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_examples_cross.html" },
            { id: 8, question: "What FIPS validation level does AWS CloudHSM meet?", options: ["FIPS 140-2 Level 1", "FIPS 140-2 Level 2", "FIPS 140-2 Level 3", "FIPS 140-3 Level 4"], correct: 2, explanation: "AWS CloudHSM is FIPS 140-2 Level 3 validated, which requires physical tamper evidence, identity-based authentication, and physical separation between interfaces. This is one of the highest certification levels available.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/introduction.html" },
            { id: 9, question: "What is the minimum number of HSMs recommended for a production CloudHSM cluster?", options: ["1 HSM", "2 HSMs across different AZs", "3 HSMs", "5 HSMs"], correct: 1, explanation: "AWS recommends at least 2 HSMs in different Availability Zones for production workloads. If one HSM fails, the other continues operating. Keys are automatically synchronized across all HSMs in the cluster.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/clusters.html" },
            { id: 10, question: "What is a CloudHSM Custom Key Store in KMS?", options: ["A separate KMS key store in another region", "A way to use CloudHSM as the backing for KMS keys", "An on-premises key store", "A backup key store"], correct: 1, explanation: "A Custom Key Store lets you create KMS keys backed by your CloudHSM cluster. You get KMS convenience (integration with AWS services) with CloudHSM security (keys in your dedicated HSMs, never visible to AWS).", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/custom-key-store-overview.html" },
            { id: 11, question: "What interfaces does CloudHSM support for application integration?", options: ["Only AWS SDK", "PKCS#11, JCE, and CNG", "Only REST APIs", "Only command line"], correct: 1, explanation: "CloudHSM supports industry-standard APIs: PKCS#11 (C/C++), Java Cryptography Extension (JCE), and Microsoft CNG (Windows). This allows integration with existing applications without AWS-specific code.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/use-hsm.html" },
            { id: 12, question: "Who has access to keys stored in CloudHSM?", options: ["AWS and the customer", "Only AWS", "Only the customer (you)", "AWS Support with customer permission"], correct: 2, explanation: "Only you have access to your CloudHSM keys. AWS cannot access, recover, or see your keys. If you lose your crypto officer credentials, the keys are permanently inaccessible. This is a key differentiator from KMS.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/introduction.html" },
            { id: 13, question: "What is the 'alternating users' rotation strategy in Secrets Manager?", options: ["Rotating between two IAM users", "Maintaining two sets of credentials and alternating between them", "Switching between Secrets Manager and Parameter Store", "Alternating between encryption keys"], correct: 1, explanation: "The alternating users strategy maintains two database users (e.g., user1 and user2). During rotation, it updates the inactive user's password. This avoids the brief window where credentials might not work during single-user rotation.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotating-secrets_strategies.html" },
            { id: 14, question: "What happens if a Secrets Manager rotation fails?", options: ["The secret is deleted", "AWSPENDING is automatically removed and current secret continues working", "All versions become invalid", "AWS Support is automatically notified"], correct: 1, explanation: "If rotation fails, Secrets Manager retains the AWSCURRENT version, so applications continue working. The AWSPENDING version remains until cleanup or next rotation attempt. You should monitor rotation failures via CloudWatch.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/troubleshoot_rotation.html" },
            { id: 15, question: "What is CloudHSM commonly used for?", options: ["General-purpose data encryption", "SSL/TLS offloading, Oracle TDE, certificate authority operations", "Only S3 encryption", "Only IAM authentication"], correct: 1, explanation: "CloudHSM is used for SSL/TLS offloading (private keys in HSM), database encryption like Oracle TDE and SQL Server TDE, certificate authority (CA) operations, and applications requiring FIPS 140-2 Level 3 compliance.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/use-cases.html" },
            { id: 16, question: "How does the Secrets Manager Lambda extension work?", options: ["It automatically rotates secrets", "It caches secrets locally in Lambda for faster retrieval without SDK calls", "It encrypts Lambda environment variables", "It validates secret formats"], correct: 1, explanation: "The Secrets Manager Lambda extension retrieves and caches secrets locally within the Lambda environment. This reduces latency and API calls compared to fetching secrets on every invocation using the SDK.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/retrieving-secrets_lambda.html" },
            { id: 17, question: "What is the minimum rotation period for secrets in Secrets Manager?", options: ["1 hour", "4 hours", "1 day", "No minimum - can be any schedule"], correct: 1, explanation: "The minimum rotation interval is 4 hours. You can configure rotation schedules using rate expressions (e.g., rate(30 days)) or cron expressions for specific times. More frequent rotation improves security but increases complexity.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotating-secrets.html" },
            { id: 18, question: "What is secret replication in Secrets Manager?", options: ["Copying secrets to S3", "Automatically replicating secrets to multiple AWS regions", "Creating backup copies of secrets", "Syncing secrets with on-premises systems"], correct: 1, explanation: "Secret replication automatically keeps copies of secrets in multiple AWS regions. The primary secret is read-write; replicas are read-only. This supports disaster recovery and multi-region applications.", docLink: "https://docs.aws.amazon.com/secretsmanager/latest/userguide/create-manage-multi-region-secrets.html" },
            { id: 19, question: "What CloudWatch metrics should you monitor for CloudHSM?", options: ["Only CPU utilization", "HSMUnhealthy, HSMDegraded, and cluster health metrics", "Only storage metrics", "CloudHSM doesn't support CloudWatch"], correct: 1, explanation: "Key CloudHSM CloudWatch metrics include HSMUnhealthy, HSMDegraded, and cluster health metrics. You should set alarms for degraded states and monitor SSL handshakes and key operations per second.", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/monitoring-cloudwatch.html" },
            { id: 20, question: "What is the purpose of the Crypto Officer (CO) user in CloudHSM?", options: ["To encrypt data", "To manage HSM users and perform key management operations", "To monitor HSM health", "To connect CloudHSM to AWS services"], correct: 1, explanation: "The Crypto Officer (CO) is an administrative user who manages HSM users (create/delete), manages keys (create/delete/share), and sets key attributes. COs cannot perform cryptographic operations - that's for Crypto Users (CU).", docLink: "https://docs.aws.amazon.com/cloudhsm/latest/userguide/cli-users.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Secrets Manager & CloudHSM</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
