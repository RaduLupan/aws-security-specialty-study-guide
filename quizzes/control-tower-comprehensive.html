<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Control Tower Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #6366f1; --accent-secondary: #818cf8; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(99, 102, 241, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(99, 102, 241, 0.2); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.25), inset 0 0 12px rgba(99, 102, 241, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(99, 102, 241, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(99, 102, 241, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(99, 102, 241, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 6: Security Governance (14%)</span>
            <h1>AWS Control Tower</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is AWS Control Tower?", options: ["A service to manage AWS billing", "A service to set up and govern a secure, multi-account AWS environment", "A VPN connection service", "A container orchestration service"], correct: 1, explanation: "AWS Control Tower provides an easy way to set up and govern a secure, well-architected multi-account AWS environment (landing zone). It automates account provisioning, applies guardrails, and provides a dashboard for compliance visibility.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/what-is-control-tower.html" },
            { id: 2, question: "What are the three shared accounts created by Control Tower?", options: ["Root, Admin, and User accounts", "Management, Log Archive, and Audit accounts", "Production, Staging, and Development accounts", "Master, Slave, and Backup accounts"], correct: 1, explanation: "Control Tower creates three shared accounts: Management Account (organization root), Log Archive Account (centralized logging for CloudTrail and Config), and Audit Account (cross-account access for security and compliance teams).", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/how-control-tower-works.html" },
            { id: 3, question: "What is the difference between preventive and detective guardrails?", options: ["Preventive guardrails are free, detective guardrails cost money", "Preventive guardrails use SCPs to block actions; detective guardrails use Config rules to detect violations", "There is no difference", "Preventive guardrails only work in us-east-1"], correct: 1, explanation: "Preventive guardrails use SCPs to prevent actions from occurring (proactive). Detective guardrails use AWS Config rules to detect and report when resources are non-compliant (reactive). Both are important for defense in depth.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/controls.html" },
            { id: 4, question: "What is Account Factory in Control Tower?", options: ["A service to delete accounts", "A configurable account template for provisioning new accounts with guardrails", "A billing aggregation service", "A monitoring dashboard"], correct: 1, explanation: "Account Factory is a configurable account template that lets you standardize how new accounts are provisioned. It ensures all new accounts are created with your defined network configuration, guardrails, and baseline resources.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/account-factory.html" },
            { id: 5, question: "What are the three categories of Control Tower guardrails?", options: ["Low, Medium, High", "Mandatory, Strongly Recommended, Elective", "Basic, Standard, Premium", "Free, Paid, Enterprise"], correct: 1, explanation: "Guardrails are categorized as: Mandatory (always enabled, cannot be disabled), Strongly Recommended (AWS best practices), and Elective (optional controls for specific needs). This helps prioritize which controls to implement.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/controls.html" },
            { id: 6, question: "What is landing zone drift in Control Tower?", options: ["Network latency issues", "Changes to your landing zone that differ from the expected configuration", "Account cost increases", "Region expansion"], correct: 1, explanation: "Drift occurs when your landing zone configuration differs from what Control Tower expects. This can happen when resources are modified outside of Control Tower. The dashboard shows drift status and you can repair it.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/drift.html" },
            { id: 7, question: "Which OUs does Control Tower create by default?", options: ["Production and Development", "Security and Sandbox", "Core and Custom", "Root and Child"], correct: 1, explanation: "Control Tower creates the Security OU (for Log Archive and Audit accounts) and Sandbox OU (for experimentation) by default. You can create additional OUs for workloads, infrastructure, or other purposes.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/how-control-tower-works.html" },
            { id: 8, question: "How does Control Tower integrate with AWS IAM Identity Center?", options: ["It doesn't integrate with Identity Center", "Control Tower configures Identity Center for SSO access to all enrolled accounts", "Identity Center replaces Control Tower", "Only for billing access"], correct: 1, explanation: "Control Tower configures IAM Identity Center (formerly AWS SSO) to provide single sign-on access to all accounts in the landing zone. This enables centralized identity management across your multi-account environment.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/sso.html" },
            { id: 9, question: "What happens when you enable a detective guardrail in Control Tower?", options: ["An SCP is created", "An AWS Config rule is deployed to evaluate compliance", "The action is immediately blocked", "A Lambda function is created"], correct: 1, explanation: "Detective guardrails deploy AWS Config rules that evaluate resource configurations against your compliance requirements. Violations are reported but not blocked - they appear in the Control Tower dashboard.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/controls.html" },
            { id: 10, question: "What is the purpose of the Log Archive account?", options: ["To store application logs", "To centralize CloudTrail and Config logs from all accounts", "To archive deleted accounts", "To store AMI backups"], correct: 1, explanation: "The Log Archive account provides immutable, centralized storage for CloudTrail logs and AWS Config data from all accounts in the organization. This supports security investigations, compliance, and audit requirements.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/how-control-tower-works.html" },
            { id: 11, question: "Can you register existing AWS accounts with Control Tower?", options: ["No, only new accounts can be enrolled", "Yes, you can enroll existing accounts into a registered OU", "Only accounts created in the last 30 days", "Only accounts with no resources"], correct: 1, explanation: "You can enroll existing AWS accounts into Control Tower by registering the OU containing those accounts. Control Tower applies mandatory guardrails and enables AWS Config recording on enrolled accounts.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/importing-existing.html" },
            { id: 12, question: "What is the Audit account used for in Control Tower?", options: ["Financial audits only", "Cross-account access for security teams to perform audits and investigations", "Storing audit logs", "Automated compliance scanning"], correct: 1, explanation: "The Audit account provides security and compliance teams with cross-account read access (and optional write access) to all accounts. This enables centralized security monitoring, incident response, and compliance verification.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/how-control-tower-works.html" },
            { id: 13, question: "What is Customizations for AWS Control Tower (CfCT)?", options: ["A paid add-on service", "A solution to deploy custom resources and configurations to accounts at scale", "A UI customization feature", "A billing customization tool"], correct: 1, explanation: "Customizations for AWS Control Tower (CfCT) is a solution that uses CloudFormation StackSets to deploy custom resources, security baselines, and configurations automatically when new accounts are created.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/customize-landing-zone.html" },
            { id: 14, question: "What AWS service does Control Tower use to deploy guardrails across accounts?", options: ["AWS Lambda", "CloudFormation StackSets", "AWS CodePipeline", "AWS Step Functions"], correct: 1, explanation: "Control Tower uses CloudFormation StackSets to deploy resources like Config rules for detective guardrails across multiple accounts and regions. StackSets enable centralized management of resources across the organization.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/how-control-tower-works.html" },
            { id: 15, question: "What is proactive control in Control Tower?", options: ["A control that monitors future actions", "A control that blocks non-compliant resources before they're created using CloudFormation hooks", "A predictive analytics feature", "An auto-scaling control"], correct: 1, explanation: "Proactive controls use CloudFormation hooks to check resource configurations before deployment. If resources don't comply, the deployment fails, preventing non-compliant resources from being created in the first place.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/proactive-controls.html" },
            { id: 16, question: "How many accounts can Control Tower manage?", options: ["Up to 10 accounts", "Up to 100 accounts", "Up to 5,000 accounts (with limits on enrollment at once)", "Unlimited accounts"], correct: 2, explanation: "Control Tower can govern up to approximately 5,000 accounts per landing zone. However, there are limits on how many accounts you can enroll at once (around 300-1000). Contact AWS for larger deployments.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/limits.html" },
            { id: 17, question: "What is the AWS Control Tower dashboard used for?", options: ["Managing EC2 instances", "Viewing compliance status, drift, and managing guardrails", "Billing analysis", "Network monitoring"], correct: 1, explanation: "The Control Tower dashboard provides visibility into your landing zone's compliance status, shows which guardrails are enabled, displays drift status, and allows you to manage OUs, accounts, and controls.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/control-tower-dashboard.html" },
            { id: 18, question: "What happens if you try to leave a guardrail-protected organization from a member account?", options: ["The account is immediately removed", "The action is blocked by the mandatory guardrail SCP", "You need to pay a fee", "The account is suspended"], correct: 1, explanation: "Mandatory guardrails include an SCP that prevents member accounts from leaving the organization (denies organizations:LeaveOrganization). This ensures governance controls remain in place.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/mandatory-controls.html" },
            { id: 19, question: "What is the recommended OU structure for a Control Tower landing zone?", options: ["Flat structure with all accounts in root", "Separate OUs for Security, Infrastructure, Workloads (Prod/Non-Prod), Sandbox, and Suspended", "One OU per account", "OUs based on cost centers only"], correct: 1, explanation: "AWS recommends organizing OUs by function: Security (Log Archive, Audit), Infrastructure (shared services), Workloads (Production, Non-Production), Sandbox (experiments), and Suspended (decommissioned accounts).", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/aws-multi-account-landing-zone.html" },
            { id: 20, question: "Can Control Tower guardrails be applied to the management account?", options: ["Yes, all guardrails apply to management account", "No, most guardrails do not apply to the management account", "Only detective guardrails apply", "Only mandatory guardrails apply"], correct: 1, explanation: "Most guardrails, especially preventive ones (SCPs), do not affect the management account. This is consistent with AWS Organizations behavior where SCPs don't restrict the management account. Best practice is to limit use of the management account.", docLink: "https://docs.aws.amazon.com/controltower/latest/userguide/controls.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Control Tower</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
