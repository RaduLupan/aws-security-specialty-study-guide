<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resource Control Policies & Declarative Policies Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #f97316; --accent-secondary: #fb923c; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(249, 115, 22, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(249, 115, 22, 0.2); box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.25), inset 0 0 12px rgba(249, 115, 22, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(249, 115, 22, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(249, 115, 22, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(249, 115, 22, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(249, 115, 22, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(249, 115, 22, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(249, 115, 22, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(249, 115, 22, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 6: Security Governance (14%)</span>
            <h1>üìã Resource Control Policies & Declarative Policies</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">25</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">62:30</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">25</span></span>
                    <span class="timer" id="timer">62:30</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is the primary purpose of Resource Control Policies (RCPs) in AWS Organizations?", options: ["To restrict the maximum available permissions for IAM principals (users and roles) within your organization's member accounts", "To restrict IAM principals external to your organization from accessing resources within your organization's member accounts", "To automate the creation of IAM roles across multiple accounts with consistent permission sets", "To enforce encryption requirements on resources across all accounts using service-specific policies"], correct: 1, explanation: "RCPs are resource-centric controls that restrict external principals from accessing your resources. Use SCPs to control what your internal principals can do, and RCPs to control who can access your resources. RCPs help build a data perimeter around your organization.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" },
            { id: 2, question: "Which AWS services currently support Resource Control Policies (RCPs)?", options: ["All AWS services that support resource-based policies including IAM, EC2, Lambda, and RDS", "S3, STS, KMS, SQS, Secrets Manager, Cognito, CloudWatch Logs, DynamoDB, ECR, and OpenSearch Serverless", "Only services with cross-account access capabilities such as S3, Lambda, SNS, and SQS", "EC2, VPC, IAM, CloudFormation, and Systems Manager for infrastructure security enforcement"], correct: 1, explanation: "RCPs currently support a specific subset of AWS services: S3, STS, KMS, SQS, Secrets Manager, Cognito, CloudWatch Logs, DynamoDB, ECR, and OpenSearch Serverless. RCP support is being expanded over time. Check documentation for the current list.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" },
            { id: 3, question: "Do Resource Control Policies (RCPs) affect resources in the management account?", options: ["Yes, RCPs apply uniformly to all accounts including the management account for consistent governance", "No, RCPs do not affect resources in the management account, only member accounts including delegated administrators", "Yes, but only if explicitly enabled through a special RCP attachment process for the management account", "No, unless the management account is explicitly included in the RCP target list via ARN specification"], correct: 1, explanation: "RCPs do not affect resources in the management account. They only affect resources in member accounts (including delegated administrator accounts). This is an important limitation to understand when designing your data perimeter strategy.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" },
            { id: 4, question: "What is the key distinction between how SCPs and RCPs are applied in AWS Organizations?", options: ["SCPs are principal-centric controls limiting what your identities can do; RCPs are resource-centric controls limiting who can access your resources", "SCPs block API actions before execution; RCPs validate resource configurations after resources are created", "SCPs apply to the management account; RCPs apply only to member accounts in the organization", "SCPs use Allow statements; RCPs use Deny statements to define access restrictions"], correct: 0, explanation: "SCPs control what principals in your organization can do (principal-centric). RCPs control who can access resources in your organization (resource-centric). Together, they create a data perimeter protecting both identities and resources.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_authorization_policies.html" },
            { id: 5, question: "When enabling RCPs in your organization, what AWS managed policy is automatically attached?", options: ["RCPDefaultPolicy that denies all external access until explicit Allow statements are added", "RCPFullAWSAccess that allows all access to pass through RCP evaluation until you create custom RCPs", "RCPExternalAccessDeny that blocks all principals outside your organization by default", "RCPOrganizationOnly that restricts access to principals within your AWS Organizations structure"], correct: 1, explanation: "When you enable RCPs, the RCPFullAWSAccess AWS managed policy is automatically attached to the root, all OUs, and all accounts. This policy allows all access to pass through RCP evaluation. You cannot detach this policy. It ensures existing permissions continue working until you add restrictive RCPs.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps_evaluation.html" },
            { id: 6, question: "How do Deny statements in RCPs propagate through the organizational hierarchy?", options: ["Deny statements at higher levels are inherited by child OUs and accounts but can be overridden with explicit Allow statements", "A Deny statement at any level in the path from root to account blocks access; no inheritance overrides are possible", "Deny statements only apply to the specific OU or account they are attached to and do not affect children", "Deny statements require unanimous agreement across all levels in the hierarchy to take effect"], correct: 1, explanation: "For a permission to be denied for a resource, ANY RCP from the root through each OU to the target account can deny that permission. Deny statements are powerful and cannot be overridden. Test carefully before attaching RCPs to the root.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps_evaluation.html" },
            { id: 7, question: "What is the primary purpose of Declarative Policies in AWS Organizations?", options: ["To declare and enforce access control rules for IAM principals across organizational accounts", "To centrally declare and enforce desired configuration for AWS services, maintaining baseline settings even when services add new features", "To declare compliance requirements and automatically remediate non-compliant resources using Lambda functions", "To define resource tagging requirements and enforce consistent tag application across the organization"], correct: 1, explanation: "Declarative policies allow you to centrally declare and enforce your desired configuration for AWS services at scale. The key benefit is 'set once and forget' - the baseline configuration is maintained even when services introduce new features or APIs.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html" },
            { id: 8, question: "Where are declarative policies enforced, and how does this differ from authorization policies?", options: ["Declarative policies are enforced at the AWS CloudTrail level; authorization policies are enforced at the IAM level", "Declarative policies are enforced in the service's control plane; authorization policies regulate access to APIs", "Declarative policies are enforced by AWS Config rules; authorization policies are enforced by service control policies", "Declarative policies are enforced at the VPC network boundary; authorization policies are enforced at resource endpoints"], correct: 1, explanation: "Declarative policies are enforced directly in the service's control plane (not at the API level). This ensures the baseline configuration is always enforced, even when new features or APIs are introduced. Authorization policies (SCPs/RCPs) regulate API access.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html" },
            { id: 9, question: "Can declarative policies govern service-linked roles?", options: ["No, service-linked roles are exempt from all organizational policies including declarative policies", "Yes, declarative policies can govern service-linked roles unlike SCPs and RCPs which cannot", "Yes, but only if the service-linked role is explicitly specified in the declarative policy document", "No, service-linked roles must be managed through AWS Support escalations and cannot be governed by policies"], correct: 1, explanation: "Declarative policies CAN govern service-linked roles, which is a key distinction from SCPs and RCPs. This is because declarative policies are enforced at the service control plane level, not the API authorization level.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html" },
            { id: 10, question: "What feature do declarative policies offer that SCPs and RCPs do not?", options: ["Automatic remediation of non-compliant resources using AWS Systems Manager Automation documents", "Customizable error messages that can include URLs to internal wiki pages or compliance documentation", "Cross-region policy replication ensuring consistent enforcement in all AWS regions simultaneously", "Real-time alerting to Security Hub when configuration drift is detected across accounts"], correct: 1, explanation: "Declarative policies allow custom error messages. When an action fails due to a declarative policy, you can set the error message or provide a custom URL. SCPs and RCPs provide non-customizable 'access denied' errors.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html" },
            { id: 11, question: "Which EC2-related configurations can be controlled using declarative policies?", options: ["EC2 instance types allowed for launch, maximum number of instances per account, and EBS volume size limits", "VPC Block Public Access, Serial Console Access, Image Block Public Access, Allowed Images, Instance Metadata Defaults, and Snapshot Block Public Access", "Security group rule requirements, network ACL configurations, and VPC subnet CIDR range restrictions", "EC2 Auto Scaling policies, Elastic Load Balancer configurations, and CloudWatch alarm thresholds"], correct: 1, explanation: "Declarative policies for EC2 support: VPC Block Public Access (internet gateway controls), Serial Console Access, Image Block Public Access (AMI sharing), Allowed Images Settings, Instance Metadata Defaults (IMDSv2 enforcement), and Snapshot Block Public Access.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 12, question: "What happens to resource configurations when a declarative policy is detached?", options: ["Resources maintain their current configuration until manually changed; the policy no longer enforces future changes", "The attribute state rolls back to its previous state before the declarative policy was attached", "Resources enter a pending state and require administrator approval to continue operating", "AWS Config automatically remediates resources to the default AWS configuration for the service"], correct: 1, explanation: "When a declarative policy is detached, the attribute state rolls back to its previous state before the policy was attached. This allows for testing and reversibility of declarative policy enforcement.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html" },
            { id: 13, question: "What is the purpose of the Account Status Report for declarative policies?", options: ["To track account billing status and identify accounts with overdue payments requiring policy suspension", "To review the current status of all attributes supported by declarative policies, identifying uniform and inconsistent configurations across accounts", "To audit IAM user access patterns and identify unused credentials for security hardening", "To monitor account health metrics including API throttling rates and service quota utilization"], correct: 1, explanation: "The Account Status Report shows the current status of all declarative policy attributes for accounts in scope. It identifies uniform configurations (all accounts match) versus inconsistent configurations, and displays the most frequent value. This helps assess readiness before applying policies.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html" },
            { id: 14, question: "For VPC Block Public Access declarative policy, what are the two modes for internet_gateway_block?", options: ["block_all that prevents all internet traffic, and block_untrusted that allows only whitelisted IPs", "block_ingress that blocks inbound internet traffic except NAT/EGRESS gateways, and block_bidirectional that blocks all traffic except excluded VPCs", "block_public that prevents public IP association, and block_routing that prevents route table modifications", "block_external that denies cross-account access, and block_regional that restricts traffic to same region only"], correct: 1, explanation: "VPC Block Public Access modes: block_ingress (blocks internet traffic to VPCs except NAT/EGRESS gateways which only allow outbound), and block_bidirectional (blocks all traffic to/from internet gateways and EGRESS gateways except excluded VPCs/subnets).", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 15, question: "What is the difference between creating VPC Block Public Access exclusions via declarative policy versus in the account?", options: ["Declarative policies create permanent exclusions; account-level exclusions are temporary and require monthly renewal", "Declarative policies can only configure if exclusions are allowed (enabled/disabled); actual exclusions must be created in the account owning the VPC", "Declarative policies create regional exclusions; account-level exclusions apply globally across all regions", "Declarative policies require AWS Organizations admin role; account-level exclusions can be created by any IAM user"], correct: 1, explanation: "The declarative policy attribute configures whether exclusions are allowed (enabled/disabled), but you cannot create the actual exclusions in the policy. Exclusions must be created in the account that owns the VPC.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 16, question: "What does the Image Block Public Access declarative policy control?", options: ["Blocks launching EC2 instances from AMIs that do not have encryption enabled for all EBS volumes", "Blocks sharing AMIs publicly or cross-account except through approved AWS Resource Access Manager shares", "Prevents public AMI sharing while allowing cross-account sharing; blocks public snapshot sharing except for verified accounts", "Prevents creation of AMIs from running instances that have public IP addresses assigned"], correct: 2, explanation: "Image Block Public Access prevents AMI public sharing but allows cross-account sharing. It also blocks public snapshot sharing except for accounts verified through an external process. This helps prevent accidental public exposure of proprietary AMIs.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 17, question: "What restriction does the Allowed Images Settings declarative policy enforce?", options: ["Restricts EC2 instance launches to AMIs from approved AWS accounts or with specific AMI IDs, ensuring only trusted images are used", "Limits the number of AMIs that can be created per account to prevent storage quota exhaustion", "Enforces that all AMIs must be encrypted with customer-managed KMS keys before instance launch", "Requires all AMIs to pass Amazon Inspector vulnerability scans before they can be used"], correct: 0, explanation: "Allowed Images Settings restricts which AMIs can be used to launch EC2 instances. You can specify allowed AMI accounts (e.g., only your organization's accounts or AWS marketplace) or specific AMI IDs. This prevents launching instances from untrusted images.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 18, question: "What does the Instance Metadata Defaults declarative policy configure?", options: ["Sets default CloudWatch metrics collection interval for all EC2 instances to optimize monitoring costs", "Enforces IMDSv2 requirements (HttpTokens: required, HttpPutResponseHopLimit: 1) for all new EC2 instances and metadata options modifications", "Configures default instance tags applied automatically when instances are launched from Account Factory", "Sets default EBS volume encryption keys used when instances are launched without explicit KMS key specification"], correct: 1, explanation: "Instance Metadata Defaults enforces IMDSv2 (Instance Metadata Service version 2) by setting HttpTokens to 'required' and HttpPutResponseHopLimit to 1. This applies to new instance launches and when metadata options are modified, protecting against SSRF attacks.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 19, question: "What is the purpose of the Serial Console Access declarative policy?", options: ["Enables CloudWatch Logs streaming from EC2 serial console output for centralized log management", "Controls whether account administrators can enable EC2 serial console access for troubleshooting instances without network connectivity", "Configures automatic serial console session recording for compliance and audit requirements", "Enforces MFA authentication requirements when accessing instances through the EC2 serial console"], correct: 1, explanation: "Serial Console Access controls whether account administrators can enable the EC2 serial console feature. Serial console provides troubleshooting access to instances without network connectivity, but can be a security concern. This policy lets you disable it organization-wide.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 20, question: "What protection does the Snapshot Block Public Access declarative policy provide?", options: ["Prevents creation of EBS snapshots unless they are encrypted with customer-managed KMS keys", "Blocks sharing EBS snapshots publicly while allowing private sharing to specific AWS accounts", "Enforces retention policies on snapshots to prevent premature deletion of backup data", "Requires Amazon Data Lifecycle Manager policies to manage all snapshots in the account"], correct: 1, explanation: "Snapshot Block Public Access blocks sharing of EBS snapshots publicly. This prevents accidental public exposure of sensitive data in snapshots. Private sharing to specific AWS accounts is still allowed.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative_syntax.html" },
            { id: 21, question: "How do RCPs and SCPs interact to determine effective permissions?", options: ["SCPs are evaluated first; if allowed, RCPs are then evaluated; both must allow for the action to succeed", "Effective permissions are the logical intersection of what is allowed by RCPs, SCPs, identity-based policies, and resource-based policies", "RCPs override SCPs when both are applied; SCPs only take effect when no RCPs are present", "SCPs apply to member accounts; RCPs apply to the management account; they operate independently"], correct: 1, explanation: "Effective permissions are the logical intersection (AND operation) of: RCPs, SCPs, identity-based policies, and resource-based policies. All must allow the action for it to succeed. A Deny in any policy type blocks the action.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" },
            { id: 22, question: "What should you do before attaching RCPs to the root of your organization?", options: ["Enable AWS CloudTrail organization trails to monitor all RCP-related API activity", "Thoroughly test the RCP impact by attaching to individual test accounts first, then OUs, working your way up", "Create a backup of all IAM policies and resource-based policies in case rollback is needed", "Submit a service limit increase request to AWS Support for RCP attachment at the root level"], correct: 1, explanation: "AWS strongly recommends NOT attaching RCPs to the root without thorough testing. Start with individual test accounts, move to OUs lower in the hierarchy, and work your way up. RCPs can break access to resources if not carefully designed.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" },
            { id: 23, question: "Which statement correctly describes when to use SCPs versus RCPs?", options: ["Use SCPs when limiting your own principals' permissions; use RCPs when restricting external principals accessing your resources", "Use SCPs for detective controls; use RCPs for preventive controls in multi-account environments", "Use SCPs for network-level restrictions; use RCPs for resource-level encryption requirements", "Use SCPs in development accounts; use RCPs in production accounts for tighter security"], correct: 0, explanation: "Use SCPs to limit what YOUR principals (internal to your organization) can do. Use RCPs to restrict external principals from accessing YOUR resources. Together they create a data perimeter protecting identities and resources.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_authorization_policies.html" },
            { id: 24, question: "What is a key limitation of declarative policies to be aware of?", options: ["Declarative policies require Enterprise Support plan and incur additional per-account charges", "Declarative policies currently only support EC2-related services and attributes; other services use SCPs/RCPs", "Declarative policies cannot be applied to the Security OU containing Log Archive and Audit accounts", "Declarative policies override IAM policies and can grant permissions even when identity policies deny"], correct: 1, explanation: "Declarative policies currently support EC2-related configurations (VPC, AMI, snapshots, instances, metadata). For other services, you must use SCPs, RCPs, or service-specific policies. AWS is expanding declarative policy support over time.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_declarative.html" },
            { id: 25, question: "What is the maximum size limit for Resource Control Policies (RCPs)?", options: ["5,120 characters, the same limit as Service Control Policies for consistency", "10,240 characters, allowing for more complex resource restriction rules than SCPs", "No character limit; RCPs are stored in S3 and referenced by pointer in Organizations", "Variable based on the number of AWS services specified in the RCP document"], correct: 0, explanation: "RCPs have a maximum size of 5,120 characters, the same as SCPs. This is enough for most use cases, but complex policies may need to be split or use wildcards. Plan your RCP structure carefully to stay within limits.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">RCP & Declarative</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
