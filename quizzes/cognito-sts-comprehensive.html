<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Cognito & AWS STS Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #ec4899; --accent-secondary: #f472b6; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(236, 72, 153, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(236, 72, 153, 0.2); box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.25), inset 0 0 12px rgba(236, 72, 153, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(236, 72, 153, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(236, 72, 153, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(236, 72, 153, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(236, 72, 153, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 4: Identity & Access Management (20%)</span>
            <h1>Amazon Cognito & AWS STS</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">18</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">45:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">18</span></span>
                    <span class="timer" id="timer">45:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "A mobile app developer needs to authenticate users and then allow them to upload files to S3. Which Cognito components should be used together?", options: ["User Pool to store files and Identity Pool to authenticate users before allowing uploads", "User Pool for authentication returning JWT tokens, then Identity Pool to exchange tokens for AWS credentials", "Identity Pool for both authentication and authorization since it handles the complete flow", "User Pool with direct IAM role attachment for S3 access without needing Identity Pool"], correct: 1, explanation: "Cognito User Pools handle authentication - they are user directories that provide sign-up/sign-in and return JWT tokens. Identity Pools (federated identities) exchange those tokens for temporary AWS credentials, enabling access to AWS services like S3.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html" },
            { id: 2, question: "After successful authentication with a Cognito User Pool, a mobile app receives tokens. Which tokens are returned?", options: ["A single session token that serves as both identity proof and access authorization", "ID token with user claims, access token for API authorization, and refresh token for token renewal", "Access key ID and secret access key pair, plus a session token for AWS API calls", "OAuth authorization code that must be exchanged for tokens at a separate endpoint"], correct: 1, explanation: "Cognito User Pools return three JWT tokens: ID token (contains user identity claims), access token (for API authorization), and refresh token (to get new ID and access tokens without re-authenticating). Each has different purposes and expiration times.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-with-identity-providers.html" },
            { id: 3, question: "A company needs to validate user email domains during sign-up and add custom claims to tokens. Which Cognito feature enables this?", options: ["Custom domains configured in the User Pool settings for email validation", "Lambda triggers that execute at various stages of the authentication workflow", "App clients with custom validation rules defined in the client configuration", "Resource servers with custom scopes that validate email domains"], correct: 1, explanation: "Lambda triggers allow you to customize User Pool workflows: pre sign-up validation (to check email domains), post confirmation, pre/post authentication, custom authentication challenges, token generation (to add custom claims), and user migration.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools-working-with-aws-lambda-triggers.html" },
            { id: 4, question: "A developer needs credentials that expire after a few hours rather than using long-term access keys. Which AWS service provides this capability?", options: ["AWS Secrets Manager for storing and automatically rotating credentials on a schedule", "AWS Security Token Service (STS) for requesting temporary, limited-privilege credentials", "AWS IAM for creating users with short password expiration policies", "AWS KMS for generating time-limited encryption keys for API authentication"], correct: 1, explanation: "AWS STS is a web service that enables you to request temporary, limited-privilege credentials for IAM users or federated users. Temporary credentials consist of an access key ID, secret access key, and security token with an expiration time.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html" },
            { id: 5, question: "An automation script needs a session that lasts 8 hours. What is the maximum configurable session duration for AssumeRole?", options: ["1 hour, which is the fixed maximum for all role assumptions regardless of configuration", "12 hours, but the role must be configured to allow this extended duration", "24 hours for automated workloads, with 12 hours being the limit for console sessions", "36 hours for service-linked roles, but 12 hours for regular cross-account roles"], correct: 1, explanation: "The maximum session duration for AssumeRole is 12 hours (43,200 seconds), but the role must be explicitly configured to allow this duration in its settings. The default is 1 hour. Note: role chaining limits sessions to 1 hour.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html" },
            { id: 6, question: "A third-party SaaS vendor needs to assume a role in your account. You want to ensure the vendor cannot be tricked into using your role on behalf of another customer. What should you configure?", options: ["A unique session name in the trust policy that the vendor must provide with each AssumeRole call", "An external ID condition in the trust policy that acts as a shared secret between you and the vendor", "An IP address condition in the trust policy limiting assumption to the vendor's known IP ranges", "A source identity condition that the vendor must set to your organization's unique identifier"], correct: 1, explanation: "External ID is a condition in role trust policies that prevents confused deputy attacks. You share a unique external ID with the vendor. The role only allows assumption if the correct external ID is provided, preventing misuse.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html" },
            { id: 7, question: "A mobile app needs to allow users to browse product catalogs before signing in. Which Cognito configuration enables guest access to read-only S3 data?", options: ["User Pool guest accounts with minimal permissions that don't require passwords", "Identity Pool with unauthenticated identities enabled and an associated limited-permission IAM role", "Anonymous app clients in the User Pool that bypass authentication requirements", "Public access policies on S3 buckets that allow any Cognito identity to read data"], correct: 1, explanation: "Identity Pools can be configured to allow unauthenticated identities, enabling guest access to AWS resources. You assign a separate IAM role with limited permissions for unauthenticated users, allowing basic functionality before sign-in.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/identity-pools.html" },
            { id: 8, question: "A compliance requirement mandates multi-factor authentication for a Cognito User Pool. Which MFA methods are supported?", options: ["Only hardware security keys (FIDO2/WebAuthn) for FIPS 140-2 compliance", "SMS text messages, TOTP authenticator apps, or both configured per user pool", "Only email-based one-time codes sent to the user's verified email address", "Push notifications through AWS-managed mobile SDKs for seamless MFA experience"], correct: 1, explanation: "Cognito User Pools support MFA via SMS text messages and TOTP (Time-based One-Time Password) authenticator apps like Google Authenticator or Authy. MFA can be required, optional, or off. Users can set up multiple MFA methods.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-settings-mfa.html" },
            { id: 9, question: "A legacy identity broker needs to get temporary credentials for users, combining the broker's permissions with optional policy restrictions. Which STS API is appropriate?", options: ["AssumeRole, which allows the broker to assume a role and pass a session policy for restriction", "GetFederationToken, where the broker's IAM user permissions combine with an optional policy for the federated user", "AssumeRoleWithSAML, which requires the broker to generate SAML assertions for each user", "GetSessionToken, which creates credentials based on the broker's IAM user with added MFA protection"], correct: 1, explanation: "GetFederationToken is called by IAM users (identity brokers) to get temporary credentials for federated users. The effective permissions are the intersection of the calling IAM user's permissions and the optional session policy.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html" },
            { id: 10, question: "A user has a mobile app on their phone and tablet. They need their app preferences to sync between devices. Which Cognito feature provides this?", options: ["User Pool attribute synchronization that replicates custom attributes across user sessions", "Cognito Sync for synchronizing application data across devices for a specific user identity", "Identity Pool linking that merges user data when the same person signs in from different devices", "AppSync real-time subscriptions that push updates to all connected device clients"], correct: 1, explanation: "Cognito Sync enables cross-device syncing of application-related user data. Each user can have up to 20 datasets (up to 1MB each) that sync across devices. Note: AWS recommends AppSync for new applications requiring data sync.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-sync.html" },
            { id: 11, question: "A security incident occurs and an administrator needs to immediately revoke a compromised STS session. What is the correct approach?", options: ["Call sts:RevokeSession with the session token to immediately invalidate the compromised credentials", "Update the role's IAM policy to deny actions for sessions issued before the current time using aws:TokenIssueTime", "Delete and recreate the IAM role to invalidate all existing sessions for that role", "Call sts:InvalidateSessionToken which triggers immediate credential invalidation across all regions"], correct: 1, explanation: "You cannot directly revoke a specific STS token. Instead, you revoke permissions by updating the role policy to deny access to sessions issued before a certain time using the aws:TokenIssueTime condition key. This affects all sessions before that time.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_control-access_disable-perms.html" },
            { id: 12, question: "A user signs into an app using both Facebook and Google on different occasions. The app needs to recognize them as the same user. What Cognito concept enables this?", options: ["Federated user linking through User Pool external provider configuration", "A Cognito Identity in the Identity Pool that can link multiple provider logins to one persistent identifier", "OAuth token exchange that converts provider tokens into a unified Cognito session", "Cross-provider attribute mapping that matches users based on email address"], correct: 1, explanation: "A Cognito identity is a unique identifier in an Identity Pool that persists across sessions. It can link multiple logins (e.g., Facebook and Google) to the same identity, enabling a unified user experience regardless of sign-in method.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/identity-pools.html" },
            { id: 13, question: "An IAM user needs to perform MFA-protected API operations using their own identity (not assuming a different role). Which STS API should they use?", options: ["AssumeRole with SerialNumber and TokenCode to assume their current identity with MFA", "GetSessionToken with SerialNumber and TokenCode to get MFA-authenticated temporary credentials", "GetFederationToken with MFA parameters to create an MFA-protected federated session", "AssumeRoleWithSAML after generating a SAML assertion that includes MFA claims"], correct: 1, explanation: "GetSessionToken is used to get MFA-authenticated temporary credentials for your own IAM user identity without assuming a different role. You provide the MFA device serial number and token code. AssumeRole would switch to a different role.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_sample-code.html" },
            { id: 14, question: "A startup wants to add authentication to their app quickly without building custom sign-in pages. Which Cognito feature helps?", options: ["Amplify UI components that provide pre-built React authentication workflows", "The Cognito hosted UI, a pre-built customizable web page for sign-up, sign-in, and password recovery", "API Gateway Cognito authorizers that handle authentication in the backend", "Lambda@Edge authentication that intercepts requests and validates tokens at CloudFront"], correct: 1, explanation: "The Cognito hosted UI is a pre-built, customizable web page that handles sign-up, sign-in, and password recovery. You can customize its appearance with CSS and use it instead of building your own authentication UI from scratch.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-app-integration.html" },
            { id: 15, question: "A Lambda function assumes RoleA, then needs to assume RoleB to access resources in another account. What limitation applies?", options: ["Cross-account role assumption is not allowed when using temporary credentials from another role", "Role chaining limits the session to a maximum of 1 hour regardless of role duration settings", "Only two levels of role chaining are permitted before credentials must be refreshed", "Role chaining requires explicit permission in the source role's permission boundary"], correct: 1, explanation: "Role chaining occurs when temporary credentials from one assumed role are used to assume another role. The key limitation is that the maximum session duration becomes 1 hour, regardless of any role's configured maximum session duration settings.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html" },
            { id: 16, question: "Users authenticate with a Cognito User Pool and receive JWT tokens. They now need to upload files to S3 directly from the browser. What additional configuration is needed?", options: ["Configure S3 bucket CORS to accept the Cognito JWT token in the Authorization header", "Integrate the User Pool with an Identity Pool to exchange JWT tokens for AWS credentials", "Create an API Gateway endpoint with Cognito authorizer that proxies uploads to S3", "Enable User Pool groups with attached IAM policies for direct AWS service access"], correct: 1, explanation: "User Pool JWTs cannot directly authenticate to AWS services. You need to integrate the User Pool with an Identity Pool, which exchanges the JWT token for temporary AWS credentials (access key, secret key, session token) that can be used with S3.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-integrating-user-pools-with-identity-pools.html" },
            { id: 17, question: "A developer receives an 'Encoded authorization failure message' when testing IAM permissions. How can they decode this to understand the failure?", options: ["Use CloudTrail to look up the encoded message ID and retrieve the decoded authorization details", "Call sts:DecodeAuthorizationMessage to decode the error and see which permission was denied", "Parse the base64-encoded message directly, as it contains JSON with authorization details", "Enable IAM access analyzer to automatically decode and explain authorization failures"], correct: 1, explanation: "DecodeAuthorizationMessage is an STS API that decodes the encoded additional information in authorization failure error messages. This reveals exactly which action, resource, or condition caused the denial, useful for debugging permissions.", docLink: "https://docs.aws.amazon.com/STS/latest/APIReference/API_DecodeAuthorizationMessage.html" },
            { id: 18, question: "A financial services company needs to detect if users are signing in with passwords found in known data breaches. Which Cognito feature provides this?", options: ["Custom Lambda triggers that check passwords against a breach database during sign-up", "Advanced Security features with compromised credentials detection and adaptive authentication", "Password policies configured to require complexity that makes breach matching unlikely", "AWS WAF integration that blocks requests containing known compromised password patterns"], correct: 1, explanation: "Cognito Advanced Security provides compromised credentials detection (checking passwords against breach databases), adaptive authentication (risk-based MFA), and analytics. It can automatically block or require additional verification for risky sign-ins.", docLink: "https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pool-settings-advanced-security.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Cognito & STS</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
