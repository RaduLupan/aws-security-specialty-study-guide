<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS WAF Comprehensive Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #141b2d;
            --bg-tertiary: #1a2236;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --accent-primary: #a855f7;
            --accent-secondary: #c084fc;
            --success: #22c55e;
            --error: #ef4444;
            --warning: #eab308;
            --info: #3b82f6;
            --border: #2d3a52;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; }
        .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); }
        .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .mode-btn.active { border-color: var(--accent-primary); background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(192, 132, 252, 0.1)); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; }
        .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(168, 85, 247, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(168, 85, 247, 0.2); box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.25), inset 0 0 12px rgba(168, 85, 247, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; transition: all 0.2s ease; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(168, 85, 247, 0.1); border-radius: 6px; transition: background 0.2s ease; }
        .doc-link:hover { background: rgba(168, 85, 247, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); }
        .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); }
        .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; }
        .breakdown-value { font-size: 2rem; font-weight: 700; }
        .breakdown-value.correct { color: var(--success); }
        .breakdown-value.incorrect { color: var(--error); }
        .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(168, 85, 247, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(168, 85, 247, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(168, 85, 247, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(168, 85, 247, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(168, 85, 247, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        @media (max-width: 640px) {
            .container { padding: 1rem; }
            h1 { font-size: 1.5rem; }
            .stats-bar { gap: 1rem; }
            .mode-selector { flex-direction: column; }
            .btn-container { flex-direction: column; }
            .results-breakdown { flex-direction: column; gap: 1.5rem; }
            .btn-group { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 3: Infrastructure Security</span>
            <h1>AWS WAF</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-value">20</div>
                    <div class="stat-label">Questions</div>
                </div>
                <div class="stat">
                    <div class="stat-value">80%</div>
                    <div class="stat-label">Pass Score</div>
                </div>
                <div class="stat">
                    <div class="stat-value">50:00</div>
                    <div class="stat-label">Exam Time</div>
                </div>
            </div>
        </header>

        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>

        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>

        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item">
                    <div class="breakdown-value correct" id="correctCount">0</div>
                    <div class="breakdown-label">Correct</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-value incorrect" id="incorrectCount">0</div>
                    <div class="breakdown-label">Incorrect</div>
                </div>
            </div>
            <div class="btn-group" id="resultsButtons">
                <button class="btn btn-primary" id="reviewBtn" onclick="showReview()" style="display: none;">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 15%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="review-status">
                <p class="results-details">Reviewed: <span id="reviewedCount">0</span> / <span id="totalReviewCount">0</span> questions</p>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="backToResults()">‚Üê Back to Results</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            { id: 1, question: "A security engineer needs to protect a web application from SQL injection and XSS attacks. They need to associate protection rules with the Application Load Balancer. What WAF component should they create first?", options: ["An IP Set containing known malicious IP addresses", "A Web ACL that contains rules and specifies actions for matching requests", "A Rule Group with custom detection patterns", "A Regex Pattern Set for attack signatures"], correct: 1, explanation: "A Web ACL is the primary component in AWS WAF. It contains rules and specifies what actions to take (ALLOW, BLOCK, COUNT) when requests match rule conditions. You associate Web ACLs with protected resources like ALBs, CloudFront, or API Gateway.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/web-acl.html" },
            { id: 2, question: "A company uses Network Load Balancer for their TCP-based application. The security team wants to add AWS WAF protection. What should you tell them?", options: ["Create a Web ACL and associate it with the NLB target group", "AWS WAF cannot integrate with Network Load Balancer - WAF operates at Layer 7 while NLB operates at Layer 4", "Use WAF Bot Control managed rules which support Layer 4 inspection", "Deploy WAF on the EC2 instances behind the NLB"], correct: 1, explanation: "AWS WAF operates at Layer 7 (application layer) and cannot integrate with Network Load Balancer, which operates at Layer 4. WAF integrates with CloudFront, ALB, API Gateway, AppSync, Cognito User Pools, and App Runner.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/how-aws-waf-works.html" },
            { id: 3, question: "A login page is experiencing a brute-force attack with thousands of requests per minute from individual IPs. The security team needs to automatically block IPs that exceed normal usage. What WAF feature addresses this?", options: ["A regular rule with IP Set that blocks suspicious addresses", "A rate-based rule that limits requests per IP over a 5-minute window", "The IP reputation managed rule group that identifies attackers", "Bot Control managed rules with targeted protection"], correct: 1, explanation: "Rate-based rules track request rates from individual IP addresses over a 5-minute window. When an IP exceeds the defined threshold, the rule action (typically BLOCK) is triggered. This is effective against brute-force attacks and simple DDoS.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-statement-type-rate-based.html" },
            { id: 4, question: "A startup with limited security expertise needs protection against OWASP Top 10 vulnerabilities. They don't have time to write custom rules. What is the fastest path to protection?", options: ["Hire a security consultant to create custom WAF rules", "Enable AWS Managed Rules which provide pre-built protection against common threats", "Use AWS Inspector to generate WAF rules based on vulnerability scans", "Configure AWS Shield Advanced which includes WAF rule automation"], correct: 1, explanation: "AWS Managed Rules are pre-configured rule groups maintained by AWS and AWS Marketplace sellers. The Core Rule Set (CRS) provides protection against OWASP Top 10 vulnerabilities without requiring custom rule development.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/aws-managed-rule-groups.html" },
            { id: 5, question: "A security team adds a new blocking rule to a production Web ACL. Traffic to /admin paths should be blocked, but the rule is being evaluated AFTER the default allow rule and never matches. What should they do?", options: ["Remove the default allow rule temporarily", "Set a lower priority number for the blocking rule so it's evaluated first", "Use a scope-down statement to bypass the allow rule", "Create a separate Web ACL just for /admin paths"], correct: 1, explanation: "Web ACL rules are evaluated in priority order, starting with the lowest numeric priority. To ensure the /admin blocking rule is evaluated before the allow rule, set a lower priority number. WAF stops processing when a terminating action (ALLOW/BLOCK) is applied.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/web-acl-processing-order.html" },
            { id: 6, question: "A website needs to distinguish between humans and bots without requiring users to solve puzzles on every visit. Once verified, users should browse freely for a period. What WAF action achieves this?", options: ["COUNT action which tracks bot visits without blocking", "CAPTCHA action which presents an interactive puzzle and issues a token for future requests", "BLOCK action with custom response redirecting to verification page", "Challenge action which is silent and doesn't issue tokens"], correct: 1, explanation: "The CAPTCHA action presents a puzzle to verify humans. Once solved, a token is issued that's valid for a configurable time (immunity time), allowing the user to browse without repeated challenges. This balances security with user experience.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-action.html" },
            { id: 7, question: "An e-commerce application is vulnerable to SQL injection through the search parameter. The security team wants built-in detection rather than maintaining custom regex patterns. What should they use?", options: ["String match statement with SQL keywords in the pattern", "Size constraint statement limiting input length to prevent long injection strings", "SQLi attack rule statement which uses AWS-maintained detection logic", "Regex pattern set containing common SQL injection signatures"], correct: 2, explanation: "The SQLi attack rule statement (SqliMatchStatement) uses AWS-maintained detection logic including signatures, patterns, and machine learning to detect SQL injection attempts. It's more comprehensive and current than manually maintained patterns.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-statement-type-sqli-match.html" },
            { id: 8, question: "After enabling AWS Managed Rules, legitimate requests to /api/graphql are being blocked by the Known Bad Inputs rule group. The security team wants to keep the rule group but exclude this specific path. How?", options: ["Disable the entire Known Bad Inputs rule group for the Web ACL", "Add a scope-down statement to exclude /api/graphql from the rule group's evaluation", "Create an ALLOW rule with higher priority for /api/graphql", "Modify the managed rule group directly to add an exception"], correct: 1, explanation: "Scope-down statements narrow which requests a managed rule group evaluates. You can exclude specific URI paths, headers, or other request components without disabling the entire rule group, reducing false positives while maintaining protection.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-managed-rule-groups-testing.html" },
            { id: 9, question: "Before deploying new WAF rules to production, the security team wants to see what traffic would be blocked without actually blocking it. What is the recommended approach?", options: ["Deploy to a staging environment that mirrors production traffic", "Use the COUNT action to log matching requests without blocking them", "Enable AWS WAF Sampled Requests to see a subset of affected traffic", "Review CloudWatch metrics for the rule without enabling it"], correct: 1, explanation: "The COUNT action allows requests to pass while recording metrics and logs. This lets you test rules against production traffic, analyze what would be blocked, and tune rules before changing to BLOCK action. Labels can be applied for detailed analysis.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-action.html" },
            { id: 10, question: "A security team needs WAF logs for compliance, real-time alerting on blocks, and long-term analysis. They want a cost-effective architecture. Where should they send WAF logs?", options: ["Only to CloudWatch Logs for real-time alerting since it covers all requirements", "S3 for cost-effective long-term storage, with CloudWatch Logs subscription filter for alerts", "DynamoDB for structured log storage and fast queries", "Only to Kinesis Data Firehose for streaming to multiple destinations"], correct: 1, explanation: "WAF supports logging to S3 (cost-effective long-term storage), CloudWatch Logs (real-time monitoring), and Kinesis Data Firehose (streaming). DynamoDB is not a supported destination. The combination of S3 and CloudWatch Logs balances cost and functionality.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/logging.html" },
            { id: 11, question: "A complex security policy requires: first checking if traffic is from a known bad IP, then if not, checking if it shows bot-like behavior, and finally applying rate limits only to suspicious traffic. How can WAF support this multi-stage evaluation?", options: ["Create separate Web ACLs for each stage and chain them together", "Use labels to tag requests in early rules and match labels in later rules", "Configure rule dependencies in the Web ACL settings", "This requires multiple WAF deployments with traffic routing between them"], correct: 1, explanation: "Labels are metadata that rules can add to matching requests. Later rules in the same Web ACL can match against these labels using label match statements. This enables multi-stage, decision-tree style evaluation within a single Web ACL.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-labels.html" },
            { id: 12, question: "A WAF rule inspecting request bodies isn't catching large payload attacks. The ALB receives POST requests up to 1 MB, but attacks hide malicious content at the 100 KB mark. What is the issue?", options: ["ALB doesn't forward request bodies to WAF for inspection", "WAF can only inspect up to 64 KB of request body - content beyond this limit is not analyzed", "The rule needs explicit configuration to inspect large bodies", "POST body inspection is disabled by default and must be enabled"], correct: 1, explanation: "AWS WAF can inspect up to 64 KB of request body for regional resources (ALB, API Gateway). Content beyond this limit is not inspected. For applications with larger payloads, consider architectural changes or application-level validation.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/web-request-body-inspection.html" },
            { id: 13, question: "A company needs immediate protection against common web attacks while their security team develops custom rules. They want coverage for OWASP Top 10 including SQL injection, XSS, and path traversal. Which managed rule group should they enable first?", options: ["Amazon IP reputation list for known bad actors", "Core rule set (CRS) which covers OWASP Top 10 vulnerabilities", "Known bad inputs for malicious request patterns", "Bot Control for automated attack prevention"], correct: 1, explanation: "The Core rule set (CRS) provides broad protection against OWASP Top 10 vulnerabilities including SQLi, XSS, LFI/RFI, and path traversal. It's the foundational managed rule group for web application security.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/aws-managed-rule-groups-baseline.html" },
            { id: 14, question: "An API needs protection from simple automated scripts and bots, but can't use CAPTCHA because it's consumed by mobile apps. Users shouldn't see any interruption. What WAF action is appropriate?", options: ["COUNT action which is completely invisible to clients", "Challenge action which silently runs JavaScript verification without user interaction", "BLOCK action with 200 OK response to hide the block from bots", "Rate-based rule which doesn't require client-side verification"], correct: 1, explanation: "The Challenge action runs silent JavaScript verification in the browser. Unlike CAPTCHA, it requires no user interaction. It verifies the client can execute JavaScript, blocking simple scripts and curl-based attacks while allowing real browsers and apps.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-action.html" },
            { id: 15, question: "Security monitoring detected requests from IPs associated with known botnets and DDoS campaigns. The team wants automatic blocking of such IPs without manual list maintenance. What should they use?", options: ["Create a custom IP Set and subscribe to threat intelligence feeds", "Enable the Amazon IP reputation list managed rule group", "Configure AWS Shield Advanced with threat intelligence integration", "Set up GuardDuty to feed findings to WAF IP Sets"], correct: 1, explanation: "The Amazon IP reputation list is a managed rule group that blocks IPs associated with bots, botnets, and other threats. AWS maintains this list using threat intelligence, eliminating the need for manual IP list maintenance.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/aws-managed-rule-groups-ip-rep.html" },
            { id: 16, question: "Due to licensing restrictions, a streaming service must block access from certain countries. They need to identify the user's country from their IP address and deny access. What WAF capability addresses this?", options: ["IP set match statement with country-specific IP ranges manually maintained", "Geo match statement that automatically identifies country from IP address", "String match on Accept-Language header to determine user location", "Custom rule with GeoIP database integration"], correct: 1, explanation: "The Geo match statement uses AWS's IP geolocation database to identify the country of origin for requests. You can BLOCK or ALLOW requests based on country codes without maintaining IP ranges manually.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-rule-statement-type-geo-match.html" },
            { id: 17, question: "An e-commerce site wants to allow good bots (Googlebot, Bingbot) while blocking malicious scrapers. They also want to detect bots pretending to be legitimate crawlers. What WAF feature provides this capability?", options: ["IP reputation list which identifies known bot IPs", "Bot Control managed rule group which categorizes and verifies bot identities", "Rate-based rules that limit crawler request rates", "Custom rules matching User-Agent strings for known bots"], correct: 1, explanation: "Bot Control categorizes bots as common (like search engines), uncommon, or malicious. It can verify that bots claiming to be Googlebot actually come from Google's IP ranges, detecting spoofed User-Agents. You configure different actions per category.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-bot-control.html" },
            { id: 18, question: "A user successfully solves a CAPTCHA on www.example.com but is prompted again when navigating to api.example.com. Both domains are protected by the same Web ACL. How can this be fixed?", options: ["Create separate Web ACLs with linked token validation", "Configure token domains to share CAPTCHA tokens across both domains", "Enable cross-domain cookie support in the Web ACL", "This behavior cannot be changed - tokens are domain-specific"], correct: 1, explanation: "Token domains allow you to specify additional domains that share WAF tokens. By configuring api.example.com as a token domain for the Web ACL, CAPTCHA tokens from www.example.com will be valid on both domains.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-tokens.html" },
            { id: 19, question: "A development team needs to block requests containing specific API keys that were accidentally exposed. The keys follow a pattern: 'APIKEY-[A-F0-9]{32}'. They want to reuse this pattern across multiple rules. What should they create?", options: ["An IP Set with the pattern as a description", "A regex pattern set containing the API key pattern for use in multiple rules", "A managed rule group with the pattern configuration", "A string match rule with the pattern as the search string"], correct: 1, explanation: "Regex pattern sets are collections of regular expressions that can be referenced in multiple rules using RegexPatternSetReferenceStatement. Create the pattern once and reuse it across rules and Web ACLs.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/waf-regex-pattern-set.html" },
            { id: 20, question: "When WAF blocks a request, users see a generic 403 Forbidden page. The UX team wants blocked users to see a friendly error page explaining the issue and providing contact information. How can this be achieved?", options: ["Configure the ALB to return custom error pages for 403 responses", "Set up a custom response body in the BLOCK action with a user-friendly HTML page", "Create an AWS Lambda function to intercept and modify WAF responses", "Use CloudFront custom error pages to override WAF block responses"], correct: 1, explanation: "WAF BLOCK actions support custom responses where you specify the HTTP status code and response body. You can provide a friendly HTML page explaining the block and how users can get help.", docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/customizing-the-response-for-blocked-requests.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], container = document.getElementById('questionsContainer'), letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; container.innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">AWS WAF</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(dir) { if (dir === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + dir, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let c = 0; shuffledQuestions.forEach((q, i) => { if (userAnswers[i] !== null && userAnswers[i] !== -1 && userAnswers[i] === q.correct) c++; }); const t = shuffledQuestions.length, p = Math.round((c / t) * 100), pass = p >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = p + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${c} out of ${t} questions correctly. ${pass ? 'Great job!' : 'You need 80% to pass.'}`; document.getElementById('correctCount').textContent = c; document.getElementById('incorrectCount').textContent = t - c; if (currentMode === 'exam') document.getElementById('reviewBtn').style.display = 'inline-block'; else document.getElementById('reviewBtn').style.display = 'none'; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
        function showReview() { const letters = ['A','B','C','D'], tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = ''; shuffledQuestions.forEach((q, idx) => { const userAns = userAnswers[idx] !== null && userAnswers[idx] !== undefined ? userAnswers[idx] : -1, isCorrect = userAns === q.correct, rowClass = reviewedQuestions.includes(idx) ? 'reviewed' : ''; let row = '<tr class="' + rowClass + '" onclick="reviewQuestion(' + idx + ')">'; row += '<td class="review-q-num">' + (idx + 1) + '</td>'; row += '<td class="review-q-text">' + q.question.substring(0, 100) + (q.question.length > 100 ? '...' : '') + '</td>'; row += '<td class="review-answer ' + (userAns >= 0 ? (isCorrect ? 'correct' : 'incorrect') : '') + '">' + (userAns >= 0 ? letters[userAns] : '‚Äî') + '</td>'; row += '<td class="review-answer correct">' + letters[q.correct] + '</td>'; row += '<td>' + (isCorrect ? '<span style="color:var(--success)">‚úì Correct</span>' : '<span style="color:var(--error)">‚úó Incorrect</span>') + '</td>'; row += '</tr>'; tbody.innerHTML += row; }); document.getElementById('totalReviewCount').textContent = shuffledQuestions.length; document.getElementById('reviewedCount').textContent = reviewedQuestions.length; document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); document.getElementById('reviewedCount').textContent = reviewedQuestions.length; } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; inReviewMode = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('reviewSection').classList.add('show'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); }
    </script>
</body>
</html>
