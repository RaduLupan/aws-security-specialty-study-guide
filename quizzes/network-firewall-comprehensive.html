<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Network Firewall Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #141b2d;
            --bg-tertiary: #1a2236;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --accent-primary: #dc2626;
            --accent-secondary: #ef4444;
            --success: #22c55e;
            --error: #ef4444;
            --warning: #eab308;
            --info: #3b82f6;
            --border: #2d3a52;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; }
        .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); }
        .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .mode-btn.active { border-color: var(--accent-primary); background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(239, 68, 68, 0.1)); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; }
        .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(220, 38, 38, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(220, 38, 38, 0.2); box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.25), inset 0 0 12px rgba(220, 38, 38, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; transition: all 0.2s ease; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(220, 38, 38, 0.1); border-radius: 6px; transition: background 0.2s ease; }
        .doc-link:hover { background: rgba(220, 38, 38, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); }
        .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); }
        .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; }
        .breakdown-value { font-size: 2rem; font-weight: 700; }
        .breakdown-value.correct { color: var(--success); }
        .breakdown-value.incorrect { color: var(--error); }
        .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(220, 38, 38, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) {
            .container { padding: 1rem; }
            h1 { font-size: 1.5rem; }
            .stats-bar { gap: 1rem; }
            .mode-selector { flex-direction: column; }
            .btn-container { flex-direction: column; }
            .results-breakdown { flex-direction: column; gap: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 3: Infrastructure Security</span>
            <h1>AWS Network Firewall</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-value">20</div>
                    <div class="stat-label">Questions</div>
                </div>
                <div class="stat">
                    <div class="stat-value">80%</div>
                    <div class="stat-label">Pass Score</div>
                </div>
                <div class="stat">
                    <div class="stat-value">50:00</div>
                    <div class="stat-label">Exam Time</div>
                </div>
            </div>
        </header>

        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>

        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>

        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item">
                    <div class="breakdown-value correct" id="correctCount">0</div>
                    <div class="breakdown-label">Correct</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-value incorrect" id="incorrectCount">0</div>
                    <div class="breakdown-label">Incorrect</div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                question: "What is AWS Network Firewall?",
                options: [
                    "An enhanced version of Security Groups with deep packet inspection for EC2 instances",
                    "A managed network firewall service for VPC that provides stateful inspection and IPS/IDS",
                    "A layer 7 web application firewall that integrates with ALB and CloudFront distributions",
                    "A DNS firewall that filters Route 53 Resolver queries based on domain reputation lists"
                ],
                correct: 1,
                explanation: "AWS Network Firewall is a managed, stateful network firewall and intrusion detection/prevention service for VPCs. It provides deep packet inspection, domain filtering, and can detect and prevent malicious traffic. It operates at layers 3-7 of the OSI model.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/what-is-aws-network-firewall.html"
            },
            {
                id: 2,
                question: "What are the two types of rule engines in AWS Network Firewall?",
                options: [
                    "Ingress and Egress engines that evaluate traffic directionally at VPC boundaries",
                    "Stateless and Stateful engines that process packets differently based on connection context",
                    "Layer 3 and Layer 7 engines that specialize in network vs application layer inspection",
                    "Standard and Suricata engines that use different rule syntax for matching"
                ],
                correct: 1,
                explanation: "Network Firewall uses two rule engines: the stateless engine inspects each packet in isolation (similar to NACLs), while the stateful engine inspects packets in the context of their traffic flow (similar to Security Groups). Traffic passes through stateless first, then can be forwarded to stateful.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/firewall-rules-engines.html"
            },
            {
                id: 3,
                question: "What intrusion prevention system (IPS) is Network Firewall stateful rules compatible with?",
                options: [
                    "Snort",
                    "Suricata",
                    "OSSEC",
                    "ClamAV"
                ],
                correct: 1,
                explanation: "Network Firewall stateful rules are compatible with Suricata, an open-source intrusion prevention system. You can use Suricata-compatible rule syntax to create custom IPS/IDS rules. AWS also provides managed Suricata-compatible rule groups.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/stateful-rule-groups-ips.html"
            },
            {
                id: 4,
                question: "How does traffic flow through a Network Firewall?",
                options: [
                    "Stateful rules are evaluated first for connection tracking, then stateless rules apply actions",
                    "All rules from both engines are evaluated together and the most specific match wins",
                    "Stateless rules evaluate first, then matching traffic can be forwarded to stateful engine",
                    "Traffic is load balanced across both engines and the first matching rule from either applies"
                ],
                correct: 2,
                explanation: "Traffic first goes through the stateless rules engine. Based on the rule action (pass, drop, or forward to stateful), matching traffic either continues to its destination, is dropped, or is forwarded to the stateful rules engine for deeper inspection.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/firewall-rules-engines.html"
            },
            {
                id: 5,
                question: "What is a firewall policy in AWS Network Firewall?",
                options: [
                    "A resource-based policy attached to the firewall endpoint to control which VPCs can route to it",
                    "A container that defines stateless and stateful rule groups and their order of evaluation",
                    "A set of VPC route table entries that direct traffic through the firewall endpoints",
                    "A logging configuration that specifies which traffic events are sent to CloudWatch or S3"
                ],
                correct: 1,
                explanation: "A firewall policy defines the monitoring and protection behavior for a firewall. It contains references to stateless and stateful rule groups, defines rule group priorities, and specifies default actions for packets that don't match any rules.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/firewall-policies.html"
            },
            {
                id: 6,
                question: "Which Network Firewall deployment model uses a separate inspection VPC?",
                options: [
                    "Distributed deployment",
                    "Centralized deployment",
                    "Hybrid deployment",
                    "Edge deployment"
                ],
                correct: 1,
                explanation: "In a centralized deployment, the firewall is placed in a dedicated inspection VPC. Traffic from workload VPCs is routed through Transit Gateway to the inspection VPC for filtering. This model simplifies management but adds latency and Transit Gateway costs.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/architectures.html"
            },
            {
                id: 7,
                question: "What is domain filtering in AWS Network Firewall used for?",
                options: [
                    "Filtering Route 53 Resolver DNS queries using Route 53 Resolver DNS Firewall integration",
                    "Allowing or blocking traffic based on domain names extracted from SNI or HTTP Host headers",
                    "Filtering outbound SMTP traffic by checking recipient email domains against deny lists",
                    "Creating URL path-based rules that match specific API endpoints for microservices"
                ],
                correct: 1,
                explanation: "Domain filtering allows you to create allow or deny lists of domain names. The firewall inspects the Server Name Indication (SNI) in TLS handshakes or Host headers in HTTP requests to match against domain lists. This enables outbound filtering without proxy.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/stateful-rule-groups-domain-names.html"
            },
            {
                id: 8,
                question: "What happens to traffic that matches a stateless rule with the 'forward to stateful rules' action?",
                options: [
                    "The traffic is dropped immediately and logged with the stateless rule ID for auditing",
                    "The traffic bypasses stateful rules and is passed directly to its destination",
                    "The traffic is sent to the stateful rules engine for deeper context-aware inspection",
                    "The traffic is held in a buffer until stateful rules are evaluated in parallel"
                ],
                correct: 2,
                explanation: "When a stateless rule matches with 'forward to stateful rules' action, the packet is sent to the stateful rules engine for deeper, context-aware inspection. This allows you to use stateless rules for simple filtering and stateful rules for complex protocol analysis.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/firewall-rules-engines.html"
            },
            {
                id: 9,
                question: "How is AWS Network Firewall deployed in a VPC?",
                options: [
                    "As a Gateway Load Balancer endpoint",
                    "As firewall endpoints in dedicated subnets",
                    "As an ENI attached to EC2 instances",
                    "As a Transit Gateway attachment"
                ],
                correct: 1,
                explanation: "Network Firewall is deployed by creating firewall endpoints in dedicated subnets within your VPC. Each firewall endpoint is created in a specific Availability Zone. You then configure route tables to direct traffic through these endpoints.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/firewalls.html"
            },
            {
                id: 10,
                question: "What is the purpose of stateful rule groups with 'strict order' evaluation?",
                options: [
                    "To group related rules together for easier management without affecting evaluation order",
                    "To evaluate rules in explicit priority order with deterministic pass/drop actions",
                    "To optimize rule processing by evaluating the most frequently matched rules first",
                    "To enable parallel evaluation of rule groups for improved throughput and latency"
                ],
                correct: 1,
                explanation: "Strict order evaluation processes stateful rules in the exact priority order you define. Rules are evaluated until a match is found, and the matching rule's action (pass, drop, alert, reject) is applied. This gives you precise control over rule evaluation logic.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/stateful-rule-groups-ips.html"
            },
            {
                id: 11,
                question: "Which logging destination is NOT supported by AWS Network Firewall?",
                options: [
                    "Amazon S3",
                    "Amazon CloudWatch Logs",
                    "Amazon Kinesis Data Firehose",
                    "Amazon DynamoDB"
                ],
                correct: 3,
                explanation: "Network Firewall supports logging to Amazon S3, CloudWatch Logs, and Kinesis Data Firehose. You can log alert logs (matching stateful rules) and flow logs (network traffic metadata). DynamoDB is not a supported logging destination.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/firewall-logging.html"
            },
            {
                id: 12,
                question: "What is asymmetric routing and why is it a concern for Network Firewall?",
                options: [
                    "When firewall endpoints in different AZs receive uneven traffic loads causing inspection delays",
                    "When traffic takes different network paths for requests vs responses, breaking stateful tracking",
                    "When TLS inspection fails because request and response use different encryption algorithms",
                    "When rule priorities differ between stateless and stateful engines causing inconsistent enforcement"
                ],
                correct: 1,
                explanation: "Asymmetric routing occurs when traffic takes different network paths for outbound requests vs inbound responses. This breaks stateful inspection because the firewall can't match response traffic to the original request. Proper routing configuration is essential to avoid this.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/asymmetric-routing.html"
            },
            {
                id: 13,
                question: "What is the default action for stateful rules in Network Firewall?",
                options: [
                    "Drop all traffic",
                    "Allow (pass) all traffic",
                    "Alert on all traffic",
                    "Forward to stateless rules"
                ],
                correct: 1,
                explanation: "By default, the stateful rules engine allows traffic to pass if no rules match (default pass). This is opposite of traditional firewalls that default to deny. You can configure drop rules to block unwanted traffic, or use strict order with explicit default drop.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/stateful-rule-groups-ips.html"
            },
            {
                id: 14,
                question: "How can AWS Firewall Manager help with Network Firewall?",
                options: [
                    "It provides a unified dashboard combining Network Firewall with WAF and Shield metrics",
                    "It centrally deploys and manages Network Firewall policies across Organization accounts",
                    "It adds machine learning capabilities to Network Firewall for automated threat detection",
                    "It aggregates Network Firewall logs from multiple accounts into a single data lake"
                ],
                correct: 1,
                explanation: "AWS Firewall Manager allows you to centrally configure and manage Network Firewall policies across multiple accounts in AWS Organizations. You can define policies that automatically deploy firewall configurations to new VPCs as they're created.",
                docLink: "https://docs.aws.amazon.com/waf/latest/developerguide/network-firewall-policies.html"
            },
            {
                id: 15,
                question: "What is the purpose of the 'HOME_NET' variable in Network Firewall Suricata rules?",
                options: [
                    "To define the firewall's IP address",
                    "To define the IP address ranges considered internal/protected",
                    "To specify home network DNS servers",
                    "To configure VPN endpoints"
                ],
                correct: 1,
                explanation: "HOME_NET is a Suricata variable that defines your internal/protected IP address ranges (typically your VPC CIDRs). Rules use this to distinguish between inbound and outbound traffic, and to identify traffic direction for intrusion detection signatures.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/suricata-rule-evaluation-order.html"
            },
            {
                id: 16,
                question: "What type of Network Firewall rule would you use to block traffic to specific IP addresses based on AWS managed threat intelligence?",
                options: [
                    "Custom stateless rule",
                    "Managed threat signatures rule group",
                    "Domain list rule",
                    "Port-based rule"
                ],
                correct: 1,
                explanation: "AWS provides managed threat signatures rule groups that contain rules based on threat intelligence. These include rules to block traffic to known malicious IPs, command and control servers, and other threat indicators. They're updated automatically by AWS.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/aws-managed-rule-groups-threat-signature.html"
            },
            {
                id: 17,
                question: "In a distributed deployment model, where are Network Firewall endpoints placed?",
                options: [
                    "In a central inspection VPC only",
                    "In each workload VPC that needs protection",
                    "Only at the internet gateway",
                    "Only at the Transit Gateway"
                ],
                correct: 1,
                explanation: "In a distributed deployment, firewall endpoints are deployed directly in each workload VPC that requires protection. This reduces latency compared to centralized deployment but requires managing firewall configurations in multiple VPCs.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/architectures.html"
            },
            {
                id: 18,
                question: "What is TLS inspection in AWS Network Firewall?",
                options: [
                    "Inspecting the SNI field in TLS handshakes without decrypting the connection payload",
                    "Decrypting TLS traffic, inspecting the plaintext content, and re-encrypting before forwarding",
                    "Validating that TLS certificates presented by servers are trusted by a configured CA",
                    "Blocking connections that use deprecated TLS versions like TLS 1.0 or TLS 1.1"
                ],
                correct: 1,
                explanation: "TLS inspection (SSL inspection) allows Network Firewall to decrypt TLS/SSL traffic, inspect the contents using stateful rules, and then re-encrypt it. This enables deep packet inspection of encrypted traffic to detect threats hidden in HTTPS connections.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/tls-inspection-configurations.html"
            },
            {
                id: 19,
                question: "What happens when Network Firewall capacity is exceeded?",
                options: [
                    "Traffic is automatically dropped",
                    "The firewall automatically scales to handle increased traffic",
                    "Traffic bypasses the firewall",
                    "An error is logged and traffic queues"
                ],
                correct: 1,
                explanation: "AWS Network Firewall automatically scales to handle traffic spikes. It's a managed service that adjusts capacity based on your traffic load without requiring manual intervention. You pay for the data processed, and there are no predefined capacity limits to configure.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/what-is-aws-network-firewall.html"
            },
            {
                id: 20,
                question: "What is the relationship between Network Firewall and Amazon GuardDuty?",
                options: [
                    "Network Firewall logs are analyzed by GuardDuty to generate threat findings",
                    "GuardDuty threat findings can drive automated updates to Network Firewall blocking rules",
                    "GuardDuty manages Network Firewall rule groups through integrated policy configuration",
                    "Network Firewall provides the VPC flow data that GuardDuty uses for anomaly detection"
                ],
                correct: 1,
                explanation: "GuardDuty and Network Firewall work together: GuardDuty detects threats and generates findings, which can be used to inform Network Firewall rules. You can automate blocking of malicious IPs identified by GuardDuty by updating Network Firewall rules via Lambda or EventBridge.",
                docLink: "https://docs.aws.amazon.com/network-firewall/latest/developerguide/nwfw-atd-guardduty-use-case.html"
            }
        ];

        let currentMode = 'learn', answersRevealed = [];
        let currentQuestion = 0;
        let userAnswers = [];
        let shuffledQuestions = [];
        let timerInterval = null;
        let timeRemaining = 0;

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function shuffleQuestionOptions(question) {
            const optionIndices = [0, 1, 2, 3];
            const shuffledIndices = shuffleArray(optionIndices);
            const newQuestion = { ...question };
            newQuestion.options = shuffledIndices.map(i => question.options[i]);
            newQuestion.correct = shuffledIndices.indexOf(question.correct);
            newQuestion.shuffleMap = shuffledIndices;
            return newQuestion;
        }

        function startQuiz(mode) {
            currentMode = mode;
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            answersRevealed = new Array(questions.length).fill(false);
            shuffledQuestions = shuffleArray(questions).map(q => shuffleQuestionOptions(q));
            document.getElementById('modeSelector').classList.add('hidden');
            document.getElementById('quizContent').classList.remove('hidden');
            document.getElementById('resultsCard').classList.remove('hidden');
            document.getElementById('resultsCard').classList.remove('show');
            document.getElementById('totalQ').textContent = shuffledQuestions.length;
            if (mode === 'exam') {
                timeRemaining = shuffledQuestions.length * 150;
                startTimer();
                document.getElementById('shuffleBtn').classList.add('hidden');
            } else {
                document.getElementById('timer').textContent = 'Learn Mode';
                document.getElementById('shuffleBtn').classList.remove('hidden');
            }
            renderQuestion();
        }

        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    showResults();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timerEl = document.getElementById('timer');
            timerEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            timerEl.classList.remove('warning', 'danger');
            if (timeRemaining <= 60) timerEl.classList.add('danger');
            else if (timeRemaining <= 300) timerEl.classList.add('warning');
        }

        function renderQuestion() {
            const q = shuffledQuestions[currentQuestion], container = document.getElementById('questionsContainer'), letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion];
            let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join('');
            let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : '';
            container.innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Network Firewall</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`;
            document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí';
        }

        function selectOption(idx) {
            if (currentMode === 'learn' && answersRevealed[currentQuestion]) return;
            userAnswers[currentQuestion] = idx;
            renderQuestion(); // Always re-render to show selection in both modes
        }

        function revealAnswer() {
            if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1;
            answersRevealed[currentQuestion] = true;
            renderQuestion();
        }

        function navigate(direction) {
            if (direction === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; }
            currentQuestion += direction;
            currentQuestion = Math.max(0, Math.min(currentQuestion, shuffledQuestions.length - 1));
            renderQuestion();
        }

        function shuffleQuiz() {
            if (currentMode !== 'learn') return;
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            answersRevealed = new Array(questions.length).fill(false);
            shuffledQuestions = shuffleArray(questions).map(q => shuffleQuestionOptions(q));
            renderQuestion();
            const notice = document.getElementById('shuffleNotice');
            notice.style.animation = 'none';
            notice.offsetHeight;
            notice.style.animation = 'fadeIn 0.5s ease';
        }

        function showResults() {
            if (timerInterval) clearInterval(timerInterval);
            let correct = 0;
            shuffledQuestions.forEach((q, idx) => {
                if (userAnswers[idx] !== null && userAnswers[idx] !== -1 && userAnswers[idx] === q.correct) correct++;
            });
            const total = shuffledQuestions.length;
            const percentage = Math.round((correct / total) * 100);
            const passed = percentage >= 80;
            document.getElementById('quizContent').classList.add('hidden');
            document.getElementById('resultsCard').classList.add('show');
            document.getElementById('scorePercent').textContent = percentage + '%';
            document.getElementById('scorePercent').className = 'results-score ' + (passed ? 'pass' : 'fail');
            document.getElementById('resultStatus').textContent = passed ? 'üéâ PASSED!' : 'üìö Keep Studying';
            document.getElementById('resultStatus').className = 'results-status ' + (passed ? 'pass' : 'fail');
            document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly. ${passed ? 'Great job!' : 'You need 80% to pass.'}`;
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('incorrectCount').textContent = total - correct;
        }

        function restartQuiz() {
            document.getElementById('resultsCard').classList.remove('show');
            document.getElementById('modeSelector').classList.remove('hidden');
            document.getElementById('quizContent').classList.add('hidden');
            if (timerInterval) clearInterval(timerInterval);
        }
    </script>
</body>
</html>
