<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMS Imported Keys & External Key Store Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #14b8a6; --accent-secondary: #2dd4bf; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(20, 184, 166, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(20, 184, 166, 0.2); box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.25), inset 0 0 12px rgba(20, 184, 166, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(20, 184, 166, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(20, 184, 166, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(20, 184, 166, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(20, 184, 166, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(20, 184, 166, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(20, 184, 166, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(20, 184, 166, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(20, 184, 166, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 5: Data Protection (26%)</span>
            <h1>üîë KMS Imported Keys & External Key Store</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">25</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">62:30</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">25</span></span>
                    <span class="timer" id="timer">62:30</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is the common term for importing your own key material into AWS KMS?", options: ["Bring Your Own Key (BYOK), which allows you to supply your own key material to AWS KMS", "External Key Management (EKM), which manages keys outside AWS and imports them for cryptographic operations", "Customer Managed Encryption (CME), which provides full control over key generation and rotation policies", "Self-Provided Keys (SPK), which enables organizations to maintain copies of encryption keys externally"], correct: 0, explanation: "Importing key material into AWS KMS is commonly known as 'Bring Your Own Key' (BYOK). This feature allows you to generate key material using your own entropy source and import it into KMS keys, while KMS handles the lifecycle management within AWS.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html" },
            { id: 2, question: "Which types of KMS keys support imported key material?", options: ["Only symmetric encryption KMS keys support imported key material for backward compatibility with legacy systems", "Symmetric encryption keys, asymmetric keys (except ML-DSA), HMAC keys, and multi-Region keys of supported types", "All KMS key types including keys in custom key stores like CloudHSM and external key stores", "Symmetric and asymmetric keys but not HMAC keys or multi-Region keys due to implementation constraints"], correct: 1, explanation: "AWS KMS supports imported key material for symmetric encryption keys, asymmetric keys (except ML-DSA keys), HMAC keys, and multi-Region keys of all supported types. However, you CANNOT import key material into KMS keys in custom key stores (CloudHSM or External Key Stores).", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html" },
            { id: 3, question: "What is the key origin value for a KMS key designed to use imported key material?", options: ["IMPORTED indicating the key material was provided by the customer rather than generated by AWS KMS", "EXTERNAL indicating the key material comes from outside AWS KMS and is managed by the customer", "CUSTOMER_PROVIDED indicating the customer supplied the key material through the import process", "BYOK indicating this is a bring-your-own-key implementation with customer-managed key material"], correct: 1, explanation: "KMS keys designed for imported key material have an origin value of EXTERNAL. This origin value is permanent and cannot be changed. You cannot convert a KMS key with AWS KMS-generated key material (origin: AWS_KMS) into one designed for imported key material, or vice versa.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 4, question: "Can you enable automatic key rotation for a KMS key with imported key material?", options: ["Yes, automatic rotation is supported but requires reimporting the same key material every 365 days", "No, automatic rotation is not supported, but you can perform manual rotation or on-demand rotation for symmetric keys", "Yes, but only for symmetric encryption keys and not for asymmetric or HMAC keys with imported material", "No, rotation requires generating new key material which AWS KMS cannot do for imported keys"], correct: 1, explanation: "Automatic key rotation is NOT supported for KMS keys with imported key material because AWS KMS cannot generate new key material for these keys. However, you can manually rotate keys by creating a new KMS key with new imported material. For symmetric encryption keys with imported material, you can use on-demand rotation to import multiple key materials.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 5, question: "What happens when you delete imported key material from a KMS key?", options: ["The KMS key enters a 7-30 day waiting period before permanent deletion, allowing you to cancel if needed", "The key material is deleted immediately with no recovery option, rendering the KMS key unusable for operations", "The key material moves to a quarantine state for 24 hours before permanent deletion as a safety measure", "The KMS key reverts to AWS-managed key material generation and continues functioning with new material"], correct: 1, explanation: "When you delete imported key material, AWS KMS deletes it IMMEDIATELY with no recovery option from AWS. The KMS key becomes unusable for cryptographic operations. This is different from scheduling KMS key deletion (7-30 day waiting period). To make the key usable again, you must reimport the same key material.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 6, question: "Can you set an expiration time for imported key material?", options: ["Yes, and when the expiration time arrives AWS KMS automatically reimports the material if you provided backup copies", "Yes, and when the expiration time arrives AWS KMS deletes the key material rendering the KMS key unusable", "No, expiration times are only supported for AWS-generated key material to ensure consistent key lifecycle management", "No, but you can configure CloudWatch alarms that trigger Lambda functions to delete expired imported materials"], correct: 1, explanation: "Yes, when you import key material, you can set an expiration time. When the expiration arrives, AWS KMS automatically deletes the key material, making the KMS key unusable. To restore it, you must reimport the same key material. You can create CloudWatch alarms to notify you before expiration occurs.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 7, question: "Who is responsible for the availability and durability of imported key material?", options: ["AWS KMS maintains the same availability and durability guarantees as AWS-generated keys through redundant storage", "The customer is responsible; AWS KMS does not maintain imported key material at the same durability level", "Shared responsibility: AWS maintains availability while customers ensure durability through external backup copies", "AWS KMS for availability during active use; customers for durability if key material expires or is deleted"], correct: 1, explanation: "The customer is responsible for the availability and durability of imported key material. AWS KMS keeps imported material highly available while in use, but does NOT maintain it at the same durability level as AWS-generated keys. You must maintain external copies of your imported key material to reimport if deleted or expired.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 8, question: "Can you export key material that you previously imported into AWS KMS?", options: ["Yes, using the ExportKeyMaterial API with proper IAM permissions and MFA authentication enabled", "No, AWS KMS cannot return imported key material in any form; you must maintain external copies", "Yes, but only within 30 days of import and only to the AWS account that performed the import", "No, unless you encrypted the original import using a customer-managed KMS key that still exists"], correct: 1, explanation: "You CANNOT export any key material that you imported into AWS KMS. AWS KMS cannot return the imported key material to you in any form. This is why you must maintain a copy of your imported key material outside of AWS (preferably in an HSM or key manager) so you can reimport it if needed.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 9, question: "For asymmetric and HMAC keys with imported key material, can you import different key material into the same KMS key?", options: ["Yes, you can import different key material to perform key rotation and maintain backward compatibility", "No, the KMS key is permanently associated with the original imported key material for these key types", "Yes, but only once every 90 days to prevent confusion and ensure proper key management practices", "No, unless you first delete the KMS key and recreate it with a new key ID and policy"], correct: 1, explanation: "For asymmetric and HMAC keys, when you import key material, the KMS key is PERMANENTLY associated with that key material. You can reimport the SAME key material, but you cannot import DIFFERENT key material into that KMS key. Only symmetric encryption keys support importing multiple different key materials for on-demand rotation.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 10, question: "What advanced rotation capability do symmetric encryption keys with imported key material support?", options: ["Automatic annual rotation that generates new key material within AWS KMS HSMs without customer intervention", "On-demand rotation that allows importing multiple key materials, with current material used for encryption and decryption", "Cross-Region rotation that replicates key material to other Regions automatically when multi-Region keys are configured", "Scheduled rotation using AWS Systems Manager Automation to reimport key material from external sources periodically"], correct: 1, explanation: "Symmetric encryption keys with imported key material support on-demand rotation. You can import multiple key materials into these keys. The current (most recent) key material is used for both encryption and decryption, while older (non-current) key materials can only be used for decryption. This enables key rotation without re-encrypting data.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 11, question: "Can you create multi-Region keys with imported key material?", options: ["No, multi-Region keys require AWS-generated key material to ensure consistency across Regions", "Yes, but you must import the same key material into the primary key and each replica key", "Yes, and AWS KMS automatically replicates the imported key material to replica keys in other Regions", "No, imported key material is only supported for single-Region keys due to cross-Region synchronization complexity"], correct: 1, explanation: "Yes, you can create multi-Region keys with imported key material. However, YOU must import the SAME key material into both the primary KMS key and into each replica key. AWS KMS does not automatically replicate imported key material across Regions - you must perform the import operation in each Region.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 12, question: "Are asymmetric keys and HMAC keys with imported key material portable and interoperable with systems outside AWS?", options: ["Yes, because AWS KMS uses standard formats enabling use of the same key material inside and outside AWS", "No, AWS KMS adds proprietary metadata that prevents external systems from using the key material", "Yes, but only for public key operations; private key operations require AWS KMS API calls", "No, unless you implement the AWS KMS ciphertext format specification in your external systems"], correct: 0, explanation: "Yes! Asymmetric keys and HMAC keys with imported key material are portable and interoperable. AWS KMS uses standard HMAC and asymmetric formats (not proprietary formats), so you can use the same key material outside AWS for encryption, signing, and MAC generation. This enables traditional key escrow scenarios. Note: Symmetric encryption ciphertext is NOT portable due to AWS KMS-specific metadata.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 13, question: "What is a custom key store in AWS KMS?", options: ["A regional KMS service instance dedicated to a single customer for enhanced isolation and compliance", "A key store backed by a key manager outside of AWS KMS that the customer owns and manages", "A specialized S3 bucket encrypted with KMS keys where customers store encryption key backups", "A CloudHSM cluster configured to generate and store customer-managed keys for use across AWS services"], correct: 1, explanation: "A custom key store is a key store within AWS KMS that is backed by a key manager OUTSIDE of AWS KMS, which you own and manage. Custom key stores combine the KMS management interface with your ability to own and control key material and cryptographic operations. AWS KMS supports two types: AWS CloudHSM key stores and External Key Stores (XKS).", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html" },
            { id: 14, question: "Which features are NOT supported in AWS KMS custom key stores?", options: ["Symmetric encryption keys, key policies, grants, and integration with AWS services like S3 and EBS", "Asymmetric keys, HMAC keys, imported key material, automatic rotation, and multi-Region keys", "Cross-account key sharing, CloudTrail logging, key aliases, and customer-managed key policies", "Envelope encryption, data key caching, encryption context validation, and AWS service integrations"], correct: 1, explanation: "Custom key stores (both CloudHSM and External) do NOT support: asymmetric KMS keys, HMAC keys, imported key material, automatic key rotation, or multi-Region keys. These are limitations of custom key stores compared to standard KMS keys. Only symmetric encryption keys are supported in custom key stores.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html" },
            { id: 15, question: "What is an AWS CloudHSM key store?", options: ["A key store where KMS keys are generated and stored in a CloudHSM cluster that you own and manage", "A virtual HSM provided by AWS that emulates CloudHSM hardware for development and testing environments", "A KMS feature that automatically backs up key material to CloudHSM clusters for disaster recovery", "A shared HSM service that provides FIPS 140-2 Level 3 validation for multi-tenant key storage"], correct: 0, explanation: "An AWS CloudHSM key store is a custom key store where root keys are generated, stored, and used in an AWS CloudHSM cluster that YOU own and manage. Cryptographic operations are forwarded to your CloudHSM cluster. While AWS hosts the cluster, it's single-tenant and you control its availability and performance.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html" },
            { id: 16, question: "What is an External Key Store (XKS)?", options: ["A custom key store where keys are generated and stored in AWS but metadata is stored externally", "A custom key store where keys are generated, stored, and used in a key management system outside AWS Cloud", "A third-party HSM integrated with AWS KMS through AWS Marketplace that provides additional compliance certifications", "A backup mechanism that replicates KMS key material to customer-managed S3 buckets in different Regions"], correct: 1, explanation: "An External Key Store (XKS) is a custom key store where root keys are generated, stored, and used in a key management system OUTSIDE the AWS Cloud. Requests for cryptographic operations are forwarded to an XKS Proxy in your network, which then forwards to your cryptographic system. You own all availability, durability, and performance.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html" },
            { id: 17, question: "What is an XKS Proxy?", options: ["An AWS service that proxies requests between KMS and external key stores with built-in caching", "An open-source specification that anyone can integrate with to connect external key managers to AWS KMS", "A proprietary AWS technology that encrypts communications between KMS and customer HSM clusters", "A CloudFormation template that deploys proxy instances in customer VPCs for XKS connectivity"], correct: 1, explanation: "The XKS Proxy is an open-source specification that anyone can integrate with to connect external key management systems to AWS KMS. Many commercial key management vendors support the XKS Proxy specification. When AWS KMS needs to perform cryptographic operations, it forwards requests to your XKS Proxy, which then forwards them to your key manager.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html" },
            { id: 18, question: "What connectivity options are available for External Key Stores?", options: ["Public endpoint connectivity using internet-accessible proxy URIs and VPC endpoint service connectivity using PrivateLink", "Only VPC endpoint connectivity through AWS PrivateLink to ensure all traffic remains on the AWS network", "Direct Connect connectivity for dedicated network connections and VPN connectivity for encrypted tunnels", "Public endpoint connectivity only; private connectivity requires AWS CloudHSM key stores instead"], correct: 0, explanation: "External Key Stores support two connectivity options: (1) Public endpoint connectivity - AWS KMS connects to an internet-accessible proxy URI endpoint; (2) VPC endpoint service connectivity - AWS KMS uses PrivateLink to connect to your VPC endpoint service, keeping traffic on the AWS network.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/about-xks-connecting.html" },
            { id: 19, question: "When connecting an external key store with public endpoint connectivity, what does AWS KMS validate?", options: ["The SSL certificate validity, proxy response time, and available bandwidth for cryptographic operations", "The proxy URI endpoint, proxy URI path, and proxy authentication credential through a GetHealthStatus request", "The external key manager's FIPS 140-2 certification level and compliance with AWS security standards", "The network latency between AWS KMS and the proxy, and the proxy's capacity to handle concurrent requests"], correct: 1, explanation: "When connecting with public endpoint connectivity, AWS KMS sends a GetHealthStatus request to validate: (1) The proxy URI endpoint is accessible, (2) The proxy URI path is correct, (3) The proxy authentication credential is valid. A successful response confirms the endpoint/path are accurate and the proxy authenticated the request.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/about-xks-connecting.html" },
            { id: 20, question: "What additional step does AWS KMS perform when connecting an external key store with VPC endpoint service connectivity?", options: ["AWS KMS configures VPC peering between the customer VPC and AWS KMS service VPC for direct communication", "AWS KMS confirms the private DNS name domain is verified, creates an interface endpoint, and creates a private hosted zone", "AWS KMS deploys a Network Load Balancer in the customer VPC to distribute traffic to XKS Proxy instances", "AWS KMS establishes a VPN connection between AWS KMS and the customer network for encrypted proxy communication"], correct: 1, explanation: "For VPC endpoint service connectivity, AWS KMS: (1) Confirms the private DNS name domain is verified, (2) Creates an interface endpoint from an AWS KMS VPC to your VPC endpoint service, (3) Creates a private hosted zone for the private DNS name, (4) Sends a GetHealthStatus request to validate the connection.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/about-xks-connecting.html" },
            { id: 21, question: "How long does it typically take to connect an external key store to its external key store proxy?", options: ["Approximately 30 seconds; the operation completes quickly once validation checks pass successfully", "Approximately 5 minutes; a success response from connect operation does not indicate immediate connection", "Approximately 15 minutes due to DNS propagation and interface endpoint creation in VPC connectivity scenarios", "Approximately 1 hour to allow time for security group rule propagation and network configuration updates"], correct: 1, explanation: "Connecting an external key store takes approximately 5 MINUTES to complete. A success response from the ConnectCustomKeyStore operation does NOT indicate the connection is complete. You must use the console or DescribeCustomKeyStores API to view the connection state and confirm the connection was successful.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/about-xks-connecting.html" },
            { id: 22, question: "What does a connection state of FAILED indicate for an external key store?", options: ["The external key store proxy is temporarily unavailable but AWS KMS will automatically retry the connection", "A connection error occurred and an error code is displayed to help troubleshoot the connectivity issue", "The XKS Proxy authentication credential has expired and must be renewed within 24 hours", "Network connectivity issues exist between AWS KMS and the proxy that require VPC configuration changes"], correct: 1, explanation: "When the connection state is FAILED, AWS KMS displays a connection error code in the console and adds it to the DescribeCustomKeyStore response. These error codes help you troubleshoot the specific issue (e.g., invalid credentials, unreachable endpoint, authentication failures). AWS provides detailed documentation for interpreting and resolving connection error codes.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/about-xks-connecting.html" },
            { id: 23, question: "What are the three steps to import key material into a KMS key?", options: ["Generate key material locally, encrypt it with KMS-provided public key using import token, import encrypted material into KMS", "Create KMS key with EXTERNAL origin, request import parameters from KMS, encrypt and import key material with token", "Create symmetric encryption key, generate wrapping key in CloudHSM, encrypt key material with wrapping key and import", "Generate 256-bit AES key, upload to S3 bucket with SSE-KMS encryption, reference S3 object in KMS import API"], correct: 1, explanation: "The three steps to import key material are: (1) Create a KMS key with no key material (origin=EXTERNAL), (2) Download the public wrapping key and import token from KMS, (3) Encrypt your key material using the wrapping key, then import the encrypted key material along with the import token into the KMS key.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html" },
            { id: 24, question: "Why must you maintain an external copy of imported key material?", options: ["AWS KMS requires annual re-certification of imported keys and you must provide the original material", "AWS KMS cannot export imported material; you need it to reimport if the material is deleted or expires", "AWS regulations require customers to maintain backup copies of all encryption keys for audit purposes", "AWS KMS automatically deletes imported material after 1 year and you must reimport to continue using the key"], correct: 1, explanation: "You must maintain external copies of imported key material because: (1) AWS KMS cannot export key material in any form, (2) If you delete the key material or it expires, you must reimport the SAME material to make the key usable again, (3) AWS does not maintain the durability of imported material at the same level as AWS-generated keys. Keep copies in an HSM or key manager.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys-considerations.html" },
            { id: 25, question: "What is the primary benefit of using custom key stores (CloudHSM or External Key Stores) over standard KMS keys?", options: ["Custom key stores provide faster cryptographic operations and lower latency for high-throughput applications", "Custom key stores enable you to own and control the key material and HSMs, which some regulations require", "Custom key stores support all key types including asymmetric keys and HMAC keys not available in standard KMS", "Custom key stores automatically replicate key material across Regions for improved disaster recovery capabilities"], correct: 1, explanation: "The primary benefit of custom key stores is that you OWN and CONTROL the key material and the HSMs/key managers. This may be required by certain regulatory frameworks that don't allow multi-tenant services to hold keys. However, custom key stores have higher management burden and cost, don't support all KMS features, and are NOT more secure than standard KMS - just different control models.", docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/key-store-overview.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">KMS Keys & XKS</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>