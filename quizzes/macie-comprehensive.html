<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Macie Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #a855f7; --accent-secondary: #c084fc; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(168, 85, 247, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(168, 85, 247, 0.2); box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.25), inset 0 0 12px rgba(168, 85, 247, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(168, 85, 247, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(168, 85, 247, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(168, 85, 247, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(168, 85, 247, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(168, 85, 247, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(168, 85, 247, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(168, 85, 247, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown, .btn-group { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 5: Data Protection (18%)</span>
            <h1>Amazon Macie</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">18</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">45:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">18</span></span>
                    <span class="timer" id="timer">45:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group" id="resultsButtons">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 15%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="review-status">
                <p class="results-details">Reviewed: <span id="reviewedCount">0</span> / <span id="totalReviewCount">0</span> questions</p>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="backToResults()">‚Üê Back to Results</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "A security team needs to identify S3 buckets containing customer PII across 500+ buckets. Which service should they use?", options: ["AWS Config with custom rules to scan S3 object contents for PII patterns", "Amazon Macie which uses machine learning and pattern matching to discover sensitive data in S3", "Amazon GuardDuty with S3 protection to detect sensitive data access patterns", "AWS Inspector to scan S3 buckets for sensitive data exposure vulnerabilities"], correct: 1, explanation: "Amazon Macie uses ML and pattern matching to discover sensitive data (PII, PHI, financial data) in S3. Config tracks configuration, GuardDuty detects threats, and Inspector scans for vulnerabilities - none analyze S3 object contents for sensitive data.", docLink: "https://docs.aws.amazon.com/macie/latest/user/what-is-macie.html" },
            { id: 2, question: "Macie detected credit card numbers in several buckets. A security architect asks how Macie knows what a credit card number looks like. What should you explain?", options: ["Macie requires you to upload sample credit card data for training its detection models", "Macie uses managed data identifiers - AWS-maintained detection criteria for common sensitive data types", "Macie connects to external threat intelligence feeds that contain credit card format definitions", "Macie learns from your organization's data over time using unsupervised machine learning"], correct: 1, explanation: "Managed data identifiers are pre-built, AWS-maintained criteria for common sensitive data types. They use pattern matching, ML, and proximity detection. AWS updates them as formats evolve. No training data or external feeds required.", docLink: "https://docs.aws.amazon.com/macie/latest/user/managed-data-identifiers.html" },
            { id: 3, question: "A company uses proprietary patient identifiers (format: PT-XXXXXXXX) that Macie doesn't detect by default. How can they configure Macie to find these?", options: ["Contact AWS Support to add the pattern to managed data identifiers", "Create a custom data identifier using a regular expression matching the PT-XXXXXXXX format", "Tag S3 objects containing patient IDs and configure Macie to scan tagged objects", "Enable enhanced detection mode which automatically learns custom patterns from your data"], correct: 1, explanation: "Custom data identifiers let you define regex patterns for organization-specific data types like employee IDs, patient identifiers, or project codes. Managed identifiers are AWS-maintained and cannot be customized.", docLink: "https://docs.aws.amazon.com/macie/latest/user/custom-data-identifiers.html" },
            { id: 4, question: "A company wants continuous visibility into sensitive data across all S3 buckets, plus the ability to run deep scans on specific high-risk buckets. What Macie features address this?", options: ["Real-time monitoring for continuous visibility, plus batch scanning for targeted deep analysis", "Automated sensitive data discovery for ongoing sampling, plus discovery jobs for targeted deep analysis", "Active mode for continuous scanning, plus passive mode for on-demand detailed analysis", "Continuous discovery for all buckets, plus enhanced discovery for specific bucket deep analysis"], correct: 1, explanation: "Automated sensitive data discovery continuously samples across your S3 estate. Sensitive data discovery jobs provide targeted, scheduled analysis of specific buckets you define for deeper inspection.", docLink: "https://docs.aws.amazon.com/macie/latest/user/data-classification.html" },
            { id: 5, question: "A dashboard shows a bucket with sensitivity score of 45. What does this indicate?", options: ["45% of objects in the bucket are encrypted with customer-managed keys", "An estimated 45% of objects in the bucket contain some form of sensitive data", "The bucket has 45 policy findings requiring remediation", "The bucket received 45 access attempts from external principals this month"], correct: 1, explanation: "Sensitivity score (0-100) indicates the estimated percentage of objects containing sensitive data. Macie calculates this through intelligent sampling during automated discovery. Higher scores warrant investigation.", docLink: "https://docs.aws.amazon.com/macie/latest/user/discovery-asdd-how-it-works.html" },
            { id: 6, question: "A security team wants to automate responses to Macie findings and maintain a long-term archive. Where should findings be sent?", options: ["CloudWatch Logs for archival with automatic response via CloudWatch Alarms", "Security Hub for centralized management, EventBridge for automation, S3 for long-term storage", "SNS for immediate notification with S3 configured as a dead-letter queue for archival", "CloudTrail for audit logging with Lambda triggers for automated remediation"], correct: 1, explanation: "Macie integrates with Security Hub (centralized findings), EventBridge (automation triggers), and optionally S3 (long-term storage of detailed results). CloudWatch/SNS/CloudTrail aren't direct Macie integration points.", docLink: "https://docs.aws.amazon.com/macie/latest/user/findings.html" },
            { id: 7, question: "A development bucket contains test data with fake SSNs that Macie keeps flagging. How can this be addressed without disabling Macie for the bucket?", options: ["Add the bucket to Macie's exclusion list to skip all analysis of its contents", "Create an allow list with the test SSN values or patterns to ignore during discovery", "Mark the findings as false positives which trains Macie to ignore similar patterns", "Disable the SSN managed data identifier for all buckets in the account"], correct: 1, explanation: "Allow lists specify text or patterns Macie should ignore. Add the test SSN values or a regex pattern matching them. This reduces false positives while maintaining detection for real SSNs in other buckets.", docLink: "https://docs.aws.amazon.com/macie/latest/user/allow-lists.html" },
            { id: 8, question: "A CISO asks what categories of sensitive data Macie can identify beyond credit cards and SSNs. What should you tell them?", options: ["Macie focuses exclusively on financial data types like credit cards and bank account numbers", "Macie detects PII, PHI, financial data, credentials like API keys, plus any custom patterns you define", "Macie only detects data types required by GDPR and cannot be extended for other categories", "Macie detects whatever patterns you explicitly configure; there are no built-in categories"], correct: 1, explanation: "Macie detects multiple categories out of the box: PII (names, SSNs, passports), PHI (health records), financial data (cards, accounts), credentials (API keys, passwords). Custom identifiers extend detection to organization-specific patterns.", docLink: "https://docs.aws.amazon.com/macie/latest/user/managed-data-identifiers.html" },
            { id: 9, question: "A bucket uses SSE-KMS encryption with a customer managed key. Can Macie analyze objects in this bucket?", options: ["No, Macie can only analyze unencrypted objects or those using SSE-S3", "Yes, if you grant Macie's service role kms:Decrypt permission on the customer managed key", "Yes, Macie automatically has access to all KMS keys in the account where it's enabled", "No, Macie cannot decrypt any server-side encrypted objects regardless of encryption type"], correct: 1, explanation: "Macie analyzes SSE-S3 objects automatically. For SSE-KMS with customer managed keys, grant Macie's service role kms:Decrypt permission. SSE-C objects cannot be analyzed since Macie lacks the customer-provided keys.", docLink: "https://docs.aws.amazon.com/macie/latest/user/discovery-supported-encryption-types.html" },
            { id: 10, question: "A security team in a member account should manage Macie across the organization. How is this configured?", options: ["Grant the member account OrganizationsFullAccess and MacieFullAccess policies", "Designate the member account as a delegated administrator for Macie from the management account", "Share Macie findings with the member account using AWS Resource Access Manager", "Create a cross-account role allowing the member account to access Macie in all accounts"], correct: 1, explanation: "A delegated administrator is a member account designated to manage Macie across all organization accounts. This follows AWS best practice of not using the management account for day-to-day service management.", docLink: "https://docs.aws.amazon.com/macie/latest/user/macie-organizations.html" },
            { id: 11, question: "Macie generates two finding types. Sensitive data findings show detected data. What do policy findings indicate?", options: ["Violations of IAM policies that could lead to sensitive data exposure", "S3 bucket configuration issues like public access, disabled encryption, or missing policies", "AWS Organizations SCP violations affecting S3 bucket access patterns", "Deviations from AWS security best practices in the account's overall configuration"], correct: 1, explanation: "Policy findings indicate S3 bucket security/privacy configuration issues - public accessibility, disabled default encryption, missing bucket policies, etc. They complement sensitive data findings by highlighting the containers at risk.", docLink: "https://docs.aws.amazon.com/macie/latest/user/findings-types.html" },
            { id: 12, question: "A finance team asks about Macie costs before enabling it across 1000 buckets with 50TB of data. What pricing components should you explain?", options: ["A flat monthly fee per AWS account regardless of buckets or data volume", "Monthly fee per evaluated bucket for bucket analysis, plus per-GB charge for discovery job data analyzed", "Per-finding pricing where costs scale with the number of sensitive data detections", "Pay-per-query pricing similar to Athena for each sensitive data scan request"], correct: 1, explanation: "Macie has two pricing components: monthly fee per evaluated bucket (for bucket-level analysis) and per-GB for data analyzed in discovery jobs. Automated discovery samples data efficiently. 30-day free trial available.", docLink: "https://aws.amazon.com/macie/pricing/" },
            { id: 13, question: "A bucket contains Parquet files, compressed archives, and PDF documents. Can Macie analyze all of these?", options: ["Only plain text and CSV files are supported; binary formats require pre-processing", "Yes, Macie supports text, CSV, JSON, Parquet, PDF, Office documents, and compressed archives", "PDF and Office documents require the Macie Enhanced analysis add-on feature", "Compressed archives must be extracted first; Macie cannot analyze archive contents directly"], correct: 1, explanation: "Macie supports numerous formats: text, CSV, TSV, JSON, Parquet, Avro, PDF, Microsoft Office (Word, Excel, PowerPoint), Open Document formats, and compressed archives (ZIP, GZIP, TAR) - analyzing contents within archives.", docLink: "https://docs.aws.amazon.com/macie/latest/user/discovery-supported-formats.html" },
            { id: 14, question: "A security lead worries that automated discovery analyzing all objects would be too expensive. How does automated discovery actually work?", options: ["It analyzes all objects on a rotating schedule, completing full analysis over 30 days", "It uses intelligent sampling to analyze representative subsets, prioritizing new and high-risk objects", "It only analyzes objects that match pre-defined sensitive data patterns in their names", "It analyzes all objects once, then only new objects uploaded after initial discovery"], correct: 1, explanation: "Automated discovery uses intelligent sampling - analyzing representative subsets across your S3 estate. It prioritizes new/modified objects and buckets with sensitivity indicators for efficient, cost-effective assessment.", docLink: "https://docs.aws.amazon.com/macie/latest/user/discovery-asdd-how-it-works.html" },
            { id: 15, question: "An auditor needs Macie discovery results from 6 months ago. Are they available?", options: ["Yes, Macie retains all results indefinitely by default for compliance purposes", "No, Macie retains results for 90 days; configure S3 export for longer retention", "Yes, Macie stores results in CloudWatch Logs which has configurable retention", "No, Macie results are only visible in real-time and not stored persistently"], correct: 1, explanation: "Macie retains sensitive data discovery results for 90 days by default. For longer retention, configure Macie to export detailed results to an S3 bucket where you control retention. Plan ahead for compliance needs.", docLink: "https://docs.aws.amazon.com/macie/latest/user/discovery-results-repository-s3.html" },
            { id: 16, question: "A compliance team needs to scan a specific bucket containing financial reports every week. What Macie feature should they use?", options: ["Enable automated discovery with the bucket marked as high-priority", "Create a sensitive data discovery job targeting the bucket with weekly scheduling", "Configure a CloudWatch Events rule to trigger Macie API calls weekly", "Enable continuous monitoring which automatically prioritizes compliance-tagged buckets"], correct: 1, explanation: "Sensitive data discovery jobs (classification jobs) let you target specific buckets, prefixes, or objects. Configure them to run on a schedule (weekly) or one-time. You control scope, criteria, and timing for targeted analysis.", docLink: "https://docs.aws.amazon.com/macie/latest/user/discovery-jobs.html" },
            { id: 17, question: "A security team uses Security Hub to aggregate findings from multiple services. How do Macie findings appear there?", options: ["Macie findings must be manually exported and imported into Security Hub", "Macie automatically publishes findings to Security Hub in AWS Security Finding Format (ASFF)", "Security Hub must be configured to poll Macie for new findings periodically", "Macie findings appear in Security Hub only if you configure EventBridge as an intermediary"], correct: 1, explanation: "Macie automatically integrates with Security Hub, publishing findings in ASFF. This provides centralized visibility alongside GuardDuty, Inspector, and other security findings without manual configuration.", docLink: "https://docs.aws.amazon.com/macie/latest/user/securityhub-integration.html" },
            { id: 18, question: "A backup bucket legitimately contains sensitive data and generates constant Macie findings. How can these be handled without deleting the bucket from Macie scope?", options: ["Manually dismiss each finding as they appear in the Macie console", "Create suppression rules to automatically archive findings matching criteria for this bucket", "Disable all managed data identifiers for the specific bucket", "Configure the bucket as a Macie-exempt resource in the account settings"], correct: 1, explanation: "Suppression rules automatically archive findings matching your criteria (bucket, finding type, etc.). Findings are still recorded for compliance but don't clutter active views. This manages expected findings without disabling detection.", docLink: "https://docs.aws.amazon.com/macie/latest/user/findings-suppression.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Macie</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
        function showReview() { const letters = ['A','B','C','D'], tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = ''; shuffledQuestions.forEach((q, idx) => { const userAns = userAnswers[idx] !== null && userAnswers[idx] !== undefined ? userAnswers[idx] : -1, isCorrect = userAns === q.correct, rowClass = reviewedQuestions.includes(idx) ? 'reviewed' : ''; let row = '<tr class="' + rowClass + '" onclick="reviewQuestion(' + idx + ')">'; row += '<td class="review-q-num">' + (idx + 1) + '</td>'; row += '<td class="review-q-text">' + q.question.substring(0, 100) + (q.question.length > 100 ? '...' : '') + '</td>'; row += '<td class="review-answer ' + (userAns >= 0 ? (isCorrect ? 'correct' : 'incorrect') : '') + '">' + (userAns >= 0 ? letters[userAns] : '‚Äî') + '</td>'; row += '<td class="review-answer correct">' + letters[q.correct] + '</td>'; row += '<td>' + (isCorrect ? '<span style="color:var(--success)">‚úì Correct</span>' : '<span style="color:var(--error)">‚úó Incorrect</span>') + '</td>'; row += '</tr>'; tbody.innerHTML += row; }); document.getElementById('totalReviewCount').textContent = shuffledQuestions.length; document.getElementById('reviewedCount').textContent = reviewedQuestions.length; document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); document.getElementById('reviewedCount').textContent = reviewedQuestions.length; } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; inReviewMode = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('reviewSection').classList.add('show'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); }
    </script>
</body>
</html>
