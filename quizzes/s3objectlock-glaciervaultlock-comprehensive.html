<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S3 Object Lock & Glacier Vault Lock Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #10b981; --accent-secondary: #34d399; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(16, 185, 129, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(16, 185, 129, 0.2); box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.25), inset 0 0 12px rgba(16, 185, 129, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(16, 185, 129, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(16, 185, 129, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(16, 185, 129, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(16, 185, 129, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(16, 185, 129, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 5: Data Protection (26%)</span>
            <h1>üîí S3 Object Lock & Glacier Vault Lock</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">25</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">62:30</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">25</span></span>
                    <span class="timer" id="timer">62:30</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What storage model does S3 Object Lock implement to protect objects from deletion or modification?", options: ["Write-Once-Read-Many (WORM) model that prevents objects from being overwritten or deleted for a specified period", "Read-Write-Archive (RWA) model that transitions objects through lifecycle stages with increasing protection levels", "Multi-Version-Concurrent-Control (MVCC) model that maintains multiple object versions with independent protection settings", "Immutable-Storage-Class (ISC) model that applies deletion protection based on the object's current storage tier"], correct: 0, explanation: "S3 Object Lock uses a Write-Once-Read-Many (WORM) model to protect objects. Once locked, objects cannot be deleted or overwritten for the specified retention period or until legal holds are removed. This model is commonly required for regulatory compliance (SEC 17a-4, FINRA, CFTC).", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 2, question: "Which prerequisite must be enabled on an S3 bucket before you can use Object Lock?", options: ["S3 Transfer Acceleration must be enabled to support the Object Lock API operations and metadata storage", "S3 Versioning must be enabled because Object Lock protects specific object versions, not just object keys", "S3 Lifecycle policies must be configured to manage the retention periods and deletion of expired locked objects", "S3 Intelligent-Tiering must be enabled to automatically optimize storage costs for long-term locked objects"], correct: 1, explanation: "S3 Object Lock requires S3 Versioning to be enabled on the bucket. Object Lock works by protecting specific object versions - when you lock an object, Amazon S3 stores the lock metadata with that version. You cannot enable Object Lock without versioning.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 3, question: "What are the two mechanisms S3 Object Lock provides for managing object retention?", options: ["Compliance locks that prevent all deletions and Audit locks that log all access attempts to objects", "Retention periods that specify a fixed time duration and Legal holds that remain until explicitly removed", "Time-based policies that use lifecycle rules and Event-based policies that trigger on specific CloudTrail events", "Mandatory locks applied at bucket level and Optional locks applied to individual object versions only"], correct: 1, explanation: "S3 Object Lock provides two mechanisms: (1) Retention periods - specify a fixed time duration for protection; (2) Legal holds - indefinite protection with no expiration until explicitly removed. An object version can have retention period, legal hold, or both simultaneously.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 4, question: "What is the difference between Compliance mode and Governance mode for S3 Object Lock retention?", options: ["Compliance mode logs all access attempts; Governance mode only logs deletion attempts and modifications", "Compliance mode cannot be overridden by any user including root; Governance mode can be bypassed with special permissions", "Compliance mode applies to all object versions automatically; Governance mode must be set on each version individually", "Compliance mode uses S3 Glacier for storage; Governance mode keeps objects in the original storage class"], correct: 1, explanation: "Compliance mode provides the strongest protection - NO user (including root) can overwrite, delete, or modify retention settings. Governance mode allows users with s3:BypassGovernanceRetention permission to override protection. Use Compliance for regulatory requirements, Governance for testing or flexible scenarios.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 5, question: "A user with s3:BypassGovernanceRetention permission wants to delete an object protected by Governance mode. What additional step is required?", options: ["They must include the x-amz-bypass-governance-retention:true header in the delete request to override the protection", "They must first move the object to a different S3 bucket that doesn't have Object Lock enabled", "They must create a support ticket with AWS to temporarily disable Object Lock on the specific object", "They must wait for the retention period to expire; the permission only allows viewing protected objects"], correct: 0, explanation: "To bypass Governance mode retention, users must have s3:BypassGovernanceRetention permission AND explicitly include the x-amz-bypass-governance-retention:true header in their API request. The S3 console automatically includes this header if you have the permission.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 6, question: "Can you disable Object Lock or suspend versioning on a bucket after Object Lock has been enabled?", options: ["Yes, but only if all objects with retention periods have expired and no legal holds are active", "No, after Object Lock is enabled on a bucket, it cannot be disabled and versioning cannot be suspended", "Yes, but you must first delete all object versions and then contact AWS Support to disable it", "No for Object Lock, but versioning can be suspended while keeping Object Lock enabled for new uploads"], correct: 1, explanation: "Once Object Lock is enabled on a bucket, you CANNOT disable Object Lock or suspend versioning for that bucket. This is a permanent decision. Plan carefully before enabling Object Lock, as it cannot be reversed.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-configure.html" },
            { id: 7, question: "What is a legal hold in S3 Object Lock and how does it differ from a retention period?", options: ["A legal hold is a time-based lock with automatic expiration; retention periods require manual removal by authorized users", "A legal hold is indefinite protection with no expiration date; retention periods have a fixed duration", "A legal hold applies to all versions of an object; retention periods apply only to the current version", "A legal hold is set at bucket level affecting all objects; retention periods are set on individual versions"], correct: 1, explanation: "A legal hold provides indefinite WORM protection with no expiration date - it remains until explicitly removed. Retention periods have fixed durations (Retain Until Date). Legal holds are independent from retention periods; an object can have both simultaneously, and removing one doesn't affect the other.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 8, question: "What happens when you upload a new version of an object that already has a protected version with Object Lock?", options: ["The upload fails because Object Lock prevents any modifications to objects with the same key name", "The new version inherits the retention settings from the existing protected version automatically for consistency", "Amazon S3 creates the new version successfully; the existing protected version maintains its lock settings independently", "The existing version's retention period is extended to match the new version's retention configuration"], correct: 2, explanation: "When you PUT a new version of an object that has a protected version, S3 creates the new version successfully. Different versions of the same object can have different retention modes and periods. The existing protected version maintains its independent lock settings.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 9, question: "How does S3 handle a simple DELETE request (without version ID) on an object protected by Object Lock?", options: ["Amazon S3 returns a 403 Forbidden error and prevents any delete marker from being created", "Amazon S3 returns 200 OK and inserts a delete marker, but the protected version remains intact", "Amazon S3 queues the delete request and processes it after the retention period expires automatically", "Amazon S3 creates a special 'pending deletion' marker that becomes active when protection expires"], correct: 1, explanation: "For a simple DELETE (no version ID) on a locked object, S3 returns 200 OK and inserts a delete marker. The protected object version remains intact. For a permanent DELETE (with version ID), S3 returns 403 Forbidden. This behavior allows lifecycle and deletion workflows to continue.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 10, question: "Can you shorten or extend the retention period of an object protected by Object Lock?", options: ["You can only extend the retention period by specifying a later Retain Until Date; shortening is never allowed", "You can both shorten and extend retention periods if you have s3:BypassGovernanceRetention permission and use Governance mode", "You cannot modify retention periods in either mode once set; you must delete and recreate the object", "You can shorten retention periods in Compliance mode but not in Governance mode for security reasons"], correct: 1, explanation: "You can ALWAYS extend retention periods (specify later Retain Until Date). You can shorten retention periods ONLY in Governance mode with s3:BypassGovernanceRetention permission and the bypass header. In Compliance mode, shortening is NEVER allowed - only the owning AWS account deletion can remove Compliance protection early.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 11, question: "What is the only way to delete an object in Compliance mode before its retention period expires?", options: ["Use the root account credentials with the s3:BypassComplianceRetention permission and force-delete flag", "Delete the entire AWS account that owns the bucket; there is no other way to remove Compliance protection", "Contact AWS Support to request emergency deletion with proper business justification and compliance approval", "Use S3 Batch Operations with a compliance override token granted by AWS Artifact for regulated workloads"], correct: 1, explanation: "The ONLY way to delete an object in Compliance mode before retention expiry is to delete the entire AWS account. This extreme measure emphasizes the strength of Compliance mode - it's designed for regulatory requirements where no user, including root, can bypass protection.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 12, question: "When you configure a default retention period on an S3 bucket, how is it applied to new objects?", options: ["The bucket setting acts as a template; Amazon S3 calculates a Retain Until Date by adding the duration to each object's creation timestamp", "The bucket setting creates a single shared expiration timestamp; all objects uploaded during that day share the same Retain Until Date", "The bucket setting requires manual application; you must use S3 Batch Operations to apply retention to each object individually", "The bucket setting applies to current objects only; new objects uploaded after configuration require explicit retention periods"], correct: 0, explanation: "When you set a default retention period on a bucket (e.g., 30 days), S3 automatically calculates a Retain Until Date for each new object by adding the duration to the object's creation timestamp. Object uploaded at 2PM gets protected until 2PM 30 days later.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 13, question: "Can an object version have both a retention period and a legal hold simultaneously?", options: ["No, you must choose either retention period or legal hold; they are mutually exclusive protection mechanisms", "Yes, an object can have both; removing one does not affect the other, providing layered protection", "Yes, but only in Governance mode; Compliance mode does not support combining retention periods with legal holds", "No, legal holds automatically override and replace any existing retention periods on the object version"], correct: 1, explanation: "Yes, an object version can have BOTH a retention period AND a legal hold. They work independently. If retention expires while legal hold is active, the object remains protected. If you remove the legal hold but retention is still active, the object remains protected. This provides layered, defense-in-depth protection.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 14, question: "Which IAM permissions are required to place or remove a legal hold on an object?", options: ["s3:PutObjectLegalHold to place a legal hold; s3:DeleteObjectLegalHold to remove a legal hold from objects", "s3:PutObjectLegalHold for both placing and removing legal holds; removal is treated as a PUT operation with OFF status", "s3:PutObjectRetention to place legal holds; s3:BypassGovernanceRetention to remove legal holds from any protected objects", "s3:ModifyObjectLock to place legal holds; s3:RemoveObjectLock combined with root account access to remove legal holds"], correct: 1, explanation: "The s3:PutObjectLegalHold permission is required for BOTH placing and removing legal holds. To place a hold, you PUT with status=ON. To remove it, you PUT with status=OFF. Legal holds can be freely placed and removed by any user with this permission.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html" },
            { id: 15, question: "Can S3 buckets with Object Lock enabled be used as destination buckets for S3 server access logs?", options: ["Yes, but only if the Object Lock retention period is less than 90 days for log rotation", "No, S3 buckets with Object Lock cannot be used as destination buckets for server access logging", "Yes, but you must use Governance mode instead of Compliance mode for the log bucket retention", "No, unless you disable the default retention period and use legal holds only for manual protection"], correct: 1, explanation: "S3 buckets with Object Lock enabled CANNOT be used as destination buckets for server access logs. This is an explicit limitation documented by AWS. You must use a separate bucket without Object Lock for receiving server access logs.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-configure.html" },
            { id: 16, question: "When replicating objects with S3 Object Lock to another bucket, what requirement exists for the destination bucket?", options: ["The destination bucket must have Object Lock disabled to prevent conflicts with replication metadata timestamps", "The destination bucket must have Object Lock enabled; S3 replicates the retention metadata from source objects", "The destination bucket must use Governance mode only; Compliance mode is not supported for replication scenarios", "The destination bucket must be in the same AWS Region as the source to preserve retention timestamps"], correct: 1, explanation: "When replicating locked objects, the destination bucket MUST have Object Lock enabled. S3 replicates the retention mode, retention period, and legal hold status from source objects. If an object is uploaded directly to the destination (not via replication), it uses the destination bucket's Object Lock configuration.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-managing.html" },
            { id: 17, question: "What is the purpose of Amazon Glacier Vault Lock?", options: ["To encrypt data at rest in Glacier vaults using AWS KMS customer managed keys with strict access controls", "To enforce compliance controls and data retention policies via a lockable IAM policy on individual Glacier vaults", "To enable cross-region replication of Glacier archives while maintaining chain of custody for audit compliance", "To configure automated lifecycle transitions from S3 Standard to Glacier with mandatory minimum retention durations"], correct: 1, explanation: "Glacier Vault Lock deploys and enforces compliance controls for individual Glacier vaults using a Vault Lock policy (IAM policy syntax). Once locked, the policy cannot be changed or deleted, providing strong enforcement for compliance requirements like WORM and data retention rules.", docLink: "https://docs.aws.amazon.com/amazonglacier/latest/dev/vault-lock.html" },
            { id: 18, question: "How does a Glacier Vault Lock policy differ from a vault access policy?", options: ["Vault Lock policies can be locked and cannot be changed after locking; vault access policies are temporary and modifiable", "Vault Lock policies control encryption settings; vault access policies control IAM permissions for archive operations", "Vault Lock policies apply to individual archives; vault access policies apply to the entire vault and all contents", "Vault Lock policies require AWS Organizations integration; vault access policies work with standalone AWS accounts only"], correct: 0, explanation: "Vault Lock policies can be LOCKED to prevent future changes, providing strong enforcement for compliance. Vault access policies are not compliance-related, remain modifiable, and handle temporary access controls. Both can work together - use Vault Lock for compliance (deny deletes) and vault access for operational needs (grant reads).", docLink: "https://docs.aws.amazon.com/amazonglacier/latest/dev/vault-lock.html" },
            { id: 19, question: "What is the two-step process for locking an Amazon Glacier vault?", options: ["First enable vault encryption, then attach the Vault Lock policy and confirm it within 7 days", "First initiate the lock with a policy (creates 24-hour in-progress state), then complete the lock using the lock ID", "First create a vault access policy, then convert it to a Vault Lock policy using the promote-policy API", "First enable Vault Lock on the vault, then upload archives and set retention rules within 48 hours"], correct: 1, explanation: "Vault locking has 2 steps: (1) Initiate the lock by attaching a Vault Lock policy - this creates an 'in-progress' state with a lock ID valid for 24 hours. (2) Use the lock ID to complete the lock within 24 hours. You can abort and restart if needed during the 24-hour window.", docLink: "https://docs.aws.amazon.com/amazonglacier/latest/dev/vault-lock.html" },
            { id: 20, question: "How long do you have to validate and test a Glacier Vault Lock policy before it must be finalized?", options: ["24 hours from the initiate-vault-lock operation; the lock ID expires if not completed within this window", "7 days from policy attachment; AWS automatically completes the lock if not explicitly aborted within this period", "48 hours from the test-vault-lock API call; you must run compliance validation before the deadline expires", "30 days from policy creation; AWS sends reminder notifications at 7, 14, and 21 days before expiration"], correct: 0, explanation: "You have 24 hours after initiating the vault lock to validate your Vault Lock policy. During this 'in-progress' state, you can test the policy effects. You must complete the lock within 24 hours or the lock ID expires and the policy is deleted. You can abort and restart if the policy doesn't work as expected.", docLink: "https://docs.aws.amazon.com/amazonglacier/latest/dev/vault-lock.html" },
            { id: 21, question: "Can you modify or delete a Glacier Vault Lock policy after it has been completed (locked)?", options: ["Yes, but only with root account credentials and by providing a compliance justification to AWS Support", "No, after a Vault Lock policy is locked, it cannot be changed or deleted by anyone", "Yes, but you must first abort the existing lock and wait 30 days before creating a new policy", "No for modifications, but you can delete the policy if the vault contains no archives with active retention"], correct: 1, explanation: "After a Vault Lock policy is locked (completed), it CANNOT be changed or deleted. This is the core value of Vault Lock - immutable compliance enforcement. The only way to remove a locked policy is to delete the entire vault (which requires all archives to be deleted first).", docLink: "https://docs.aws.amazon.com/amazonglacier/latest/dev/vault-lock.html" },
            { id: 22, question: "When should you upload archives to a Glacier vault relative to completing the Vault Lock process?", options: ["Upload archives first, then initiate Vault Lock to ensure existing data is immediately protected by the policy", "Complete the Vault Lock policy first, then upload archives so the policy applies to all uploaded content", "Upload archives during the 24-hour in-progress state while testing the policy to verify it works correctly", "Timing doesn't matter; Vault Lock policies apply retroactively to all archives regardless of upload sequence"], correct: 1, explanation: "AWS recommends: (1) Create vault, (2) Complete Vault Lock policy, (3) THEN upload archives. This ensures all archives are subject to the locked policy from the moment they're uploaded. While you can upload before locking, completing the lock first is best practice for compliance scenarios.", docLink: "https://docs.aws.amazon.com/amazonglacier/latest/dev/vault-lock.html" },
            { id: 23, question: "What IAM condition key can you use to limit the retention period range for S3 Object Lock in a bucket policy?", options: ["s3:object-lock-retention-range to specify minimum and maximum allowable retention periods in days or years", "s3:object-lock-remaining-retention-days to restrict the minimum and maximum retention periods users can set", "s3:max-retention-period and s3:min-retention-period as separate condition keys for upper and lower bounds", "s3:retention-period-limit combined with NumericLessThan and NumericGreaterThan condition operators"], correct: 1, explanation: "The s3:object-lock-remaining-retention-days condition key allows you to set minimum and maximum allowable retention periods in bucket policies. For example, you can require retention between 1 and 365 days, preventing users from setting 10-year retention or no retention on sensitive objects.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-managing.html" },
            { id: 24, question: "How does Object Lock interact with S3 Lifecycle policies on locked objects?", options: ["Lifecycle policies cannot transition or expire objects protected by Object Lock until retention expires or legal holds are removed", "Lifecycle policies automatically override Object Lock settings to optimize storage costs and manage data lifecycle efficiently", "Lifecycle policies work normally but create pending transition jobs that execute immediately when Object Lock protection expires", "Lifecycle policies can transition locked objects to Glacier storage classes but cannot expire them until protection ends"], correct: 0, explanation: "Lifecycle policies CANNOT expire objects protected by Object Lock retention or legal holds. However, lifecycle rules CAN transition locked objects to different storage classes (e.g., S3 Standard to Glacier). Expiration actions are blocked until retention expires and legal holds are removed.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-managing.html" },
            { id: 25, question: "Which S3 Inventory fields help you identify Object Lock configuration for objects in a bucket?", options: ["ObjectLockRetentionMode, ObjectLockRetainUntilDate, and ObjectLockLegalHoldStatus fields provide complete lock information for each object version", "ObjectProtectionLevel, ObjectRetentionDuration, and ObjectComplianceStatus fields indicate the lock configuration and remaining time", "ObjectLockEnabled, ObjectVersionProtected, and ObjectRetentionExpiry fields show whether objects have active lock settings", "ObjectWORMMode, ObjectLockTimestamp, and ObjectLegalStatus fields report the lock type and protection end date"], correct: 0, explanation: "S3 Inventory reports Object Lock information using three fields: (1) ObjectLockRetentionMode (GOVERNANCE or COMPLIANCE), (2) ObjectLockRetainUntilDate (expiration timestamp), and (3) ObjectLockLegalHoldStatus (ON or OFF). These fields help you audit and manage locked objects across your buckets.", docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock-managing.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Object Lock</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>