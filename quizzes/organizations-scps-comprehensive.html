<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Organizations & SCPs Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #8b5cf6; --accent-secondary: #a78bfa; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(139, 92, 246, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(139, 92, 246, 0.2); box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.25), inset 0 0 12px rgba(139, 92, 246, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(139, 92, 246, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(139, 92, 246, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; margin-top: 1rem; }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(139, 92, 246, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(139, 92, 246, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(139, 92, 246, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(139, 92, 246, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown, .btn-group { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 4: Identity & Access Management (20%)</span>
            <h1>AWS Organizations & SCPs</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group" id="resultsButtons">
                <button class="btn btn-primary" id="reviewBtn" onclick="showReview()" style="display: none;">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 15%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="review-status">
                <p class="results-details">Reviewed: <span id="reviewedCount">0</span> / <span id="totalReviewCount">0</span> questions</p>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="backToResults()">‚Üê Back to Results</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "A security team needs to ensure that no IAM policies in member accounts can grant permissions to launch EC2 instances in unapproved regions. Which approach accomplishes this?", options: ["Create an IAM permission boundary policy and attach it to all IAM users and roles across member accounts", "Create a Service Control Policy (SCP) that denies ec2:RunInstances when aws:RequestedRegion is not in the approved list", "Create an AWS Config rule that detects EC2 instances in unapproved regions and triggers auto-remediation", "Create a resource-based policy on EC2 that restricts which principals can call RunInstances"], correct: 1, explanation: "SCPs define the maximum permissions for accounts in your organization. An SCP can deny ec2:RunInstances for unapproved regions, and this restriction cannot be overridden by any IAM policy in member accounts. SCPs are the only way to enforce guardrails organization-wide.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 2, question: "An administrator attaches an SCP to the organization root that denies s3:DeleteBucket. The management account administrator then tries to delete a bucket in the management account. What happens?", options: ["The deletion is blocked because SCPs attached to root apply to all accounts including management", "The deletion succeeds because SCPs do not affect principals in the management account", "The deletion fails with an access denied error but only for non-admin IAM users", "The deletion is queued for approval by the AWS Organizations service"], correct: 1, explanation: "SCPs do NOT affect the management account (formerly master account). Even if you attach SCPs to the root or directly to the management account, they have no effect on any principals in that account. This is by design to prevent lockout.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 3, question: "A company moves Account-A from the Development OU to the Production OU. The Development OU allows all regions while the Production OU only allows us-east-1 and eu-west-1. What happens to Account-A's effective permissions?", options: ["Account-A retains Development OU permissions until SCPs are manually detached and reattached", "Account-A immediately inherits Production OU SCPs and can only operate in us-east-1 and eu-west-1", "Account-A has combined permissions from both OUs until the next SCP evaluation cycle (24 hours)", "Account-A's SCPs remain unchanged; OU moves only affect billing, not permissions"], correct: 1, explanation: "When you move an account to a different OU, it immediately inherits the SCPs attached to the new OU (and its parent OUs up to root). The SCPs from the old OU no longer apply. This change is immediate with no transition period.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 4, question: "A new AWS Organization is created. Before any customization, what SCP is attached to the organization root?", options: ["DenyAllAccess - an implicit deny policy that blocks all actions until explicitly allowed", "FullAWSAccess - an allow all policy that permits all actions on all resources", "AWSOrganizationsServiceControlPolicy - a managed policy with recommended guardrails", "No SCP is attached by default; organizations start with implicit allow"], correct: 1, explanation: "By default, AWS Organizations attaches the 'FullAWSAccess' SCP to the root, all OUs, and all accounts. This SCP allows all actions on all resources (*/*). You can replace it with more restrictive SCPs to implement guardrails.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 5, question: "An account is in an OU with an SCP allowing only S3 and EC2 actions. The OU is nested under a parent OU that allows only S3 and Lambda. What actions can the account perform?", options: ["S3, EC2, and Lambda - the union of both OU policies applies to maximize permissions", "Only S3 - the intersection of both SCPs results in only commonly allowed services", "EC2 and Lambda - child OU permissions override parent OU restrictions", "All AWS actions - nested OUs automatically get FullAWSAccess to prevent lockout"], correct: 1, explanation: "SCPs are inherited and the effective permissions are the INTERSECTION of all SCPs from root down through all parent OUs. An action must be allowed by ALL SCPs in the hierarchy. Here, only S3 is allowed by both.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 6, question: "A security engineer needs to apply SCPs to restrict actions for a specific IAM role called SecurityAudit. Where can SCPs be attached?", options: ["Directly to the SecurityAudit IAM role in each member account for targeted restriction", "Only to the organization root, organizational units (OUs), and individual AWS accounts", "To IAM policies that are then linked to SCPs for combined evaluation", "To AWS Config rules that enforce SCP compliance for specific principals"], correct: 1, explanation: "SCPs can only be attached to the organization root, organizational units (OUs), and individual AWS accounts. They cannot be attached to IAM users, roles, or groups - SCPs affect all principals within the attached scope.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 7, question: "A company must ensure that resources can only be created in eu-west-1 and eu-central-1 to meet GDPR requirements. Which SCP condition key should be used?", options: ["aws:SourceRegion to validate the region from which the API call originates", "aws:RequestedRegion to deny actions when the target region is not in the approved list", "aws:ResourceRegion to check the region where the resource will be created", "aws:PrincipalOrgPaths to restrict access based on organizational unit location"], correct: 1, explanation: "aws:RequestedRegion is the correct condition key for restricting which regions can be used for actions. It checks the target region specified in the API call. This is commonly used in SCPs to enforce data residency requirements.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html" },
            { id: 8, question: "An IAM policy grants s3:* to a user. An SCP attached to the account denies s3:DeleteObject. What happens when the user tries to delete an S3 object?", options: ["The action succeeds because IAM policies are evaluated after SCPs and can override denies", "The action is denied because SCPs set maximum permissions that IAM policies cannot exceed", "The action results in a conflict error requiring manual resolution by an administrator", "The action succeeds but is logged as a policy violation for later remediation"], correct: 1, explanation: "SCPs act as permission boundaries. For an action to be allowed, it must be permitted by both the SCP AND the IAM policy. Even though IAM allows s3:*, the SCP deny for s3:DeleteObject takes precedence. SCPs set the maximum possible permissions.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 9, question: "A company wants to maintain the default FullAWSAccess SCP but block specific dangerous actions like deleting CloudTrail trails. Which SCP strategy is this?", options: ["Allowlist strategy - where only explicitly permitted actions are allowed and all others denied", "Denylist strategy - where all actions are allowed except those explicitly denied", "Layered strategy - where SCPs are stacked with increasing restrictions at each OU level", "Conditional strategy - where actions are allowed or denied based on resource tags"], correct: 1, explanation: "The denylist strategy keeps the default FullAWSAccess SCP and adds SCPs with explicit deny statements for specific actions you want to block. This is simpler to implement but requires anticipating and blocking unwanted actions.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_strategies.html" },
            { id: 10, question: "An organization was created with consolidated billing only. The security team wants to implement SCPs. What must be done first?", options: ["Create at least three member accounts before SCP functionality becomes available", "Enable all features in the organization through the AWS Organizations console or API", "Purchase AWS Business or Enterprise Support to unlock governance features", "Contact AWS Support to migrate the organization to a governance-enabled type"], correct: 1, explanation: "To use SCPs, you must enable all features in your AWS Organization. Organizations created with consolidated billing only cannot use SCPs. You can upgrade from consolidated billing to all features (with member account consent), but cannot downgrade.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_support-all-features.html" },
            { id: 11, question: "A security engineer is writing an SCP and receives an error that the policy exceeds the maximum size. What is the SCP size limit?", options: ["2,048 characters including whitespace, matching the IAM inline policy limit", "5,120 characters including whitespace, smaller than managed IAM policies", "10,240 characters including whitespace, the same as IAM managed policies", "20,480 characters including whitespace, doubled for organization-wide policies"], correct: 1, explanation: "SCPs have a maximum size of 5,120 characters (including whitespace). This is smaller than IAM managed policies (6,144 characters). If your SCP exceeds this limit, you need to optimize it or split restrictions across multiple SCPs.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_reference_limits.html" },
            { id: 12, question: "A company wants to prevent external AWS accounts from accessing their S3 buckets across the entire organization. Which policy type should they use?", options: ["Service Control Policies (SCPs) with conditions blocking cross-account access attempts", "Resource Control Policies (RCPs) that restrict resource access based on principal organization", "Tag policies that require organization-specific tags on all S3 bucket policies", "Backup policies that enforce encryption and access logging on all S3 resources"], correct: 1, explanation: "Resource Control Policies (RCPs) control access to resources in your organization, complementing SCPs which control what principals can do. RCPs can restrict external access to resources like S3 buckets across your entire organization.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" },
            { id: 13, question: "A monitoring tool needs to retrieve information about the organization's structure and enabled policy types. Which permission does it need?", options: ["organizations:ListAccounts to enumerate all member accounts and their status", "organizations:DescribeOrganization to view organization structure and feature information", "organizations:DescribeOrganizationalUnit to read OU hierarchy and attached policies", "organizations:ListPolicies to retrieve all SCPs and their attachment points"], correct: 1, explanation: "organizations:DescribeOrganization allows viewing information about the organization, including the management account ID, available policy types, enabled features, and organization ARN. It's the primary read permission for organization metadata.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_permissions_overview.html" },
            { id: 14, question: "Management wants to ensure that member accounts cannot remove themselves from the organization. How can this be enforced?", options: ["Configure the organization with 'mandatory membership' mode in AWS Organizations settings", "Create an SCP that denies the organizations:LeaveOrganization action for all principals", "Enable organization lock in the billing console to prevent account departures", "Set each account's departure policy to 'requires-approval' in the account settings"], correct: 1, explanation: "You can use an SCP to deny organizations:LeaveOrganization, preventing accounts from leaving. Note that the management account can still remove accounts (since SCPs don't affect it). This is a common security guardrail.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html" },
            { id: 15, question: "A company wants to ensure consistent tagging standards across their organization, such as requiring 'CostCenter' tags on all resources. Which policy type helps achieve this?", options: ["Service Control Policies (SCPs) that deny resource creation when required tags are missing", "Tag policies that define allowed tag keys, values, and enforce compliance reporting", "Resource policies that require specific tags in the Principal condition", "Config rules that detect and auto-remediate non-compliant tag configurations"], correct: 1, explanation: "Tag policies help standardize tags across resources in your organization. They define allowed values for tag keys, enforce case sensitivity, and report non-compliance. Unlike SCPs, tag policies focus specifically on tagging standards.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_tag-policies.html" },
            { id: 16, question: "A company needs to share a Transit Gateway with all accounts in their organization without manually updating sharing for each new account. Which feature enables this?", options: ["Service Control Policies that automatically grant tgw:* permissions to member accounts", "AWS Resource Access Manager (RAM) with organization-wide sharing enabled", "VPC peering with automatic acceptance policies configured at the organization level", "Transit Gateway service-linked roles that propagate across all organization accounts"], correct: 1, explanation: "AWS Resource Access Manager (RAM) integrates with Organizations to share resources (like Transit Gateways, subnets, License Manager configurations) across accounts. With organization sharing, new accounts automatically get access to shared resources.", docLink: "https://docs.aws.amazon.com/ram/latest/userguide/getting-started-sharing.html" },
            { id: 17, question: "A company wants a security account to manage Security Hub across the organization without using the management account. What should they configure?", options: ["Cross-account IAM roles that allow the security account to assume admin privileges in all accounts", "A delegated administrator for Security Hub, giving the security account organizational management capabilities", "An SCP that grants security-hub:* permissions exclusively to the security account", "A service-linked role for Security Hub with trust policy allowing the security account"], correct: 1, explanation: "A delegated administrator is a member account designated to manage specific AWS services for the organization. For Security Hub, GuardDuty, and other services, this allows centralized management without using the management account directly.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_integrate_services_delegated_admin.html" },
            { id: 18, question: "An account is being decommissioned and removed from the organization. What happens to the resources in that account?", options: ["All resources are automatically deleted as part of the organization removal process", "The account becomes standalone, retaining its resources but losing organizational benefits", "Resources are moved to the organization's archive account for 90-day retention", "The account is suspended and resources become read-only pending final deletion"], correct: 1, explanation: "When you remove an account from an organization, it becomes a standalone AWS account. It retains all resources but loses organizational benefits like SCPs, consolidated billing, shared resources, and service integrations.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_remove.html" },
            { id: 19, question: "A company wants to prevent anyone from using root credentials in member accounts. Which SCP condition accomplishes this?", options: ["Deny all actions where aws:PrincipalType equals 'Root' to block root user API calls", "Deny all actions where iam:RootUser equals 'true' to prevent root authentication", "Deny sts:GetSessionToken where aws:SourceIdentity equals 'root' to block root sessions", "Deny iam:* where aws:PrincipalArn contains ':root' to block root IAM operations"], correct: 0, explanation: "The condition 'aws:PrincipalType': 'Root' identifies when the root user is making the API call. An SCP denying all actions with this condition prevents root credential usage in member accounts. The management account root is unaffected (SCPs don't apply there).", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html" },
            { id: 20, question: "A company needs to enforce consistent backup schedules across all member accounts without requiring each account to configure backups individually. Which policy type should they use?", options: ["Service Control Policies that require backup:CreateBackupPlan before resource creation", "Backup policies that centrally define AWS Backup plans automatically applied to member accounts", "Tag policies that require backup-related tags triggering automated backup configuration", "Resource policies on AWS Backup vaults that allow cross-account backup operations"], correct: 1, explanation: "Backup policies let you centrally create and apply AWS Backup plans across your organization. You define backup schedules, retention periods, and copy rules in the policy, and they automatically apply to tagged resources in member accounts.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_backup.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Organizations & SCPs</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; if (currentMode === 'exam') document.getElementById('reviewBtn').style.display = 'inline-block'; else document.getElementById('reviewBtn').style.display = 'none'; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
        function showReview() { const letters = ['A','B','C','D'], tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = ''; shuffledQuestions.forEach((q, idx) => { const userAns = userAnswers[idx] !== null && userAnswers[idx] !== undefined ? userAnswers[idx] : -1, isCorrect = userAns === q.correct, rowClass = reviewedQuestions.includes(idx) ? 'reviewed' : ''; let row = '<tr class="' + rowClass + '" onclick="reviewQuestion(' + idx + ')">'; row += '<td class="review-q-num">' + (idx + 1) + '</td>'; row += '<td class="review-q-text">' + q.question.substring(0, 100) + (q.question.length > 100 ? '...' : '') + '</td>'; row += '<td class="review-answer ' + (userAns >= 0 ? (isCorrect ? 'correct' : 'incorrect') : '') + '">' + (userAns >= 0 ? letters[userAns] : '‚Äî') + '</td>'; row += '<td class="review-answer correct">' + letters[q.correct] + '</td>'; row += '<td>' + (isCorrect ? '<span style="color:var(--success)">‚úì Correct</span>' : '<span style="color:var(--error)">‚úó Incorrect</span>') + '</td>'; row += '</tr>'; tbody.innerHTML += row; }); document.getElementById('totalReviewCount').textContent = shuffledQuestions.length; document.getElementById('reviewedCount').textContent = reviewedQuestions.length; document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); document.getElementById('reviewedCount').textContent = reviewedQuestions.length; } currentQuestion = qIndex; inReviewMode = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('backToReviewBtn').style.display = 'inline-block'; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; document.getElementById('reviewSection').classList.add('show'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); }
    </script>
</body>
</html>
