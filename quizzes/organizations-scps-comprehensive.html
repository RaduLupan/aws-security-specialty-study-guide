<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Organizations & SCPs Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #8b5cf6; --accent-secondary: #a78bfa; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(139, 92, 246, 0.1); }
        .option.selected { border-color: var(--accent-primary); background: rgba(139, 92, 246, 0.15); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(139, 92, 246, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(139, 92, 246, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 4: Identity & Access Management (20%)</span>
            <h1>AWS Organizations & SCPs</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is the primary purpose of Service Control Policies (SCPs)?", options: ["To grant permissions to IAM users", "To set maximum permission boundaries for accounts in an organization", "To replace IAM policies", "To manage AWS service quotas"], correct: 1, explanation: "SCPs define the maximum permissions for accounts in your organization. They don't grant permissions - they only restrict what IAM policies can grant. Think of them as guardrails that limit the maximum possible permissions in an account.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 2, question: "Do SCPs affect the management (master) account of an AWS Organization?", options: ["Yes, SCPs apply to all accounts equally", "No, SCPs never affect the management account", "Only if explicitly attached to the management account", "Only for non-administrator users in the management account"], correct: 1, explanation: "SCPs do NOT affect the management account (formerly master account). Even if you attach SCPs to the root or directly to the management account, they have no effect on principals in that account. This is a key exam concept.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 3, question: "What happens when an account is moved from one OU to another with different SCPs?", options: ["The account keeps its old SCPs", "The account immediately inherits the new OU's SCPs", "Both old and new SCPs apply", "SCPs must be manually reassigned"], correct: 1, explanation: "When you move an account to a different OU, it immediately inherits the SCPs attached to the new OU (and its parent OUs up to root). The SCPs from the old OU no longer apply. This change is immediate with no transition period.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 4, question: "What is the default SCP attached to the organization root?", options: ["DenyAllAccess - blocks everything", "AllowAllAccess - allows full AWS access", "No default policy exists", "ReadOnlyAccess - allows read operations only"], correct: 1, explanation: "By default, AWS Organizations attaches 'FullAWSAccess' SCP to the root, all OUs, and all accounts. This SCP allows all actions on all resources. You can replace it with more restrictive SCPs to implement guardrails.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 5, question: "How are SCPs inherited in an organization hierarchy?", options: ["Only direct attachments apply, no inheritance", "Child OUs inherit SCPs from all parent OUs up to root", "Only the most restrictive SCP applies", "SCPs are inherited but can be overridden"], correct: 1, explanation: "SCPs are inherited. An account's effective permissions are the intersection of all SCPs from root down through all parent OUs to the account itself. An action must be allowed by all SCPs in the hierarchy to be permitted.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 6, question: "Which entity type can have SCPs attached to it?", options: ["IAM users and roles", "AWS accounts and OUs only", "VPCs and subnets", "Individual AWS services"], correct: 1, explanation: "SCPs can only be attached to the organization root, organizational units (OUs), and individual AWS accounts. They cannot be attached to IAM users, roles, or groups - those entities use IAM policies.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 7, question: "What is a common use case for the 'aws:RequestedRegion' condition in SCPs?", options: ["To route traffic to specific regions", "To deny actions in unauthorized AWS regions", "To replicate data across regions", "To monitor regional latency"], correct: 1, explanation: "aws:RequestedRegion is commonly used in SCPs to deny all actions (or specific actions) in regions you don't want to use. This helps enforce data residency requirements and reduces attack surface by limiting where resources can be created.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html" },
            { id: 8, question: "What happens if an SCP denies an action but an IAM policy allows it?", options: ["The IAM policy takes precedence", "The SCP deny wins - action is denied", "The most recent policy wins", "A conflict error is returned"], correct: 1, explanation: "SCPs act as permission boundaries. For an action to be allowed, it must be permitted by both the SCP AND the IAM policy. If an SCP denies an action, no IAM policy can override it. SCPs set the maximum possible permissions.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html" },
            { id: 9, question: "Which SCP strategy uses a FullAWSAccess SCP plus explicit deny statements?", options: ["Allowlist strategy", "Denylist strategy", "Mixed strategy", "Implicit strategy"], correct: 1, explanation: "The denylist strategy keeps the default FullAWSAccess SCP and adds SCPs with explicit deny statements for actions you want to block. This is simpler to implement but requires you to anticipate and block unwanted actions.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_strategies.html" },
            { id: 10, question: "What is required before you can use SCPs in an AWS Organization?", options: ["Enable consolidated billing only", "Enable all features in the organization", "Create at least 5 member accounts", "Purchase AWS Enterprise Support"], correct: 1, explanation: "To use SCPs, you must enable all features in your AWS Organization. Organizations created with consolidated billing only cannot use SCPs. You can upgrade from consolidated billing to all features, but cannot downgrade.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_support-all-features.html" },
            { id: 11, question: "What is the maximum size of an SCP?", options: ["2,048 characters", "5,120 characters", "10,240 characters", "20,480 characters"], correct: 1, explanation: "SCPs have a maximum size of 5,120 characters (including whitespace). This is smaller than IAM policies. If your SCP exceeds this limit, you need to optimize it or split restrictions across multiple SCPs.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_reference_limits.html" },
            { id: 12, question: "Which statement about Resource Control Policies (RCPs) is true?", options: ["They replace SCPs entirely", "They control access to resources rather than principals", "They only work with S3 buckets", "They are only available in GovCloud"], correct: 1, explanation: "Resource Control Policies (RCPs) are a newer policy type that control access to resources in your organization, complementing SCPs which control principals. RCPs can restrict external access to resources across your organization.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_rcps.html" },
            { id: 13, question: "What is the purpose of the 'organizations:DescribeOrganization' permission?", options: ["To create new organizations", "To view information about the organization structure", "To delete member accounts", "To attach SCPs"], correct: 1, explanation: "organizations:DescribeOrganization allows viewing information about the organization, such as the master account ID, available policy types, and feature set. It's a read-only permission commonly needed for monitoring and compliance tools.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_permissions_overview.html" },
            { id: 14, question: "How can you prevent member accounts from leaving an organization?", options: ["It's not possible - accounts can always leave", "Use an SCP to deny organizations:LeaveOrganization", "Enable consolidated billing lock", "Set account status to 'locked'"], correct: 1, explanation: "You can use an SCP to deny the organizations:LeaveOrganization action, preventing accounts from leaving the organization. However, the management account can still remove accounts. This is important for maintaining organizational control.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html" },
            { id: 15, question: "What is AWS Organizations Tag Policy used for?", options: ["To automatically tag resources", "To standardize tags across member accounts", "To encrypt tagged resources", "To delete untagged resources"], correct: 1, explanation: "Tag policies help standardize tags across resources in your organization. They define allowed values for tag keys and can enforce case sensitivity. Non-compliant tags are reported but not automatically corrected.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_tag-policies.html" },
            { id: 16, question: "Which Organizations feature helps you share resources across accounts?", options: ["SCPs", "AWS Resource Access Manager (RAM) integration", "Consolidated billing", "Tag policies"], correct: 1, explanation: "AWS Resource Access Manager (RAM) integrates with Organizations to share resources (like Transit Gateways, subnets, License Manager configurations) across accounts. Organizations provides trusted access for RAM to share within your organization.", docLink: "https://docs.aws.amazon.com/ram/latest/userguide/getting-started-sharing.html" },
            { id: 17, question: "What is a delegated administrator in AWS Organizations?", options: ["A member account granted admin access to the management account", "A member account that can manage specific AWS services for the organization", "The backup management account", "An external auditor account"], correct: 1, explanation: "A delegated administrator is a member account that you designate to manage certain AWS services on behalf of your organization. For example, you can delegate Security Hub or GuardDuty administration without giving access to the management account.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_integrate_services_delegated_admin.html" },
            { id: 18, question: "What happens when you remove an account from an organization?", options: ["The account is deleted", "The account becomes a standalone account", "All resources in the account are deleted", "The account is suspended for 90 days"], correct: 1, explanation: "When you remove an account from an organization, it becomes a standalone AWS account. The account retains its resources but loses organizational benefits like SCPs, consolidated billing, and shared resources. The account needs its own payment method.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_remove.html" },
            { id: 19, question: "Which SCP example prevents root user access to resources?", options: ["Deny all actions where aws:PrincipalType equals 'Root'", "Deny all actions where iam:UserType equals 'Root'", "Deny sts:AssumeRoot action", "Root access cannot be restricted by SCPs"], correct: 0, explanation: "You can create an SCP that denies all actions when the principal is the root user using the condition 'aws:PrincipalType': 'Root'. This prevents use of root credentials in member accounts while still allowing the management account root (since SCPs don't affect it).", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps_examples.html" },
            { id: 20, question: "What is the purpose of Backup policies in AWS Organizations?", options: ["To backup the organization structure", "To centrally manage AWS Backup plans across member accounts", "To backup SCPs", "To create account snapshots"], correct: 1, explanation: "Backup policies let you centrally create and apply AWS Backup plans across your organization. You can define backup schedules, retention periods, and copy rules that automatically apply to resources in member accounts.", docLink: "https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_backup.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && ans !== null) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${ans !== null ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Organizations & SCPs</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && ans === null ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && userAnswers[currentQuestion] !== null) return; userAnswers[currentQuestion] = i; if (currentMode === 'exam') renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
