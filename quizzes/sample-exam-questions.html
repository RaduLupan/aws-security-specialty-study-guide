<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sample Exam Questions | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #f59e0b; --accent-secondary: #fbbf24; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: #0a0e17; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .multi-select-note { font-size: 0.875rem; color: var(--warning); margin-bottom: 1rem; padding: 0.5rem 1rem; background: rgba(234, 179, 8, 0.1); border-radius: 6px; border-left: 3px solid var(--warning); }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(245, 158, 11, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(245, 158, 11, 0.2); box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.25), inset 0 0 12px rgba(245, 158, 11, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: #0a0e17; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: #0a0e17; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(245, 158, 11, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        .source-note { text-align: center; margin-top: 1rem; padding: 0.75rem; background: var(--bg-tertiary); border-radius: 8px; font-size: 0.75rem; color: var(--text-secondary); }
        .source-note a { color: var(--accent-primary); text-decoration: none; }
        .source-note a:hover { text-decoration: underline; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Practice Exam</span>
            <h1>Sample Exam Questions</h1>
            <p class="subtitle">AWS Certified Security - Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">10</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">25:00</div><div class="stat-label">Exam Time</div></div>
            </div>
            <div class="source-note">Questions sourced from <a href="https://www.vmexam.com/aws/aws-scs-c03-certification-exam-sample-questions" target="_blank">VMExam</a></div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">10</span></span>
                    <span class="timer" id="timer">25:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            {
                id: 1,
                question: "A company is running workloads on AWS. The company wants to protect these workloads to be compliant with the Payment Card Industry Data Security Standard (PCI-DSS). A security engineer needs to design a solution that enables encryption on Amazon-based storage, utilizes secure HTTPS endpoints, and encrypts data sent from the client to the web servers. Which combination of steps should the security engineer take to meet these requirements?",
                options: [
                    "Enable encryption on Amazon S3 and use S3 bucket policies to enforce HTTPS connections",
                    "Store database credentials in AWS Secrets Manager and configure automatic rotation",
                    "Provision certificates from AWS Certificate Manager (ACM) and deploy them to the appropriate resources",
                    "Enable Amazon CloudFront origin access identity (OAI) to encrypt traffic from the origin",
                    "Deploy Lambda@Edge to enforce HTTPS connections to Amazon CloudFront"
                ],
                correct: [0, 2, 4],
                multiSelect: true,
                explanation: "For PCI-DSS compliance: (1) Enable S3 encryption and enforce HTTPS via bucket policies, (2) Use ACM certificates for HTTPS endpoints, and (3) Lambda@Edge can enforce HTTPS connections to CloudFront. Secrets Manager is useful but not directly related to encryption in transit/at rest for this scenario.",
                docLink: "https://docs.aws.amazon.com/whitepapers/latest/pci-dss-scoping-on-aws/encryption.html"
            },
            {
                id: 2,
                question: "A company has deployed a custom logging solution on AWS using Amazon Kinesis Data Firehose to ingest Amazon CloudWatch Logs. The company also uses Amazon DynamoDB for persistence of the logs. The company is looking for a more streamlined approach for ingesting, analyzing, and displaying logs. A security engineer must recommend a solution that provides log analysis and the ability to display results in a dashboard. The engineer also needs to ensure sensitive data logs remain encrypted within the logging solution. What should the security engineer recommend to address these requirements?",
                options: [
                    "Use Amazon Kinesis Data Firehose to deliver logs directly to Amazon Redshift. Use Amazon QuickSight to analyze and display log data.",
                    "Use subscription filters to deliver logs directly to Amazon OpenSearch Service. Use OpenSearch Dashboards to analyze and display log data.",
                    "Use an AWS Lambda function to deliver logs directly to Amazon S3 and encrypt the data. Use Amazon Athena to analyze and Amazon QuickSight to display log data.",
                    "Add logic to the application that saves sensitive data logs on the Amazon EC2 instances' local storage, and write a batch script that logs into the Amazon EC2 instances and moves sensitive logs to a secure location."
                ],
                correct: [1],
                multiSelect: false,
                explanation: "Amazon OpenSearch Service (formerly Elasticsearch) with subscription filters provides a streamlined approach for log ingestion, analysis, and visualization through OpenSearch Dashboards. It supports encryption at rest and in transit, meeting the security requirements.",
                docLink: "https://docs.aws.amazon.com/opensearch-service/latest/developerguide/what-is.html"
            },
            {
                id: 3,
                question: "A company is hosting a web application on AWS and is using an Amazon S3 bucket to store images. Users should have the ability to read objects in the bucket. A Security Engineer has written a bucket policy to grant public read access. Attempts to read an object, however, receive the error: 'Action does not apply to any resource(s) in statement.' What should the Engineer do to fix the error?",
                options: [
                    "Change the IAM permissions by applying PutBucketPolicy permissions",
                    "Verify that the policy has the same name as the bucket name. If not, make it the same",
                    "Change the resource section to 'arn:aws:s3:::appbucket/*'",
                    "Add an s3:ListBucket action"
                ],
                correct: [2],
                multiSelect: false,
                explanation: "The error 'Action does not apply to any resource(s) in statement' occurs when GetObject is applied to a bucket ARN instead of object ARNs. GetObject requires object-level permissions, so the resource must include '/*' to target objects within the bucket.",
                docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html"
            },
            {
                id: 4,
                question: "A Security Engineer has been informed that a user's access key has been found on GitHub. The Engineer must ensure that this access key cannot continue to be used, and must assess whether the access key was used to perform any unauthorized activities. Which steps must be taken to perform these tasks?",
                options: [
                    "Review the user's IAM permissions and delete any unrecognized or unauthorized resources",
                    "Delete the user, review Amazon CloudWatch Logs in all regions, and report the abuse",
                    "Delete or rotate the user's key, review the AWS CloudTrail logs in all regions, and delete any unrecognized or unauthorized resources",
                    "Instruct the user to remove the key from the GitHub submission, rotate keys, and re-deploy any instances that were launched"
                ],
                correct: [2],
                multiSelect: false,
                explanation: "When credentials are compromised: (1) Immediately delete or rotate the access key to prevent further use, (2) Review CloudTrail logs across ALL regions to identify any unauthorized API calls made with the key, (3) Delete any unauthorized resources created. CloudTrail, not CloudWatch Logs, captures API activity.",
                docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#securing_access-keys"
            },
            {
                id: 5,
                question: "A corporate cloud security policy states that communication between the company's VPC and KMS must travel entirely within the AWS network and not use public service endpoints. Which combination of the following actions MOST satisfies this requirement?",
                options: [
                    "Add the aws:sourceVpce condition to the AWS KMS key policy referencing the company's VPC endpoint ID",
                    "Remove the VPC internet gateway from the VPC and add a virtual private gateway to the VPC to prevent direct, public internet connectivity",
                    "Create a VPC endpoint for AWS KMS with private DNS enabled",
                    "Use the KMS Import Key feature to securely transfer the AWS KMS key over a VPN",
                    "Add the following condition to the AWS KMS key policy: 'aws:SourceIp': '10.0.0.0/16'"
                ],
                correct: [0, 2],
                multiSelect: true,
                explanation: "To ensure KMS traffic stays within the AWS network: (1) Create a VPC endpoint for KMS with private DNS enabled - this routes traffic through AWS's private network, and (2) Add aws:sourceVpce condition to the KMS key policy to ensure the key can only be accessed through the VPC endpoint.",
                docLink: "https://docs.aws.amazon.com/kms/latest/developerguide/kms-vpc-endpoint.html"
            },
            {
                id: 6,
                question: "When testing a new AWS Lambda function that retrieves items from an Amazon DynamoDB table, the Security Engineer notices that the function was not logging any data to Amazon CloudWatch Logs. The following policy was assigned to the role assumed by the Lambda function:\n\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [{\n    \"Sid\": \"Dynamo-1234567\",\n    \"Action\": [\"dynamodb:GetItem\"],\n    \"Effect\": \"Allow\",\n    \"Resource\": \"*\"\n  }]\n}\n\nWhich least-privilege policy addition would allow this function to log properly?",
                options: [
                    "{ \"Sid\": \"Logging-12345\", \"Resource\": \"*\", \"Action\": [\"logs:*\"], \"Effect\": \"Allow\" }",
                    "{ \"Sid\": \"Logging-12345\", \"Resource\": \"*\", \"Action\": [\"logs:CreateLogStream\"], \"Effect\": \"Allow\" }",
                    "{ \"Sid\": \"Logging-12345\", \"Resource\": \"*\", \"Action\": [\"logs:CreateLogGroup\", \"logs:CreateLogStream\", \"logs:PutLogEvents\"], \"Effect\": \"Allow\" }",
                    "{ \"Sid\": \"Logging-12345\", \"Resource\": \"*\", \"Action\": [\"logs:CreateLogGroup\", \"logs:CreateLogStream\", \"logs:DeleteLogGroup\", \"logs:DeleteLogStream\", \"logs:getLogEvents\", \"logs:PutLogEvents\"], \"Effect\": \"Allow\" }"
                ],
                correct: [2],
                multiSelect: false,
                explanation: "Lambda needs exactly three CloudWatch Logs permissions to log properly: CreateLogGroup (to create the log group), CreateLogStream (to create log streams), and PutLogEvents (to write log entries). This follows least-privilege - logs:* is too broad, and delete permissions are not needed.",
                docLink: "https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html"
            },
            {
                id: 7,
                question: "A company is building a data lake on Amazon S3. The data consists of millions of small files containing sensitive information. The Security team has the following requirements for the architecture:\n- Data must be encrypted in transit\n- Data must be encrypted at rest\n- The bucket must be private, but if the bucket is accidentally made public, the data must remain confidential\n\nWhich combination of steps would meet the requirements?",
                options: [
                    "Enable AES-256 encryption using server-side encryption with Amazon S3-managed encryption keys (SSE-S3) on the S3 bucket",
                    "Enable default encryption with server-side encryption with AWS KMS-managed keys (SSE-KMS) on the S3 bucket",
                    "Add a bucket policy that includes a deny if a PutObject request does not include aws:SecureTransport",
                    "Add a bucket policy with aws:SourceIp to allow uploads and downloads from the corporate intranet only",
                    "Enable Amazon Macie to monitor and act on changes to the data lake's S3 bucket"
                ],
                correct: [1, 2],
                multiSelect: true,
                explanation: "SSE-KMS provides encryption at rest AND protects data even if bucket becomes public (because decryption requires KMS key permissions). The aws:SecureTransport condition in a bucket policy enforces HTTPS for encryption in transit. SSE-S3 wouldn't protect data if bucket became public since anyone with S3 access could read it.",
                docLink: "https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingKMSEncryption.html"
            },
            {
                id: 8,
                question: "A Security Engineer must ensure that all API calls are collected across all company accounts, and that they are preserved online and are instantly available for analysis for 90 days. For compliance reasons, this data must be restorable for 7 years. Which steps must be taken to meet the retention needs in a scalable, cost-effective way?",
                options: [
                    "Enable AWS CloudTrail logging across all accounts to a centralized Amazon S3 bucket with versioning enabled. Set a lifecycle policy to move the data to Amazon Glacier daily, and expire the data after 90 days",
                    "Enable AWS CloudTrail logging across all accounts to S3 buckets. Set a lifecycle policy to expire the data in each bucket after 7 years",
                    "Enable AWS CloudTrail logging across all accounts to Amazon Glacier. Set a lifecycle policy to expire the data after 7 years",
                    "Enable AWS CloudTrail logging across all accounts to a centralized Amazon S3 bucket. Set a lifecycle policy to move the data to Amazon Glacier after 90 days, and expire the data after 7 years"
                ],
                correct: [3],
                multiSelect: false,
                explanation: "The requirements are: (1) instantly available for 90 days - keep in S3, (2) restorable for 7 years - archive to Glacier. Option D meets both: logs go to S3 first (instant access), transition to Glacier after 90 days (cost-effective long-term storage), expire after 7 years (compliance).",
                docLink: "https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-log-file-examples.html"
            },
            {
                id: 9,
                question: "A company decides to place database hosts in its own VPC, and to set up VPC peering to different VPCs containing the application and web tiers. The application servers are unable to connect to the database. Which network troubleshooting steps should be taken to resolve the issue?",
                options: [
                    "Check to see if the application servers are in a private subnet or public subnet",
                    "Check the route tables for the application server subnets for routes to the VPC peering connection",
                    "Check the NACLs for the database subnets for rules that allow traffic from the internet",
                    "Check the database security groups for rules that allow traffic from the application servers",
                    "Check to see if the database VPC has an internet gateway"
                ],
                correct: [1, 3],
                multiSelect: true,
                explanation: "For VPC peering connectivity issues: (1) Check route tables - each VPC must have routes pointing to the peering connection for the other VPC's CIDR, (2) Check security groups - the database security group must allow inbound traffic from the application servers. Internet gateway and NACLs for internet traffic are not relevant for private VPC peering.",
                docLink: "https://docs.aws.amazon.com/vpc/latest/peering/peering-configurations-full-access.html"
            },
            {
                id: 10,
                question: "Why is it important to scan network logs?",
                options: [
                    "To keep an eye on what the employees on your network are doing",
                    "To ensure there are no dropped packets or high latency",
                    "To be alerted to unusual traffic entering and exiting your network as a potential security event",
                    "To know if access has been made to your private S3 buckets"
                ],
                correct: [2],
                multiSelect: false,
                explanation: "From a security perspective, scanning network logs is primarily important to detect unusual or suspicious traffic patterns that could indicate security threats such as intrusion attempts, data exfiltration, DDoS attacks, or unauthorized access. While other options have some merit, security monitoring is the primary reason for log analysis.",
                docLink: "https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html"
            }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        
        function shuffleQuestionOptions(q) {
            const indices = q.options.map((_, i) => i);
            const shuffled = shuffleArray(indices);
            const newCorrect = q.multiSelect 
                ? q.correct.map(c => shuffled.indexOf(c))
                : [shuffled.indexOf(q.correct[0])];
            return { 
                ...q, 
                options: shuffled.map(i => q.options[i]), 
                correct: q.multiSelect ? newCorrect : newCorrect[0],
                originalIndices: shuffled
            };
        }
        
        function startQuiz(mode) { 
            currentMode = mode; 
            currentQuestion = 0; 
            userAnswers = new Array(questions.length).fill(null).map(() => []); 
            answersRevealed = new Array(questions.length).fill(false);
            shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); 
            document.getElementById('modeSelector').classList.add('hidden'); 
            document.getElementById('quizContent').classList.remove('hidden'); 
            document.getElementById('resultsCard').classList.remove('show'); 
            document.getElementById('totalQ').textContent = shuffledQuestions.length; 
            if (mode === 'exam') { 
                timeRemaining = shuffledQuestions.length * 150; 
                startTimer(); 
                document.getElementById('shuffleBtn').classList.add('hidden'); 
            } else { 
                document.getElementById('timer').textContent = 'Learn Mode'; 
                document.getElementById('shuffleBtn').classList.remove('hidden'); 
            } 
            renderQuestion(); 
        }
        
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        
        function renderQuestion() { 
            const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D','E'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion];
            const correctArr = Array.isArray(q.correct) ? q.correct : [q.correct];
            
            let opts = q.options.map((o, i) => { 
                let c = 'option'; 
                if (currentMode === 'learn' && revealed) { 
                    c += ' disabled'; 
                    if (correctArr.includes(i)) c += ' correct'; 
                    else if (ans.includes(i) && !correctArr.includes(i)) c += ' incorrect'; 
                } else if (ans.includes(i)) c += ' selected'; 
                return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; 
            }).join(''); 
            
            const multiNote = q.multiSelect ? `<div class="multi-select-note">‚ö†Ô∏è Select ${correctArr.length} answers</div>` : '';
            
            let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${correctArr.map(c => letters[c]).join(', ')}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; 
            
            document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Sample Exam</span></div><p class="question-text">${q.question.replace(/\n/g, '<br>')}</p>${multiNote}<div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; 
            
            document.getElementById('currentQ').textContent = currentQuestion + 1; 
            document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; 
            document.getElementById('prevBtn').disabled = currentQuestion === 0; 
            document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; 
        }
        
        function selectOption(i) { 
            if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; 
            const q = shuffledQuestions[currentQuestion];
            const correctArr = Array.isArray(q.correct) ? q.correct : [q.correct];
            
            if (q.multiSelect) {
                const idx = userAnswers[currentQuestion].indexOf(i);
                if (idx > -1) {
                    userAnswers[currentQuestion].splice(idx, 1);
                } else if (userAnswers[currentQuestion].length < correctArr.length) {
                    userAnswers[currentQuestion].push(i);
                }
            } else {
                userAnswers[currentQuestion] = [i];
            }
            renderQuestion(); 
        }
        
        function revealAnswer() { 
            answersRevealed[currentQuestion] = true; 
            renderQuestion(); 
        }
        
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        
        function shuffleQuiz() { 
            if (currentMode !== 'learn') return; 
            currentQuestion = 0; 
            userAnswers = new Array(questions.length).fill(null).map(() => []); 
            answersRevealed = new Array(questions.length).fill(false);
            shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); 
            renderQuestion(); 
        }
        
        function showResults() { 
            if (timerInterval) clearInterval(timerInterval); 
            let correct = shuffledQuestions.reduce((c, q, i) => {
                const correctArr = Array.isArray(q.correct) ? q.correct : [q.correct];
                const userAns = userAnswers[i] || [];
                const isCorrect = correctArr.length === userAns.length && correctArr.every(a => userAns.includes(a));
                return c + (isCorrect ? 1 : 0);
            }, 0); 
            const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; 
            document.getElementById('quizContent').classList.add('hidden'); 
            document.getElementById('resultsCard').classList.add('show'); 
            document.getElementById('scorePercent').textContent = pct + '%'; 
            document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); 
            document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; 
            document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); 
            document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; 
            document.getElementById('correctCount').textContent = correct; 
            document.getElementById('incorrectCount').textContent = total - correct; 
        }
        
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
