<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAM Access Analyzer, Policy Simulator & ABAC/RBAC Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #3b82f6; --accent-secondary: #60a5fa; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(59, 130, 246, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(59, 130, 246, 0.2); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25), inset 0 0 12px rgba(59, 130, 246, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(59, 130, 246, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(59, 130, 246, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(59, 130, 246, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(59, 130, 246, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(59, 130, 246, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(59, 130, 246, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 4: Identity & Access Management (22%)</span>
            <h1>üîç IAM Access Analyzer, Policy Simulator & ABAC/RBAC</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">25</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">62:30</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">25</span></span>
                    <span class="timer" id="timer">62:30</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What are the primary capabilities provided by IAM Access Analyzer?", options: ["Access Analyzer only identifies resources shared externally and validates IAM policies against grammar rules", "Access Analyzer identifies external access, internal access, unused access, validates policies, validates custom checks, and generates policies from CloudTrail logs", "Access Analyzer performs real-time monitoring of API calls and automatically blocks suspicious access patterns using machine learning", "Access Analyzer analyzes network traffic patterns to identify potential data exfiltration attempts and DDoS attacks"], correct: 1, explanation: "IAM Access Analyzer provides six key capabilities: (1) identifying external access to resources, (2) identifying internal access paths, (3) detecting unused access (roles, credentials, permissions), (4) validating policies against grammar and best practices, (5) custom policy checks against security standards, and (6) generating policies based on CloudTrail activity.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" },
            { id: 2, question: "What is a 'zone of trust' in IAM Access Analyzer external access analysis?", options: ["A network boundary defined by VPC and subnet configurations that isolates resources from public internet access", "The organization or account you choose when creating an analyzer; principals within this zone are considered trusted", "A compliance framework certification (like SOC 2 or ISO 27001) that establishes trust requirements for resource access", "A KMS key policy condition that restricts encryption operations to specific IAM principals within a trusted group"], correct: 1, explanation: "The zone of trust is the organization or account you choose when enabling IAM Access Analyzer. All principals within your zone of trust are considered trusted. Access to resources by principals within the zone is considered safe, so no findings are generated. Access from outside the zone generates findings.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" },
            { id: 3, question: "Which AWS resource types does IAM Access Analyzer analyze for external access findings?", options: ["Only S3 buckets and IAM roles, as these are the most commonly shared resources across AWS accounts", "S3 buckets, IAM roles, KMS keys, Lambda functions/layers, SQS queues, Secrets Manager secrets, SNS topics, and EBS snapshots among others", "All AWS resources that support resource-based policies including EC2 instances, RDS databases, and DynamoDB tables", "Only resources with public access enabled; private resources within VPCs are excluded from analysis regardless of policies"], correct: 1, explanation: "IAM Access Analyzer analyzes multiple resource types including S3 buckets, IAM roles, KMS keys, Lambda functions and layers, SQS queues, Secrets Manager secrets, SNS topics, EBS snapshots, ECR repositories, EFS file systems, IAM Access Analyzer analyzers, RDS DB snapshots, and more.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" },
            { id: 4, question: "How frequently does IAM Access Analyzer analyze resource-based policies?", options: ["Policies are analyzed only once when Access Analyzer is first enabled; manual rescans must be initiated for changes", "New or updated policies are analyzed within about 30 minutes; all policies are also analyzed periodically (within 24 hours)", "Policies are analyzed in real-time as they are created or modified with findings appearing instantly in the console", "Analysis occurs on a fixed weekly schedule aligned with AWS maintenance windows to minimize performance impact"], correct: 1, explanation: "IAM Access Analyzer analyzes new or updated policies within about 30 minutes of changes (when notified properly). It also performs periodic scans of all resource-based policies within 24 hours to catch any missed changes. You can manually rescan specific resources using the Rescan button or StartResourceScan API.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" },
            { id: 5, question: "What types of unused access findings does IAM Access Analyzer generate?", options: ["Only unused IAM roles that haven't assumed any AWS service within the specified tracking period", "Unused roles, unused IAM user access keys and passwords, and unused service-level and action-level permissions", "Unused security groups, unused network ACLs, and unused VPC endpoints that haven't processed traffic", "Only unused permissions for write operations; read-only permissions are excluded from unused access analysis"], correct: 1, explanation: "IAM Access Analyzer unused access analysis generates three types of findings: (1) unused roles with no access activity, (2) unused IAM user credentials (access keys and passwords), and (3) unused permissions (both service-level and action-level) that roles haven't used within the specified tracking period.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-findings.html" },
            { id: 6, question: "What is policy validation in IAM Access Analyzer and what types of findings does it provide?", options: ["Policy validation checks if policies comply with organization SCPs and reports violations to AWS Config", "Policy validation checks policies against grammar and best practices, providing security warnings, errors, general warnings, and suggestions", "Policy validation simulates policy execution against historical CloudTrail logs to identify overly permissive access patterns", "Policy validation encrypts policy documents using KMS and validates that only authorized principals can decrypt them"], correct: 1, explanation: "IAM Access Analyzer policy validation validates policies against IAM policy grammar and AWS best practices. It provides four types of findings: (1) security warnings for overly permissive access, (2) errors preventing policy function, (3) general warnings for non-conformance to best practices, and (4) suggestions for improvements that don't impact permissions.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-policy-validation.html" },
            { id: 7, question: "How does IAM Access Analyzer internal access analysis differ from external access analysis?", options: ["Internal access analysis monitors API calls within the account while external access tracks cross-account requests", "Internal access analysis identifies access paths between principals and resources within your organization; external finds access from outside the zone of trust", "Internal access analysis validates IAM policy syntax while external access checks resource-based policy permissions", "Internal access analysis is free while external access requires an analyzer subscription and incurs monthly charges"], correct: 1, explanation: "Internal access analysis generates findings for access paths between IAM roles/users and specified resources within your organization (or account if that's your scope). External access analysis finds resources shared with principals outside your zone of trust. Both use the same zone of trust concept but analyze different access patterns.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-findings.html" },
            { id: 8, question: "What is a critical regional consideration for IAM Access Analyzer external access analyzers?", options: ["Access Analyzer must be enabled in all regions where you use supported resources to monitor comprehensively", "External access findings automatically replicate across all regions once Access Analyzer is enabled in one region", "Access Analyzer only works in the US East (N. Virginia) region due to compliance and data residency requirements", "Regional analyzers can only detect external access from principals in the same AWS region as the analyzer"], correct: 0, explanation: "For external access, IAM Access Analyzer analyzes only policies in the same AWS Region where it's enabled. To monitor all resources, you must create an analyzer in each region. Note: For unused access, findings don't change based on region, so creating analyzers in each region is not required.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" },
            { id: 9, question: "What is the primary purpose of the IAM Policy Simulator?", options: ["To automatically generate IAM policies based on existing resource access patterns and CloudTrail logs", "To test and troubleshoot identity-based policies, permissions boundaries, resource-based policies, and SCPs without making actual AWS API requests", "To encrypt IAM policies using AWS KMS keys and validate that only authorized administrators can modify them", "To monitor real-time IAM policy violations and send alerts to Security Hub when unauthorized access attempts occur"], correct: 1, explanation: "The IAM Policy Simulator allows you to test and troubleshoot policies without making actual AWS API requests. You can test identity-based policies, permissions boundaries, resource-based policies, and SCPs to understand what actions would be allowed or denied, providing a safe environment for policy validation.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_testing-policies.html" },
            { id: 10, question: "What types of policies can you test using the IAM Policy Simulator?", options: ["Only identity-based policies attached to IAM users, groups, and roles; resource-based policies are not supported", "Identity-based policies, permissions boundaries, resource-based policies (for users only, not roles), SCPs, and new unattached policies", "All IAM policy types including SCPs with conditions, resource control policies (RCPs), and session policies", "Only customer-managed policies; AWS managed policies cannot be tested due to proprietary policy logic"], correct: 1, explanation: "The Policy Simulator can test: identity-based policies attached to users/groups/roles, permissions boundaries, resource-based policies (for IAM users only, not roles), SCPs (without conditions), and new policies not yet attached. It does NOT support SCPs with conditions, RCPs, or cross-account testing for roles.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_testing-policies.html" },
            { id: 11, question: "How do the Policy Simulator results differ from a live AWS environment?", options: ["The simulator makes actual API requests but rolls them back immediately, so side effects may still occur temporarily", "The simulator doesn't make actual requests, doesn't use real context keys, doesn't support RCPs, SCPs with conditions, or cross-account role testing", "The simulator results are identical to production but delayed by 5-15 minutes due to policy cache synchronization", "The simulator only supports read-only operations; write operations automatically fail regardless of policy permissions"], correct: 1, explanation: "The Policy Simulator differs from live AWS: it doesn't make actual service requests, doesn't consider real context key values, doesn't support SCPs with conditions or RCPs, doesn't support cross-account role/user testing, and can't determine which services support specific global condition keys. Always validate in production after simulator testing.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_testing-policies.html" },
            { id: 12, question: "What is Attribute-Based Access Control (ABAC) in AWS?", options: ["An encryption strategy that controls access to data based on classification attributes like confidential or public", "An authorization strategy that defines permissions based on attributes (tags) attached to IAM entities and AWS resources", "A network access control method that restricts traffic based on packet attributes like source IP and port number", "An auditing framework that tracks user behavior attributes to detect anomalies and insider threats"], correct: 1, explanation: "ABAC is an authorization strategy that defines permissions based on attributes called tags. You attach tags to IAM entities (users/roles) and AWS resources, then create policies that allow operations when the principal's tag matches the resource tag. This provides dynamic, fine-grained access control that scales with your environment.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_attribute-based-access-control.html" },
            { id: 13, question: "What are the key advantages of ABAC over traditional Role-Based Access Control (RBAC)?", options: ["ABAC is faster than RBAC because tag-based evaluations require less computational overhead than role lookups", "ABAC permissions scale with innovation, requires fewer policies, enables dynamic responses to change, and allows granular permissions using tags", "ABAC eliminates the need for IAM roles entirely by replacing them with tag-based identity federation mechanisms", "ABAC automatically encrypts all resource access using tags as encryption keys for enhanced data protection"], correct: 1, explanation: "ABAC advantages over RBAC: (1) scales with innovation - new resources with matching tags are automatically accessible, (2) requires fewer policies since you don't need different policies per job function, (3) teams can dynamically respond to changes without policy updates, (4) enables granular least-privilege access, and (5) integrates with corporate directory attributes via SAML/OIDC.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_attribute-based-access-control.html" },
            { id: 14, question: "In traditional RBAC, what is the primary disadvantage when your environment grows?", options: ["RBAC policies become too large and exceed the IAM policy size limits, requiring policy splitting and refactoring", "When users add new resources, you must update policies to allow access to those resources, increasing administrative overhead", "RBAC requires separate IAM accounts for each role, dramatically increasing AWS account costs and management complexity", "RBAC policies conflict with each other when multiple roles are assigned, causing unpredictable permission denials"], correct: 1, explanation: "The main RBAC disadvantage is that when new resources are added (like a new S3 bucket or EC2 instance), you must manually update the policies attached to IAM roles to grant access. This doesn't scale well in dynamic environments. ABAC solves this by automatically granting access to resources with matching tags.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_attribute-based-access-control.html" },
            { id: 15, question: "What are the three main tag condition keys used to control access based on tags?", options: ["aws:TagOwner for resource ownership, aws:TagExpiry for time-based access, aws:TagPriority for precedence", "aws:ResourceTag for resource tags, aws:RequestTag for tags in requests, aws:TagKeys for controlling which tag keys are used", "aws:IdentityTag for principal identity, aws:SessionTag for temporary credentials, aws:PrincipalTag for role tags", "aws:TagVersion for policy versioning, aws:TagScope for organizational boundaries, aws:TagRegion for geographic restrictions"], correct: 1, explanation: "The three main tag condition keys are: (1) aws:ResourceTag/key-name to control access based on tags attached to resources, (2) aws:RequestTag/key-name to control what tags can be passed in requests, and (3) aws:TagKeys to control whether specific tag keys can be used in any part of authorization.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_tags.html" },
            { id: 16, question: "How does aws:ResourceTag condition key work in IAM policies?", options: ["It validates that resources have proper tags before allowing CloudFormation stack creation or updates", "It allows or denies access to resources based on the tag values attached to those resources being evaluated", "It automatically applies tags to newly created resources based on the principal's identity and session attributes", "It encrypts resource metadata using tag values as part of the encryption key derivation function"], correct: 1, explanation: "The aws:ResourceTag/key-name condition key controls access based on tags attached to the resource being accessed. For example, you can allow ec2:StartInstances only if the instance has an Owner tag matching the user's username (aws:ResourceTag/Owner = ${aws:username}), enabling fine-grained access control.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_tags.html" },
            { id: 17, question: "What is the difference between aws:RequestTag and aws:PrincipalTag condition keys?", options: ["aws:RequestTag checks tags being applied in the current request; aws:PrincipalTag checks tags on the IAM entity making the request", "aws:RequestTag validates tag format compliance; aws:PrincipalTag enforces mandatory tag requirements on resources", "aws:RequestTag applies to GET operations; aws:PrincipalTag applies to PUT/POST operations modifying resources", "aws:RequestTag works with resource-based policies; aws:PrincipalTag works only with identity-based policies"], correct: 0, explanation: "aws:RequestTag/key-name controls what tag key-value pairs can be passed in a request to tag a resource (e.g., during resource creation). aws:PrincipalTag/key-name checks tags attached to the IAM principal (user or role session) making the request. This enables matching principal attributes to resource attributes.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_tags.html" },
            { id: 18, question: "Can you use ABAC to restrict IAM PassRole using tags?", options: ["Yes, aws:ResourceTag condition with iam:PassRole action reliably controls which roles can be passed based on tags", "No, AWS explicitly warns that using ResourceTag condition with iam:PassRole does not have reliable results", "Yes, but only if you also enable IAM Access Analyzer to validate the tag-based PassRole policies", "No, iam:PassRole can only be controlled through explicit resource ARNs in the policy statement"], correct: 1, explanation: "AWS explicitly warns: Do NOT try to control who can pass a role by tagging the role and using the ResourceTag condition key with iam:PassRole. This approach does not have reliable results. For PassRole, use explicit resource ARNs or other conditions recommended in the documentation.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_tags.html" },
            { id: 19, question: "How can you use session tags from federated users for ABAC?", options: ["Session tags are automatically inherited from the IAM user's tags when they federate through AWS IAM Identity Center", "You can configure SAML or OIDC providers to pass session tags to IAM; when users federate, their attributes become session tags for ABAC", "Session tags can only be set programmatically via STS AssumeRole API calls; federation protocols don't support tags", "Session tags from federated users are read-only and cannot be used in IAM policy conditions for security reasons"], correct: 1, explanation: "You can configure your SAML or OIDC identity provider to pass session tags to AWS. When employees federate into AWS, IAM applies their attributes as session tags on their resulting principal. You can then use ABAC policies with conditions checking these session tags to allow or deny permissions based on user attributes.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_attribute-based-access-control.html" },
            { id: 20, question: "What is the purpose of the 'check for new access' feature in IAM Access Analyzer policy validation?", options: ["It scans CloudTrail logs to identify if the policy grants access to new AWS services released in the last 90 days", "It compares updated policy versions to existing policies to determine if the modifications grant new permissions not previously allowed", "It validates that newly created IAM principals don't automatically inherit excessive permissions from group memberships", "It checks if new AWS accounts added to your organization can access resources that should remain isolated"], correct: 1, explanation: "The 'check for new access' feature is a custom policy check that compares your modified policy against the existing version to determine if the changes grant new access. This helps you verify that policy updates don't unintentionally grant broader permissions. Note: This feature incurs per-check charges.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-policy-validation.html" },
            { id: 21, question: "What happens when IAM Access Analyzer detects a resource shared with an external principal?", options: ["The resource is automatically quarantined and access is blocked until an administrator reviews and approves the sharing", "A finding is generated with details about the resource, external entity, and permissions granted; you review to determine if intended or risky", "An SNS notification is sent to the security team and a ticket is created in AWS Systems Manager OpsCenter automatically", "The sharing is logged to CloudTrail but no proactive notification occurs; you must manually query findings daily"], correct: 1, explanation: "When Access Analyzer identifies a resource shared outside your zone of trust, it generates a finding with details including the resource, external principal with access, and permissions granted. You review findings to determine if access is intentional or represents a security risk, then take appropriate remediation action.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" },
            { id: 22, question: "What is policy generation in IAM Access Analyzer and how does it work?", options: ["Policy generation uses machine learning to predict what permissions a principal might need based on similar roles in your organization", "Policy generation creates IAM policies based on access activity captured in CloudTrail logs, analyzing actual API calls made by principals", "Policy generation converts resource-based policies into equivalent identity-based policies for centralized management", "Policy generation automatically creates least-privilege policies by removing unused permissions detected by Access Analyzer"], correct: 1, explanation: "IAM Access Analyzer policy generation analyzes your CloudTrail logs to identify AWS actions actually performed by a principal over a specified period. It then generates an IAM policy granting only those permissions that were actually used, helping you implement least-privilege access based on real activity.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html" },
            { id: 23, question: "In an ABAC implementation, what is the recommended pattern for project-based resource access?", options: ["Create separate IAM roles for each project with hard-coded resource ARNs in policies, rotating keys quarterly", "Tag principals and resources with matching project tags (e.g., access-project=Heart), then create policies allowing access when tags match", "Use separate AWS accounts for each project with cross-account roles for team members who work on multiple projects", "Store project membership in DynamoDB and use Lambda authorizers to validate access on every API call"], correct: 1, explanation: "The ABAC pattern for project access: tag IAM roles with a project tag (e.g., access-project=Heart), tag resources with the same key (access-project=Heart), then create a single policy allowing access when principal and resource tags match. When users assume the role, they can only access resources with matching tags.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction_attribute-based-access-control.html" },
            { id: 24, question: "What are the four categories of findings provided by IAM Access Analyzer policy validation?", options: ["Critical, High, Medium, and Low severity findings based on the security impact of policy misconfigurations", "Security warnings, Errors, General warnings, and Suggestions categorized by their impact on policy functionality", "Syntax errors, Logic errors, Permission conflicts, and Best practice violations identified during policy analysis", "Public access findings, Cross-account findings, Unused permissions, and Overly permissive wildcards detected"], correct: 1, explanation: "IAM Access Analyzer policy validation categorizes findings into: (1) Security warnings - access that's overly permissive/risky, (2) Errors - issues preventing policy from functioning, (3) General warnings - non-conformance to best practices without security risk, (4) Suggestions - recommended improvements that don't impact permissions.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-policy-validation.html" },
            { id: 25, question: "How can you simulate context keys (like IP address or date) when using the IAM Policy Simulator?", options: ["Context keys are automatically populated from your current browser session when using the Policy Simulator console", "You can provide context keys as inputs during simulation to test policies with Condition elements that check those values", "Context keys can only be tested via the Policy Simulator API; the console doesn't support custom context values", "The simulator infers context keys from historical CloudTrail logs and applies the most common values automatically"], correct: 1, explanation: "The IAM Policy Simulator allows you to provide context keys (such as aws:SourceIp, aws:CurrentTime, aws:PrincipalTag, etc.) as inputs when simulating. This enables testing policies with Condition elements that check these context values. Note: If the policy doesn't explicitly check for tags in conditions, provided tag inputs won't affect results.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_testing-policies.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Access Analyzer & Policy Tools</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
