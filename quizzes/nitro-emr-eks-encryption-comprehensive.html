<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nitro / EMR / EKS Encryption Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #8b5cf6; --accent-secondary: #a78bfa; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width: 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(139, 92, 246, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(139, 92, 246, 0.2); box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.25), inset 0 0 12px rgba(139, 92, 246, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(139, 92, 246, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(139, 92, 246, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(139, 92, 246, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(139, 92, 246, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(139, 92, 246, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(139, 92, 246, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 5: Data Protection (26%)</span>
            <h1>üîê Nitro / EMR / EKS Encryption</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">25</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">62:30</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">25</span></span>
                    <span class="timer" id="timer">62:30</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is the primary purpose of AWS Nitro Enclaves?", options: ["To provide isolated execution environments within EC2 instances for processing sensitive data with cryptographic attestation", "To enable multi-tenancy on EC2 instances by running multiple customer workloads in separate isolated containers", "To accelerate cryptographic operations using dedicated hardware security modules attached to EC2 instances", "To create encrypted network tunnels between EC2 instances for secure inter-instance communication"], correct: 0, explanation: "AWS Nitro Enclaves creates isolated execution environments (enclaves) from EC2 instances that are separate, hardened, and highly-constrained VMs. They have no persistent storage, interactive access, or external networking. Enclaves are used to process sensitive data like PII with cryptographic attestation to verify enclave identity.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/nitro-enclave.html" },
            { id: 2, question: "Which components make up the three primary parts of the AWS Nitro System?", options: ["Nitro Controller, Nitro Storage, and Nitro Network providing distributed compute and storage capabilities", "Nitro Cards (purpose-built hardware), Nitro Security Chip, and Nitro Hypervisor for isolation and security", "Nitro Processor, Nitro Memory, and Nitro I/O handling compute resources independently from customer workloads", "Nitro Firmware, Nitro BIOS, and Nitro Kernel providing low-level system control and management"], correct: 1, explanation: "The AWS Nitro System consists of three primary components: Purpose-built Nitro Cards (dedicated hardware with ASICs for I/O and control), the Nitro Security Chip (firmware protection and boot process), and the Nitro Hypervisor (provides CPU and memory isolation). These work together to secure EC2 instances.", docLink: "https://docs.aws.amazon.com/whitepapers/latest/security-design-of-aws-nitro-system/the-components-of-the-nitro-system.html" },
            { id: 3, question: "What type of connectivity do Nitro Enclaves have with their parent EC2 instance?", options: ["Full network access through a dedicated virtual ethernet interface with firewall rules applied", "Only secure local socket connectivity with no persistent storage, interactive access, or external networking", "Direct memory access to parent instance memory for high-performance data processing operations", "VPN-encrypted tunnel connection allowing controlled internet access for certificate validation"], correct: 1, explanation: "Nitro Enclaves have only secure local socket connectivity with their parent instance. They have no persistent storage, no interactive access (cannot SSH), and no external networking. Users cannot access enclave data from the parent instance, even as root/admin. This isolation ensures sensitive data security.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/nitro-enclave.html" },
            { id: 4, question: "How many Platform Configuration Registers (PCRs) does a Nitro Enclave have for attestation?", options: ["Three PCRs measuring enclave image, kernel/bootstrap, and application code for basic attestation", "Six PCRs measuring image, kernel, application, IAM role, instance ID, and signing certificate", "Eight PCRs following TPM 2.0 standards for comprehensive hardware and software measurement", "Twelve PCRs providing granular measurements of all enclave components and parent instance state"], correct: 1, explanation: "A Nitro Enclave has six PCRs for attestation: PCR0 (enclave image), PCR1 (Linux kernel/bootstrap), PCR2 (application), PCR3 (IAM role of parent), PCR4 (instance ID of parent), and PCR8 (signing certificate). These measurements uniquely identify the enclave and are used in KMS key policies for access control.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/set-up-attestation.html" },
            { id: 5, question: "What happens to PCR values when a Nitro Enclave is launched in debug mode?", options: ["PCR values are logged to CloudWatch Logs for debugging but remain cryptographically valid for attestation", "PCR values are generated normally but an additional debug flag is set in the attestation document", "PCR values become all zeroes making the attestation document invalid for production KMS policies", "PCR values are calculated using a debug key instead of the production signing certificate"], correct: 2, explanation: "Enclaves launched using --debug-mode or --attach-console options generate attestation documents with PCR values made up entirely of zeroes. This makes them unsuitable for production use with KMS key policies that check PCR values. Debug mode should only be used during development.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/set-up-attestation.html" },
            { id: 6, question: "Which AWS KMS API operations can be performed from within a Nitro Enclave using the Nitro Enclaves SDK?", options: ["Only Decrypt operations to retrieve sensitive data encrypted outside the enclave environment", "Decrypt, GenerateDataKey, and GenerateRandom operations with attestation document validation", "All KMS operations including CreateKey, ScheduleKeyDeletion, and PutKeyPolicy for key management", "Only GenerateDataKey and Encrypt operations for securing data before sending to external services"], correct: 1, explanation: "The Nitro Enclaves SDK includes AWS KMS APIs for Decrypt, GenerateDataKey, and GenerateRandom operations. These operations can include attestation documents that AWS KMS validates against condition keys in the KMS key policy (like kms:RecipientAttestation:ImageSha384) to authorize the enclave.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/set-up-attestation.html" },
            { id: 7, question: "Starting with which Kubernetes version does Amazon EKS provide default envelope encryption for all API data?", options: ["Kubernetes version 1.24 introduced default envelope encryption for ConfigMaps and Secrets", "Kubernetes version 1.28 or higher has default envelope encryption for all Kubernetes API data", "Kubernetes version 1.30 implemented mandatory envelope encryption that cannot be disabled", "Kubernetes version 1.26 added envelope encryption but only for Secrets, not all API data"], correct: 1, explanation: "Amazon EKS provides default envelope encryption for all Kubernetes API data in clusters running Kubernetes version 1.28 or higher. Previously, EKS only supported encrypting Kubernetes Secrets. Now this extends to all API data including ConfigMaps and other resources stored in etcd.", docLink: "https://docs.aws.amazon.com/eks/latest/userguide/envelope-encryption.html" },
            { id: 8, question: "What key does Amazon EKS use by default for envelope encryption of Kubernetes API data?", options: ["A customer managed key that you must specify during cluster creation for encryption", "An AWS owned key managed by EKS, with the option to bring your own customer managed key", "An AWS managed key (aws/eks) automatically created in your account for each cluster", "A cluster-specific key generated during cluster creation and stored in the control plane"], correct: 1, explanation: "By default, Amazon EKS uses an AWS owned key for envelope encryption. This is managed by AWS and doesn't appear in your account. You have the option to bring your own customer managed key from AWS KMS for additional control. The AWS owned key approach provides managed, default security without customer action.", docLink: "https://docs.aws.amazon.com/eks/latest/userguide/envelope-encryption.html" },
            { id: 9, question: "How does Amazon EKS implement envelope encryption for Kubernetes resources?", options: ["EKS encrypts each resource with a single DEK that is encrypted with a KEK from AWS KMS", "EKS generates a DEK seed at startup, encrypts it with a KMS KEK, then derives single-use DEKs for each resource", "EKS requests a new data key from KMS for every Kubernetes resource stored in etcd", "EKS uses the KMS key directly to encrypt each resource without intermediate data encryption keys"], correct: 1, explanation: "EKS uses KMS v2: At startup, the API server generates a DEK seed, makes a one-time call to encrypt it with a KEK from AWS KMS, then caches the encrypted seed. For each Kubernetes resource, a single-use DEK is derived from the seed using a Key Derivation Function (KDF). This approach is performant and cost-effective.", docLink: "https://docs.aws.amazon.com/eks/latest/userguide/envelope-encryption.html" },
            { id: 10, question: "Can you disable secrets encryption after enabling it on an Amazon EKS cluster?", options: ["Yes, but only if you decrypt all existing secrets first using kubectl commands", "No, secrets encryption is irreversible once enabled and cannot be disabled", "Yes, by updating the cluster configuration and re-encrypting secrets with default encryption", "Yes, but requires cluster recreation with a new control plane and etcd database"], correct: 1, explanation: "You cannot disable secrets encryption after enabling it on an EKS cluster. This action is irreversible. Once enabled, all secrets (and in v1.28+ all API data) remain encrypted. This is an important consideration before enabling encryption on existing clusters.", docLink: "https://docs.aws.amazon.com/eks/latest/userguide/enable-kms.html" },
            { id: 11, question: "What requirements must a KMS key meet to be used for EKS secrets encryption?", options: ["Asymmetric key, can sign and verify data, created in any region, shared via AWS RAM", "Symmetric key, can encrypt and decrypt data, created in same region as cluster, principal has access", "Multi-region key, supports automatic rotation, has grants enabled, minimum 2048-bit RSA", "Customer managed key, configured for ABAC, has CloudTrail logging enabled, supports cross-account access"], correct: 1, explanation: "The KMS key for EKS secrets encryption must be: 1) Symmetric, 2) Can encrypt and decrypt data, 3) Created in the same AWS region as the cluster, and 4) If from a different account, the IAM principal must have access to the key. Multi-region keys are not required.", docLink: "https://docs.aws.amazon.com/eks/latest/userguide/enable-kms.html" },
            { id: 12, question: "Beginning with which Amazon EMR version can you use security configurations for encryption?", options: ["Amazon EMR version 4.1.0 introduced security configurations for simplified encryption management", "Amazon EMR version 4.8.0 and higher support security configurations for encryption settings", "Amazon EMR version 5.0.0 was the first to support comprehensive security configuration features", "Amazon EMR version 5.24.0 added security configurations including EBS root device encryption"], correct: 1, explanation: "Beginning with Amazon EMR version 4.8.0 and higher, you can use security configurations to specify encryption settings for data at rest and in transit. Security configurations are stored in EMR (not cluster config) and can be reused across clusters. Earlier versions required manual EMRFS encryption configuration.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption.html" },
            { id: 13, question: "What types of data can be encrypted at rest in Amazon EMR using security configurations?", options: ["Only EMRFS data in S3 can be encrypted; local disk and EBS volumes require separate configuration", "EMRFS data in S3, local disk data, and EBS volumes can all be encrypted via security configurations", "Only local disk and EBS volumes; S3 encryption must be configured directly in S3 bucket policies", "EMRFS data in S3 and HDFS data on local disks; EBS encryption requires EC2-level configuration"], correct: 1, explanation: "Amazon EMR security configurations allow you to encrypt both: 1) EMRFS data in S3 (using SSE or CSE), and 2) Data on local disks including HDFS data on instance store volumes and EBS-attached storage. You can choose to encrypt one, both, or neither based on your requirements.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption-options.html" },
            { id: 14, question: "What are the two server-side encryption options for EMRFS data in S3 with Amazon EMR?", options: ["SSE-S3 where S3 manages keys, and SSE-KMS where you use AWS KMS keys with policies", "SSE-AES where EMR manages keys, and SSE-RSA where you provide RSA key pairs", "SSE-Default using AWS owned keys, and SSE-CMK using customer managed keys exclusively", "SSE-Automatic with service-managed encryption, and SSE-Manual with customer-provided keys"], correct: 0, explanation: "For EMRFS S3 encryption with server-side encryption, EMR supports: 1) SSE-S3 where Amazon S3 manages the keys, and 2) SSE-KMS where you use AWS KMS keys with custom policies. SSE-C (customer-provided keys) is not available with Amazon EMR. You can also use client-side encryption (CSE-KMS or CSE-C).", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption-options.html" },
            { id: 15, question: "What is the difference between S3 server-side encryption (SSE) and client-side encryption (CSE) for EMRFS?", options: ["SSE encrypts data in S3 buckets; CSE encrypts data in the EMRFS client on EMR cluster before upload", "SSE uses KMS keys; CSE uses certificates generated by AWS Certificate Manager for encryption", "SSE is automatic for all data; CSE requires explicit configuration in the security configuration", "SSE encrypts metadata only; CSE encrypts both object data and metadata in S3"], correct: 0, explanation: "With SSE, Amazon S3 handles encryption/decryption at the object level when writing/reading. With CSE, the EMRFS client on the EMR cluster encrypts objects before uploading to S3 and decrypts after downloading. CSE provides client-side control but only encrypts EMRFS data, not all cluster data.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption-options.html" },
            { id: 16, question: "What encryption mechanisms are activated for HDFS when you enable local disk encryption in EMR?", options: ["HDFS Transparent Data Encryption (TDE) with zone encryption keys for all HDFS directories", "Secure Hadoop RPC set to Privacy using SASL, and data encryption on HDFS block transfers using AES 256", "LUKS encryption for all EBS volumes and dm-crypt for instance store volumes at the device level", "Kerberos authentication for all HDFS operations and SSL/TLS encryption for all HDFS communications"], correct: 1, explanation: "When local disk encryption is enabled, EMR activates: 1) Secure Hadoop RPC set to Privacy (using SASL), and 2) Data encryption on HDFS block data transfer set to true with AES 256 encryption. These protect data exchanged between cluster instances. Note: This does not activate HDFS transparent encryption, which must be configured separately.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption-options.html" },
            { id: 17, question: "Beginning with which EMR version can you encrypt EBS root device volumes using security configuration?", options: ["Amazon EMR version 4.8.0 when security configurations were first introduced for encryption", "Amazon EMR version 5.24.0 added security configuration option for EBS root device encryption", "Amazon EMR version 6.0.0 introduced comprehensive EBS encryption including root devices", "Amazon EMR version 5.0.0 included EBS root device encryption as part of local disk encryption"], correct: 1, explanation: "Beginning with Amazon EMR version 5.24.0, you can use a security configuration option to encrypt EBS root device and storage volumes when you specify AWS KMS as your key provider. Earlier versions required using a custom AMI with an encrypted root device volume.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption-options.html" },
            { id: 18, question: "What is HDFS Transparent Data Encryption (TDE) in Amazon EMR?", options: ["Automatic encryption of all HDFS data using keys managed by the Hadoop KMS without application changes", "Hardware-level encryption of NVMe SSD instance store volumes for transparent performance", "Client-side encryption in EMRFS that transparently encrypts data before writing to S3", "Operating system-level disk encryption using LUKS for all attached EBS volumes"], correct: 0, explanation: "HDFS Transparent Data Encryption (TDE) is a separate optional feature (available from EMR 4.1.0+) that you can configure manually - it is NOT configured using security configurations. TDE provides at-rest encryption for HDFS data stored on local disks using zone encryption keys managed by Hadoop KMS.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption.html" },
            { id: 19, question: "How does Amazon EMR encrypt data in transit between cluster nodes?", options: ["By enabling in-transit encryption in security configuration which activates TLS and Kerberos authentication", "By using IPsec VPN tunnels automatically configured between all cluster nodes", "By enabling AWS PrivateLink for all inter-node communication within the VPC", "By configuring Network Load Balancer with SSL/TLS termination for cluster traffic"], correct: 0, explanation: "Amazon EMR encrypts data in transit by enabling in-transit encryption in the security configuration. This activates open-source encryption features including TLS for various frameworks (like Spark, Presto), SASL for Hadoop RPC, and can integrate with Kerberos authentication for additional security.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption.html" },
            { id: 20, question: "What is the purpose of the attestation document in Nitro Enclaves?", options: ["To document compliance with security regulations for audit purposes in encrypted environments", "To prove the enclave's identity to external services by providing cryptographically signed measurements", "To store encrypted application secrets that can be retrieved by the parent instance", "To establish a secure TLS connection between the enclave and AWS services"], correct: 1, explanation: "The attestation document is a cryptographically signed document from the Nitro Hypervisor containing the enclave's unique measurements (PCRs). Enclaves attach it to requests to external services (like AWS KMS). The service validates measurements against access policies to determine whether to grant the enclave access to cryptographic operations.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/set-up-attestation.html" },
            { id: 21, question: "Which AWS service has built-in support for validating Nitro Enclave attestation documents?", options: ["AWS Secrets Manager can validate attestation documents when enclaves retrieve secrets", "AWS Key Management Service has built-in ability to ingest and validate attestation documents", "AWS Certificate Manager validates attestation documents when issuing certificates to enclaves", "AWS Systems Manager Parameter Store validates attestation for secure parameter retrieval"], correct: 1, explanation: "AWS KMS has built-in support for Nitro Enclave attestation. KMS can ingest attestation documents and validate PCR measurements against condition keys (kms:RecipientAttestation:ImageSha384, etc.) in key policies. This allows you to restrict KMS operations to specific enclaves based on their measurements.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/set-up-attestation.html" },
            { id: 22, question: "What processor types does Nitro Enclaves support?", options: ["Only Intel processors that include SGX (Software Guard Extensions) for hardware-based isolation", "Intel, AMD, and AWS Graviton-based EC2 instances built on the AWS Nitro System", "Only AWS Graviton processors designed specifically for secure enclave operations", "Intel and AMD x86_64 processors; ARM-based Graviton is not supported for enclaves"], correct: 1, explanation: "Nitro Enclaves is processor agnostic and is supported on most Intel, AMD, and AWS Graviton-based Amazon EC2 instance types built on the AWS Nitro System. This broad compatibility allows you to choose instance types based on workload requirements rather than enclave support limitations.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/nitro-enclave.html" },
            { id: 23, question: "How does the Nitro Hypervisor provide isolation for enclaves?", options: ["By using software virtualization to create separate memory spaces within the parent instance's memory", "By using the same Nitro Hypervisor technology that isolates EC2 instances to isolate vCPUs and memory", "By encrypting all enclave memory with a hardware key stored in the Nitro Security Chip", "By running enclaves in separate EC2 instances connected via secure local sockets"], correct: 1, explanation: "Nitro Enclaves uses the same Nitro Hypervisor technology that provides CPU and memory isolation for EC2 instances. The Nitro Hypervisor ensures that the parent instance has no access to the isolated vCPUs and memory allocated to the enclave, providing strong hardware-enforced isolation.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/nitro-enclave.html" },
            { id: 24, question: "What components does Amazon EMR encrypt when you enable in-transit encryption?", options: ["Only network traffic between EMR cluster nodes; traffic to S3 remains unencrypted", "Network traffic between nodes using TLS/SASL, and EMRFS traffic to S3 using TLS by default", "Only Hadoop RPC traffic using Kerberos; other framework traffic requires separate configuration", "Application data in memory during processing; network traffic encryption requires VPN"], correct: 1, explanation: "In-transit encryption in EMR encrypts: 1) Network traffic between cluster nodes using TLS and SASL for frameworks like Spark, Presto, Tez, and 2) EMRFS traffic to S3 which uses TLS by default regardless of in-transit encryption settings. This provides comprehensive encryption of data in motion.", docLink: "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-data-encryption.html" },
            { id: 25, question: "What is PCR3 in a Nitro Enclave attestation document?", options: ["A measurement of the application code running inside the enclave for integrity verification", "A measurement of the IAM role assigned to the parent instance for policy enforcement", "A measurement of the enclave image file signature for authenticity validation", "A measurement of the instance ID to ensure enclave runs on correct parent"], correct: 1, explanation: "PCR3 is a contiguous measurement (hash) of the IAM role assigned to the parent EC2 instance. This ensures that the attestation process succeeds only when the parent instance has the correct IAM role. It allows KMS key policies to verify not just the enclave code, but also the permissions context of the parent instance.", docLink: "https://docs.aws.amazon.com/enclaves/latest/user/set-up-attestation.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Nitro/EMR/EKS</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
