<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Config Compliance Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #f43f5e; --accent-secondary: #fb7185; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(244, 63, 94, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(244, 63, 94, 0.2); box-shadow: 0 0 0 3px rgba(244, 63, 94, 0.25), inset 0 0 12px rgba(244, 63, 94, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(244, 63, 94, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(244, 63, 94, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(244, 63, 94, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(244, 63, 94, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 6: Security Governance (14%)</span>
            <h1>AWS Config & Compliance</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is AWS Config primarily used for?", options: ["Analyzing CloudTrail logs for suspicious API calls and generating security alerts in real-time", "Recording and evaluating resource configurations against compliance rules continuously", "Managing application deployments and tracking release versions across environments", "Monitoring application performance metrics and setting up automated scaling policies"], correct: 1, explanation: "AWS Config continuously records resource configurations and evaluates them against desired configurations (rules). It provides configuration history, change tracking, and compliance assessment for AWS resources.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/WhatIsConfig.html" },
            { id: 2, question: "What is an AWS Config rule?", options: ["A Service Control Policy that restricts API calls at the organization level", "A criterion that evaluates whether resource configurations comply with desired settings", "An EventBridge pattern that routes events to targets based on matching criteria", "An IAM policy condition that controls access based on resource tags"], correct: 1, explanation: "A Config rule represents the desired configuration for a resource. AWS Config evaluates resource configurations against rules and reports compliance status. Rules can be AWS managed or custom (Lambda-based).", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config.html" },
            { id: 3, question: "What is a Conformance Pack in AWS Config?", options: ["A CloudFormation template that deploys security resources with best practice configurations", "A collection of Config rules and remediation actions deployed as a single unit", "A Security Hub integration package that aggregates findings from multiple sources", "An SSM document containing runbooks for automated incident response procedures"], correct: 1, explanation: "Conformance Packs bundle multiple Config rules and optional remediation actions into a single entity. They can be deployed across an organization and help implement compliance frameworks like CIS, PCI DSS, or HIPAA.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/conformance-packs.html" },
            { id: 4, question: "What triggers can invoke a Config rule evaluation?", options: ["CloudWatch metric thresholds and alarm state transitions based on monitoring data", "Configuration changes to resources and/or scheduled periodic evaluation intervals", "Security Hub finding severity levels and compliance status changes for controls", "GuardDuty threat intelligence updates and newly detected finding types"], correct: 1, explanation: "Config rules can be triggered by configuration changes (when a relevant resource is modified), periodically (e.g., every 24 hours), or both. Change-triggered rules evaluate faster; periodic rules catch drift.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config-rules.html" },
            { id: 5, question: "What is the difference between AWS managed and custom Config rules?", options: ["Managed rules run in AWS-managed Lambda functions; custom rules require your own Lambda infrastructure", "Managed rules are pre-built by AWS with configurable parameters; custom rules use Lambda functions you create", "Managed rules evaluate in real-time; custom rules only evaluate on a periodic schedule", "Managed rules support auto-remediation natively; custom rules require separate SSM configuration"], correct: 1, explanation: "AWS managed rules are pre-built, configurable rules for common compliance checks. Custom rules use Lambda functions you write for specific requirements. You can also use AWS Config Rule Development Kit (RDK) for custom rules.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config_develop-rules.html" },
            { id: 6, question: "What is automatic remediation in AWS Config?", options: ["Lambda functions that Config invokes to evaluate resources and return compliance results", "SSM Automation documents that automatically fix non-compliant resources when triggered", "EventBridge rules that send notifications to administrators about compliance violations", "CloudWatch alarms that trigger scaling actions when resource utilization is non-optimal"], correct: 1, explanation: "Automatic remediation uses AWS Systems Manager Automation documents (runbooks) to fix non-compliant resources. You can configure remediation actions for each rule to automatically bring resources back into compliance.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/remediation.html" },
            { id: 7, question: "What is an aggregator in AWS Config?", options: ["A CloudWatch Logs destination that combines log streams from multiple sources", "A view that collects Config data from multiple accounts and regions centrally", "An S3 bucket configuration that consolidates objects from distributed locations", "A Security Hub feature that correlates findings across multiple AWS services"], correct: 1, explanation: "A Config aggregator collects configuration and compliance data from multiple accounts and regions into a single view. This enables centralized compliance monitoring across an entire organization.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/aggregate-data.html" },
            { id: 8, question: "How long does AWS Config retain configuration history by default?", options: ["30 days for free tier accounts, with extended retention requiring S3 lifecycle policies", "90 days with automatic export to S3 Glacier for long-term archival storage", "7 years for configuration history, queryable through the timeline and Advanced Queries", "Indefinitely until manual deletion, with storage costs based on configuration item count"], correct: 2, explanation: "AWS Config retains configuration history for 7 years by default. You can query historical configurations using the Config timeline and use Advanced Queries to analyze configuration data across your organization.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/view-compliance-history.html" },
            { id: 9, question: "What is proactive evaluation mode in Config rules?", options: ["Evaluating resource configurations before deployment via CloudFormation Guard integration", "Evaluating resources immediately after creation with near real-time compliance checks", "Predicting future compliance violations based on historical configuration patterns", "Estimating the compliance impact of proposed configuration changes before applying"], correct: 0, explanation: "Proactive evaluation mode evaluates resource configurations BEFORE they are deployed (during CloudFormation deployment). This prevents non-compliant resources from being created, complementing detective rules.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config_components.html" },
            { id: 10, question: "What are Organization Config rules?", options: ["Config rules that evaluate AWS Organizations policies and SCP compliance status", "Config rules deployed from management account across all accounts in an Organization", "Config rules specifically designed to evaluate multi-account resource dependencies", "Config rules that require delegated administrator permissions to create and manage"], correct: 1, explanation: "Organization Config rules are deployed from a management or delegated administrator account to all accounts in an organization. They ensure consistent compliance evaluation across your entire AWS environment.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/config-rule-multi-account-deployment.html" },
            { id: 11, question: "What is the Config recorder responsible for?", options: ["Capturing CloudTrail API events and correlating them with configuration changes", "Recording resource configuration changes and storing them in configuration history", "Logging Config rule evaluation results and remediation action outcomes over time", "Tracking compliance score changes and generating trend reports for dashboards"], correct: 1, explanation: "The Config recorder captures resource configuration changes and stores them in the configuration history. You can customize which resource types to record. The recorder must be running for Config to work.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/stop-start-recorder.html" },
            { id: 12, question: "What is a remediation exception in AWS Config?", options: ["A configuration error that prevents remediation actions from completing successfully", "A temporary exemption for specific resources from compliance requirements and remediation", "A fallback remediation action that runs when the primary remediation fails", "An override that allows manual remediation instead of automatic SSM execution"], correct: 1, explanation: "Remediation exceptions allow you to temporarily exempt specific resources from compliance requirements and remediation actions. This is useful for resources undergoing planned maintenance or with approved exceptions.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/remediation.html" },
            { id: 13, question: "What AWS service can you use to automatically respond to Config compliance changes?", options: ["AWS Lambda with scheduled CloudWatch Events rules polling for compliance status changes", "Amazon EventBridge with rules matching Config compliance change event patterns", "AWS Step Functions with state machines that periodically query Config API endpoints", "Amazon SNS with filter policies that route compliance notifications to subscribers"], correct: 1, explanation: "Amazon EventBridge receives Config compliance change events, allowing you to trigger automated responses like Lambda functions, Step Functions, or SNS notifications when resources become non-compliant.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/monitor-config-with-cloudwatchevents.html" },
            { id: 14, question: "What is the relationship between AWS Config and Security Hub?", options: ["Config provides the rule engine that powers all Security Hub compliance standard checks", "Security Hub aggregates Config compliance findings alongside other security service findings", "Config and Security Hub use separate evaluation mechanisms with no data sharing", "Security Hub replaces Config for organizations using consolidated security monitoring"], correct: 1, explanation: "Security Hub integrates with Config to aggregate compliance data. Config rules can power Security Hub security standards, and Security Hub provides a unified dashboard showing Config compliance alongside other security findings.", docLink: "https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-standards-fsbp-controls.html" },
            { id: 15, question: "What is the maximum number of AWS Config rules per Region per account?", options: ["50 rules with options to request increases through AWS Support for larger workloads", "150 rules which is sufficient for most compliance frameworks when combined efficiently", "400 rules as the default soft limit which can be increased through service quota requests", "1000 rules per Region per account, which is a hard limit that cannot be increased"], correct: 3, explanation: "The maximum is 1000 AWS Config rules per Region per account, and this limit cannot be increased. Organization-wide rules deployed via conformance packs count toward this limit for each member account. Plan your rule strategy carefully for large organizations.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/configlimits.html" },
            { id: 16, question: "What is Config's Advanced Query feature?", options: ["A natural language interface powered by Amazon Bedrock for querying configurations", "SQL-based querying of current resource configurations across accounts and regions", "A graph database that maps resource relationships and dependency chains visually", "A machine learning feature that predicts compliance drift based on historical patterns"], correct: 1, explanation: "Advanced Query lets you use SQL to query current configuration data across accounts and regions. You can find resources matching specific criteria, analyze relationships, and export results. Useful for inventory and compliance analysis.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/querying-AWS-resources.html" },
            { id: 17, question: "Where does AWS Config store configuration snapshots and history?", options: ["In Config's managed internal database with optional replication to customer-owned storage", "In an S3 bucket you specify during Config setup for durable long-term retention", "In Amazon DynamoDB tables that Config creates automatically in your account", "In CloudWatch Logs with configurable log groups and retention period settings"], correct: 1, explanation: "Config delivers configuration snapshots and history to an S3 bucket you specify. This provides durable, long-term storage of your configuration data for compliance and audit purposes. You can also enable SNS notifications.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/gs-console.html" },
            { id: 18, question: "What compliance frameworks have AWS-authored Conformance Packs?", options: ["SOC 2 framework with additional frameworks available through AWS Marketplace partners", "CIS Benchmarks, PCI DSS, HIPAA, NIST 800-53, and AWS operational best practices", "HIPAA and PCI DSS with other frameworks requiring custom rule development", "AWS Well-Architected Framework pillars mapped to Config rules for assessments"], correct: 1, explanation: "AWS provides Conformance Pack templates for major compliance frameworks including CIS Benchmarks, PCI DSS, HIPAA, NIST 800-53, and AWS Operational Best Practices. These can be deployed as-is or customized.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/conformancepack-sample-templates.html" },
            { id: 19, question: "What happens when a Config rule evaluation returns NON_COMPLIANT?", options: ["Config immediately blocks API calls that would modify the non-compliant resource", "The compliance status is recorded in the timeline with optional remediation triggering", "The resource is quarantined and access is restricted until remediation completes", "An incident is created in AWS Systems Manager OpsCenter for manual investigation"], correct: 1, explanation: "When a resource is NON_COMPLIANT, Config records this status in the compliance timeline. If you've configured remediation, it can be triggered automatically or manually. EventBridge can also trigger custom responses.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config_view-compliance.html" },
            { id: 20, question: "What is the relationship between AWS Config and AWS CloudTrail?", options: ["Config analyzes CloudTrail logs to detect configuration changes made via API calls", "Config records configurations; CloudTrail records API calls - together providing complete audit visibility", "CloudTrail triggers Config rule evaluations whenever API calls modify resource configurations", "Config and CloudTrail share a common data store for unified compliance and audit queries"], correct: 1, explanation: "Config and CloudTrail are complementary: Config records WHAT the resource configuration is over time, while CloudTrail records WHO made changes and WHEN via API calls. Together they provide complete audit visibility.", docLink: "https://docs.aws.amazon.com/config/latest/developerguide/WhatIsConfig.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Config & Compliance</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
