<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CloudWatch Logs & SNS Data Protection Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #f59e0b; --accent-secondary: #fbbf24; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(245, 158, 11, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(245, 158, 11, 0.2); box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.25), inset 0 0 12px rgba(245, 158, 11, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(245, 158, 11, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(245, 158, 11, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(245, 158, 11, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(245, 158, 11, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(245, 158, 11, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(245, 158, 11, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(245, 158, 11, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 5: Data Protection (26%)</span>
            <h1>üîí CloudWatch Logs & SNS Data Protection</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">25</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">62:30</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">25</span></span>
                    <span class="timer" id="timer">62:30</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What encryption standard does CloudWatch Logs use by default for log data at rest?", options: ["Server-side encryption with 256-bit Advanced Encryption Standard Galois/Counter Mode (AES-GCM) managed by CloudWatch Logs service", "Server-side encryption with 128-bit AES-CBC using AWS managed keys from AWS Key Management Service", "Client-side encryption requiring customers to encrypt log data before sending it to CloudWatch Logs", "No encryption by default; customers must explicitly enable encryption using AWS KMS customer managed keys"], correct: 0, explanation: "CloudWatch Logs automatically encrypts all log group data at rest using server-side encryption with 256-bit AES-GCM. This encryption is always enabled and cannot be disabled. Customers can optionally use AWS KMS keys for additional control over encryption keys.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/data-protection.html" },
            { id: 2, question: "When you associate an AWS KMS key with a CloudWatch Logs log group, which log data gets encrypted with that key?", options: ["Only newly ingested log data after KMS key association; existing log data remains encrypted with default CloudWatch encryption", "All log data in the log group including historical data is re-encrypted with the new KMS key automatically", "Only log data exported to S3 is encrypted with the KMS key; data stored in CloudWatch uses default encryption", "All log data in the log group regardless of ingestion time; CloudWatch immediately re-encrypts historical data"], correct: 0, explanation: "When you associate a KMS key with a log group, only newly ingested data after the association is encrypted using that key. Previously ingested data remains encrypted with whatever method was used when it was ingested (either default CloudWatch encryption or a previous KMS key).", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html" },
            { id: 3, question: "A security team wants to prevent log group administrators from deleting log data while still allowing CloudWatch Logs to decrypt logs for viewing. What is the minimum KMS key policy permission CloudWatch Logs requires?", options: ["Only kms:Decrypt permission is needed for CloudWatch Logs to decrypt and display log data to authorized users", "CloudWatch Logs requires kms:Encrypt, kms:Decrypt, kms:ReEncrypt*, kms:GenerateDataKey*, and kms:Describe* permissions for full functionality", "Only kms:GenerateDataKey permission is required since CloudWatch uses envelope encryption for all operations", "CloudWatch Logs requires kms:CreateGrant permission to delegate decryption capabilities to log group administrators"], correct: 1, explanation: "CloudWatch Logs requires kms:Encrypt (for ingesting new logs), kms:Decrypt (for reading logs), kms:ReEncrypt* (for key rotation), kms:GenerateDataKey* (for envelope encryption), and kms:Describe* (for key metadata) permissions. These permissions should be granted to the logs.region.amazonaws.com service principal in the KMS key policy.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html" },
            { id: 4, question: "What happens to log data encrypted with a KMS key if you later disassociate that key from the log group?", options: ["All log data including historical logs is immediately re-encrypted with default CloudWatch encryption for continuity", "Previously encrypted data remains encrypted with the KMS key and can still be read; new logs use default encryption", "All encrypted log data becomes inaccessible until you associate a new KMS key with the log group", "CloudWatch automatically migrates encrypted data to default encryption over a 24-hour transition period"], correct: 1, explanation: "After disassociating a KMS key, CloudWatch Logs can still read previously encrypted data as long as the key remains enabled and CloudWatch has permissions. Newly ingested data uses the default CloudWatch Logs encryption method. However, if the KMS key is later disabled or deleted, previously encrypted logs become unreadable.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html" },
            { id: 5, question: "CloudWatch Logs now supports encryption context. What encryption context key does CloudWatch Logs use for KMS operations?", options: ["kms:EncryptionContext:aws:logs:arn as the key with the log group ARN as the value for enhanced security", "kms:EncryptionContext:cloudwatch:loggroup as the key with the log group name as the value for identification", "kms:EncryptionContext:aws:service with 'logs.amazonaws.com' as the value for service-level identification", "CloudWatch Logs does not use encryption context; it relies solely on kms:ViaService condition for security"], correct: 0, explanation: "CloudWatch Logs uses kms:EncryptionContext:aws:logs:arn as the encryption context key, with the log group ARN as the value. This allows you to restrict a KMS key to be used only with specific log groups by adding a condition to the key policy. This enhances security by preventing the key from being used with unintended log groups.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html" },
            { id: 6, question: "What type of KMS keys does CloudWatch Logs support for log group encryption?", options: ["CloudWatch Logs supports both symmetric and asymmetric KMS keys for flexible encryption architectures", "CloudWatch Logs supports only symmetric KMS keys; asymmetric keys are not supported for log encryption", "CloudWatch Logs supports only asymmetric KMS keys for enhanced security with public-private key pairs", "CloudWatch Logs supports symmetric keys for encryption and asymmetric keys for digital signatures"], correct: 1, explanation: "CloudWatch Logs supports only symmetric KMS keys for encrypting log data. Asymmetric keys are not supported. This is because CloudWatch Logs uses envelope encryption, which requires symmetric encryption for performance and compatibility with the service architecture.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html" },
            { id: 7, question: "How does CloudWatch Logs data protection help safeguard sensitive information in log events?", options: ["It automatically redacts all sensitive data using predefined patterns without requiring policy configuration", "It uses data protection policies with data identifiers to audit and mask sensitive data using machine learning and pattern matching", "It encrypts individual sensitive fields within log events using field-level encryption with KMS keys", "It routes sensitive log events to separate encrypted log groups automatically based on content analysis"], correct: 1, explanation: "CloudWatch Logs data protection uses data protection policies that define data identifiers (managed or custom) to detect sensitive data using machine learning and pattern matching. When detected, the policy can audit findings and mask sensitive data at egress points. Policies can be applied account-wide or per log group.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/mask-sensitive-log-data.html" },
            { id: 8, question: "Where is sensitive data masked when a CloudWatch Logs data protection policy is configured?", options: ["Only in CloudWatch Logs Insights queries; other access methods like GetLogEvents API show unmasked data", "At all egress points including CloudWatch Logs Insights, metric filters, and subscription filters for comprehensive protection", "Only in exported log files sent to S3; data viewed within CloudWatch console remains unmasked", "Only in cross-account log sharing scenarios; data accessed within the same account is not masked"], correct: 1, explanation: "When you create a data protection policy, sensitive data matching your data identifiers is masked by default at all egress points: CloudWatch Logs Insights queries, metric filters, subscription filters, and log exports. Only users with the logs:Unmask IAM permission can view unmasked data.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/mask-sensitive-log-data.html" },
            { id: 9, question: "A security engineer needs to allow specific compliance auditors to view unmasked sensitive data in CloudWatch Logs. What IAM permission must be granted?", options: ["The logs:GetLogEvents permission with a resource-based policy condition allowing unmasked access", "The logs:Unmask permission which specifically allows users to view unmasked sensitive data in protected log groups", "The logs:DescribeLogGroups permission with kms:Decrypt for the associated KMS key used for masking", "The cloudwatch:UnmaskSensitiveData permission combined with logs:FilterLogEvents for query access"], correct: 1, explanation: "Only users with the logs:Unmask IAM permission can view unmasked data in log groups with data protection policies. Without this permission, users see masked data at all egress points. This allows granular control over who can see sensitive information while still allowing broad access to logs for troubleshooting.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/mask-sensitive-log-data.html" },
            { id: 10, question: "What types of data identifiers can you use in CloudWatch Logs data protection policies?", options: ["Only AWS managed data identifiers provided by CloudWatch Logs for common sensitive data types", "Both managed data identifiers for common types and custom data identifiers using regex patterns for specific use cases", "Only custom data identifiers since each organization has unique sensitive data patterns to protect", "Only machine learning-based identifiers that automatically learn sensitive patterns from your log data"], correct: 1, explanation: "CloudWatch Logs data protection supports both managed data identifiers (preconfigured for common types like credit cards, SSNs, AWS keys) and custom data identifiers (user-defined regex patterns for organization-specific sensitive data). This combination provides flexibility to protect both standard and custom sensitive data types.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/mask-sensitive-log-data.html" },
            { id: 11, question: "When does CloudWatch Logs detect and mask sensitive data in log events?", options: ["Sensitive data is detected and masked when log events are ingested into the log group in real-time", "Sensitive data is detected during queries and masked on-the-fly when users access the log data", "Sensitive data is detected hourly by batch processing jobs and masked retroactively in stored logs", "Sensitive data is detected only when logs are exported to S3 or delivered to subscription destinations"], correct: 0, explanation: "Sensitive data is detected and masked when log events are ingested into the log group. This means only log events ingested after you set a data protection policy are masked. Log events already in the log group before the policy was created are not masked. Detection and masking happen in real-time during ingestion.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/mask-sensitive-log-data.html" },
            { id: 12, question: "What metric does CloudWatch Logs emit when sensitive data matching data protection policy identifiers is detected?", options: ["SensitiveDataDetected metric in the AWS/Logs namespace with dimensions for log group and data identifier type", "LogEventsWithFindings metric in the AWS/Logs namespace which is a free vended metric for monitoring detections", "DataProtectionViolations metric in the CloudWatch/Security namespace for centralized security monitoring", "MaskedLogEvents metric in the AWS/DataProtection namespace with counts of masked log entries per identifier"], correct: 1, explanation: "CloudWatch Logs emits the LogEventsWithFindings metric in the AWS/Logs namespace when sensitive data is detected. This is a vended metric (free of charge) that you can use to create CloudWatch alarms and visualize detection patterns. It helps you monitor how often sensitive data appears in your logs.", docLink: "https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/mask-sensitive-log-data.html" },
            { id: 13, question: "What is the purpose of Amazon SNS message data protection?", options: ["To encrypt SNS topic messages at rest using AWS KMS keys for enhanced data security in storage", "To audit, mask, redact, or block sensitive data in SNS messages using data protection policies for compliance", "To validate message signatures and prevent unauthorized publishers from sending messages to topics", "To compress large messages and reduce data transfer costs when delivering notifications to subscribers"], correct: 1, explanation: "SNS message data protection safeguards data published to SNS topics by scanning messages for PII and PHI using data identifiers. It can audit sensitive data (log findings), de-identify data (mask/redact), or deny delivery (block) if sensitive data is present. This helps prevent data leakage and ensures compliance with privacy regulations like HIPAA, GDPR, and PCI.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/message-data-protection.html" },
            { id: 14, question: "Which SNS topic types support message data protection policies?", options: ["Both standard and FIFO topics support message data protection with the same capabilities and operations", "Only standard topics support message data protection; FIFO topics do not support this feature currently", "Only FIFO topics support message data protection due to strict message ordering requirements", "Message data protection is automatically enabled for all topic types and cannot be disabled"], correct: 1, explanation: "Amazon SNS supports message data protection only for standard topics. FIFO topics do not support message data protection policies. This limitation is important to consider when designing architectures that require both ordered message delivery and sensitive data protection.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/message-data-protection.html" },
            { id: 15, question: "What are the three operations available in SNS message data protection policies?", options: ["Encrypt (apply KMS encryption), Decrypt (remove encryption), and Archive (store in S3 for compliance)", "Audit (log findings to destinations), De-identify (mask or redact data), and Deny (block message delivery)", "Filter (remove sensitive fields), Transform (replace with tokens), and Forward (route to secure topics)", "Detect (identify sensitive data), Alert (send notifications), and Quarantine (move to isolation queue)"], correct: 1, explanation: "SNS message data protection supports three operations: Audit (samples and logs findings to CloudWatch/S3/Firehose), De-identify (masks or redacts sensitive data without interrupting delivery), and Deny (blocks message delivery if sensitive data is present). Each operation serves different compliance and security needs.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-policies.html" },
            { id: 16, question: "When configuring an SNS message data protection Audit operation, what is the maximum sample rate you can specify?", options: ["The maximum sample rate is 50% to balance security monitoring with performance and cost considerations", "The maximum sample rate is 99% allowing audit of nearly all messages while maintaining system performance", "The maximum sample rate is 100% to ensure every single message containing sensitive data is logged", "The maximum sample rate is 75% as recommended by AWS for optimal balance of coverage and overhead"], correct: 1, explanation: "The Audit operation supports a sample rate from 0 to 99 (representing percentage). A sample rate of 99 means 99% of messages are audited. You cannot set it to 100%. This sampling approach balances comprehensive monitoring with performance and cost, as each audit creates log entries in your destinations.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-operations.html" },
            { id: 17, question: "Which AWS services can be used as destinations for SNS message data protection audit findings?", options: ["Only Amazon CloudWatch Logs with log group names starting with /aws/vendedlogs/ for audit findings", "CloudWatch Logs (with /aws/vendedlogs/ prefix), Amazon Data Firehose (Direct PUT), and Amazon S3 buckets", "Only Amazon S3 buckets with versioning enabled and server-side encryption using AWS KMS keys", "CloudWatch Logs, Amazon EventBridge, and AWS Security Hub for centralized security monitoring"], correct: 1, explanation: "SNS message data protection audit findings can be sent to three destinations: CloudWatch Logs (log group must start with /aws/vendedlogs/), Amazon Data Firehose (must have Direct PUT as source), or Amazon S3 buckets. Each destination type requires specific permissions and configurations. You can configure both FindingsDestination (when sensitive data is found) and NoFindingsDestination (when no sensitive data is found).", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-operations.html" },
            { id: 18, question: "What determines the DataDirection in an SNS data protection policy statement?", options: ["DataDirection is 'Inbound' for Publish API requests and 'Outbound' for notification deliveries to subscribers", "DataDirection is 'Ingress' for messages from external sources and 'Egress' for messages to AWS services", "DataDirection is 'Publisher' for IAM principals publishing messages and 'Subscriber' for receiving endpoints", "DataDirection is 'Upstream' for messages entering topics and 'Downstream' for messages leaving topics"], correct: 0, explanation: "In SNS data protection policies, DataDirection is 'Inbound' with respect to the SNS topic (i.e., Publish API requests) or 'Outbound' (i.e., notification deliveries to subscribers). This allows you to apply different protection rules for messages being published versus messages being delivered, providing granular control over data protection.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-policies.html" },
            { id: 19, question: "How many data protection policies can be attached to a single SNS topic?", options: ["Up to 5 data protection policies per topic to handle different types of sensitive data independently", "Only 1 data protection policy per topic, but it can contain multiple statements with different operations", "Up to 10 data protection policies with automatic priority ordering based on policy creation timestamp", "Unlimited policies per topic as long as total JSON policy size does not exceed 20KB limit"], correct: 1, explanation: "Only one data protection policy can be defined per SNS topic. However, that single policy can have one or more deny or de-identify statements, but only one audit statement. This structure requires careful planning to include all necessary protections in the single policy document.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-policies.html" },
            { id: 20, question: "What categories of sensitive data can SNS message data protection detect using managed data identifiers?", options: ["Only financial data like credit card numbers and bank account numbers for PCI DSS compliance", "Credentials, financial information, PII (like SSNs and driver's licenses), PHI (health data), and device identifiers", "Only protected health information (PHI) for HIPAA compliance and personally identifiable information for GDPR", "Only AWS-specific sensitive data like access keys, secret keys, and account IDs for security"], correct: 1, explanation: "SNS message data protection with managed data identifiers can detect multiple categories: Credentials (AWS keys, private keys), Financial information (credit cards, bank accounts), PII (SSNs, driver's licenses, passport numbers), PHI (medical IDs, prescription codes), and Device identifiers (IP addresses, MAC addresses). This comprehensive coverage supports various compliance requirements.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-sensitive-data-types-pii.html" },
            { id: 21, question: "How does Amazon SNS encrypt messages at rest using server-side encryption?", options: ["SNS uses S3-managed encryption keys since messages are temporarily stored in S3 buckets before delivery", "SNS uses AWS Key Management Service (KMS) keys to encrypt message content at rest in SNS topics", "SNS does not encrypt messages at rest; encryption is only applied in transit using TLS connections", "SNS automatically uses Amazon RDS encryption since message metadata is stored in managed databases"], correct: 1, explanation: "Amazon SNS supports server-side encryption (SSE) for messages at rest using AWS KMS keys. You can use the AWS managed key (alias/aws/sns) or customer managed KMS keys. Encryption is transparent to subscribers - SNS automatically decrypts messages before delivery. For optimal security, AWS recommends enabling HTTPS for all endpoints to ensure secure transmission.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-enable-encryption-for-topic.html" },
            { id: 22, question: "When you enable SNS topic encryption with a custom KMS key, what permissions must be granted in the key policy?", options: ["Only kms:Decrypt permission for SNS service principal to decrypt messages during delivery to subscribers", "The sns.amazonaws.com service principal needs kms:Decrypt and kms:GenerateDataKey with appropriate conditions", "Only kms:Encrypt permission for publishers to encrypt messages when calling the Publish API", "No special permissions needed; SNS automatically updates KMS key policies when encryption is enabled"], correct: 1, explanation: "For custom KMS keys, the key policy must grant the sns.amazonaws.com service principal permissions for kms:Decrypt and kms:GenerateDataKey. Best practice is to include conditions like aws:SourceArn to limit the key to specific SNS topics and kms:EncryptionContext:aws:sns:topicArn to ensure the key is used only with intended topics.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-enable-encryption-for-topic.html" },
            { id: 23, question: "What IAM permissions are required to create an SNS data protection policy with audit destinations?", options: ["Only sns:PutDataProtectionPolicy permission is required since SNS handles all destination configuration automatically", "Permissions for logs:CreateLogDelivery, logs:PutResourcePolicy, firehose:TagDeliveryStream, and s3:PutBucketPolicy depending on destinations", "Only kms:Encrypt and kms:GenerateDataKey permissions to encrypt audit findings before sending to destinations", "No additional permissions needed beyond sns:CreateTopic since audit destinations are configured separately"], correct: 1, explanation: "Creating an SNS data protection policy with audit destinations requires multiple permissions: logs:CreateLogDelivery and logs:PutResourcePolicy for CloudWatch Logs destinations, firehose:TagDeliveryStream for Firehose destinations, and s3:PutBucketPolicy for S3 destinations. Additional permissions may be needed if S3 buckets use SSE-KMS encryption.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-operations.html" },
            { id: 24, question: "What is the difference between masking and redacting in SNS message data protection de-identify operations?", options: ["Masking replaces sensitive data with asterisks or hash values; redacting completely removes sensitive data from messages", "Masking encrypts sensitive data with KMS keys; redacting replaces it with tokenized placeholders for later lookup", "Masking hides data from subscribers but keeps it in audit logs; redacting removes it everywhere including logs", "There is no difference; both terms refer to the same operation of replacing sensitive data with placeholder characters"], correct: 0, explanation: "In SNS message data protection, masking typically replaces sensitive characters with asterisks or other characters (e.g., 4111-****-****-1111 for credit cards), while redacting removes the sensitive data entirely. Both are de-identify operations that modify message content without blocking delivery, but they differ in how the sensitive data is obscured.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-operations.html" },
            { id: 25, question: "A company needs to prevent any SNS messages containing credit card numbers from being delivered. Which data protection operation should they configure?", options: ["Configure an Audit operation with high sample rate to log all messages with credit card numbers for review", "Configure a De-identify operation with redact action to remove credit card numbers before message delivery", "Configure a Deny operation to block the transmission of messages containing credit card numbers entirely", "Configure a Filter operation in the subscription filter policy to reject messages with numeric patterns"], correct: 2, explanation: "The Deny operation blocks the entire Publish API request or fails message delivery when sensitive data matching the data identifiers is present in the payload. This is the appropriate choice when you need to completely prevent transmission of messages containing specific sensitive data like credit cards. Audit logs findings but allows delivery, and De-identify modifies but still delivers messages.", docLink: "https://docs.aws.amazon.com/sns/latest/dg/sns-message-data-protection-operations.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">CW Logs & SNS</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
