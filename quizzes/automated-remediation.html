<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated Remediation Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #141b2d;
            --bg-tertiary: #1a2236;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --accent-primary: #f59e0b;
            --accent-secondary: #fbbf24;
            --success: #22c55e;
            --error: #ef4444;
            --warning: #eab308;
            --info: #3b82f6;
            --border: #2d3a52;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; }
        .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); }
        .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; }
        .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(245, 158, 11, 0.1); }
        .option.selected { border-color: var(--accent-primary); background: rgba(245, 158, 11, 0.15); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; transition: all 0.2s ease; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(245, 158, 11, 0.1); border-radius: 6px; transition: background 0.2s ease; }
        .doc-link:hover { background: rgba(245, 158, 11, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); }
        .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); }
        .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; }
        .breakdown-value { font-size: 2rem; font-weight: 700; }
        .breakdown-value.correct { color: var(--success); }
        .breakdown-value.incorrect { color: var(--error); }
        .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(245, 158, 11, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector { flex-direction: column; } .btn-container { flex-direction: column; } .results-breakdown { flex-direction: column; gap: 1.5rem; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 2: Incident Response</span>
            <h1>‚ö° Automated Remediation</h1>
            <p class="subtitle">EventBridge, Lambda, Step Functions & Systems Manager</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            {
                id: 1,
                question: "Which AWS service is the primary event bus for triggering automated security responses?",
                options: [
                    "Amazon SQS",
                    "Amazon EventBridge",
                    "Amazon SNS",
                    "AWS Step Functions"
                ],
                correct: 1,
                explanation: "Amazon EventBridge (formerly CloudWatch Events) is the primary event bus for building event-driven architectures. It receives events from AWS services, SaaS applications, and custom sources, allowing you to create rules that trigger automated responses to security events.",
                docLink: "https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-what-is.html"
            },
            {
                id: 2,
                question: "How can Security Hub findings trigger automated remediation?",
                options: [
                    "Security Hub cannot trigger automation",
                    "Through EventBridge rules that match Security Hub finding events",
                    "Only through manual actions in the console",
                    "By directly calling Lambda functions"
                ],
                correct: 1,
                explanation: "Security Hub automatically sends findings to EventBridge. You can create EventBridge rules that match specific finding patterns (by severity, product, resource type, etc.) and trigger targets like Lambda functions, Step Functions, or SNS topics for automated remediation.",
                docLink: "https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-cloudwatch-events.html"
            },
            {
                id: 3,
                question: "What are Security Hub 'custom actions' used for?",
                options: [
                    "Creating custom security controls",
                    "Sending selected findings to EventBridge for manual-triggered automation",
                    "Modifying finding severity",
                    "Creating custom dashboards"
                ],
                correct: 1,
                explanation: "Security Hub custom actions allow you to manually send selected findings to EventBridge. Unlike automatic rules, custom actions let analysts choose which findings to process, enabling human-in-the-loop automation workflows.",
                docLink: "https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-cwe-custom-actions.html"
            },
            {
                id: 4,
                question: "Which AWS service is best for orchestrating complex, multi-step remediation workflows?",
                options: [
                    "AWS Lambda alone",
                    "AWS Step Functions",
                    "Amazon SQS",
                    "AWS Config"
                ],
                correct: 1,
                explanation: "AWS Step Functions is ideal for orchestrating complex, multi-step remediation workflows. It can coordinate Lambda functions, wait for human approval, handle errors, and maintain state across long-running processes. It's particularly useful for incident response runbooks.",
                docLink: "https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html"
            },
            {
                id: 5,
                question: "What is an AWS Systems Manager Automation runbook?",
                options: [
                    "A logging configuration file",
                    "A document that defines automated operational tasks like remediation actions",
                    "A network configuration template",
                    "A security policy document"
                ],
                correct: 1,
                explanation: "Systems Manager Automation runbooks (documents) define automated operational tasks. They can include steps for remediation actions like patching instances, modifying security groups, rotating credentials, and more. AWS provides pre-built runbooks and you can create custom ones.",
                docLink: "https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-automation.html"
            },
            {
                id: 6,
                question: "How can you automatically remediate non-compliant AWS Config rules?",
                options: [
                    "AWS Config cannot trigger remediation",
                    "Using AWS Config remediation actions with Systems Manager Automation runbooks",
                    "Only through manual intervention",
                    "By restarting the affected resources"
                ],
                correct: 1,
                explanation: "AWS Config supports automatic remediation through integration with Systems Manager Automation. When a resource becomes non-compliant, Config can automatically execute a remediation action defined by a Systems Manager runbook to bring it back into compliance.",
                docLink: "https://docs.aws.amazon.com/config/latest/developerguide/remediation.html"
            },
            {
                id: 7,
                question: "What targets can an EventBridge rule invoke for security automation?",
                options: [
                    "Only Lambda functions",
                    "Lambda, Step Functions, SNS, SQS, Kinesis, EC2 actions, and more",
                    "Only SNS topics",
                    "Only AWS Support tickets"
                ],
                correct: 1,
                explanation: "EventBridge rules can invoke many targets: Lambda functions, Step Functions state machines, SNS topics, SQS queues, Kinesis streams, ECS tasks, EC2 actions (terminate, stop, reboot), Systems Manager Run Command, and even cross-account targets.",
                docLink: "https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-targets.html"
            },
            {
                id: 8,
                question: "What is the 'Automated Security Response on AWS' solution?",
                options: [
                    "A commercial AWS service",
                    "An AWS Solutions Implementation that automates Security Hub finding remediation",
                    "A third-party security tool",
                    "A training course"
                ],
                correct: 1,
                explanation: "Automated Security Response on AWS is an AWS Solutions Implementation that provides pre-built playbooks for remediating Security Hub findings. It uses Step Functions, Lambda, and Systems Manager to automate responses to common security issues across multiple compliance frameworks.",
                docLink: "https://docs.aws.amazon.com/solutions/latest/automated-security-response-on-aws/playbooks.html"
            },
            {
                id: 9,
                question: "Which Lambda permission model is recommended for security automation functions?",
                options: [
                    "Full administrative access",
                    "Least privilege IAM roles with only required permissions",
                    "No IAM role needed",
                    "Using root account credentials"
                ],
                correct: 1,
                explanation: "Security automation Lambda functions should use least privilege IAM roles. Grant only the specific permissions needed for the remediation actions, and consider using resource-based conditions to limit which resources the function can modify.",
                docLink: "https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html"
            },
            {
                id: 10,
                question: "How can you test security automation without affecting production resources?",
                options: [
                    "Testing isn't possible for security automation",
                    "Use separate test accounts, dry-run modes, and staged rollouts",
                    "Test directly in production",
                    "Only use manual testing"
                ],
                correct: 1,
                explanation: "Test security automation using: separate test/sandbox AWS accounts, dry-run or simulation modes in runbooks, staged rollouts starting with low-risk resources, comprehensive logging, and game day exercises. Never test untested automation in production.",
                docLink: "https://docs.aws.amazon.com/systems-manager/latest/userguide/automation-action-branch.html"
            },
            {
                id: 11,
                question: "What is AWS Systems Manager Incident Manager used for?",
                options: [
                    "Managing IAM users",
                    "Automating incident response with runbooks, escalation, and collaboration",
                    "Monitoring EC2 performance",
                    "Creating CloudFormation stacks"
                ],
                correct: 1,
                explanation: "Systems Manager Incident Manager helps prepare for and respond to incidents. It provides response plans with predefined runbooks, automatic escalation, and collaboration tools. It integrates with CloudWatch alarms and EventBridge to automatically create incidents.",
                docLink: "https://docs.aws.amazon.com/incident-manager/latest/userguide/what-is-incident-manager.html"
            },
            {
                id: 12,
                question: "How can GuardDuty findings trigger automated containment?",
                options: [
                    "GuardDuty automatically contains threats",
                    "Through EventBridge rules that invoke Lambda functions to implement containment",
                    "GuardDuty cannot trigger automation",
                    "Only through AWS Support intervention"
                ],
                correct: 1,
                explanation: "GuardDuty publishes findings to EventBridge. You can create rules that match high-severity findings and trigger Lambda functions that implement containment actions like isolating EC2 instances, revoking IAM credentials, or blocking IP addresses in WAF.",
                docLink: "https://docs.aws.amazon.com/guardduty/latest/ug/guardduty_findings_cloudwatch.html"
            },
            {
                id: 13,
                question: "What should be included in an automated remediation workflow for credential compromise?",
                options: [
                    "Only password reset",
                    "Deactivate credentials, review recent activity, notify security team, and assess blast radius",
                    "Delete the entire IAM user",
                    "Wait for the user to report the issue"
                ],
                correct: 1,
                explanation: "Automated credential compromise remediation should: deactivate/rotate compromised credentials, capture and review recent CloudTrail activity, notify the security team, assess the blast radius of potential unauthorized access, and document actions for post-incident review.",
                docLink: "https://docs.aws.amazon.com/whitepapers/latest/aws-security-incident-response-guide/operations.html"
            },
            {
                id: 14,
                question: "What is the benefit of using Step Functions over Lambda alone for remediation?",
                options: [
                    "Step Functions is faster",
                    "Step Functions provides state management, error handling, and workflow visibility",
                    "Lambda cannot be used for remediation",
                    "Step Functions is less expensive"
                ],
                correct: 1,
                explanation: "Step Functions provides: visual workflow representation, built-in error handling and retry logic, state management across multiple steps, support for human approval steps (using Callback patterns), long-running process support, and detailed execution history for auditing.",
                docLink: "https://docs.aws.amazon.com/step-functions/latest/dg/concepts-standard-vs-express.html"
            },
            {
                id: 15,
                question: "How can you implement a human approval step in automated remediation?",
                options: [
                    "Automated remediation cannot include human approval",
                    "Use Step Functions with a Task state that waits for a callback from SNS/email",
                    "Only through console access",
                    "By stopping the Lambda function"
                ],
                correct: 1,
                explanation: "Step Functions supports callback patterns where a Task state pauses execution and waits for an external signal (callback). You can send approval requests via SNS/email and resume the workflow when approved, enabling human-in-the-loop automation.",
                docLink: "https://docs.aws.amazon.com/step-functions/latest/dg/connect-to-resource.html#connect-wait-token"
            },
            {
                id: 16,
                question: "What is an EventBridge 'event pattern'?",
                options: [
                    "A visual representation of event flow",
                    "A JSON structure that defines which events trigger a rule",
                    "A schedule expression",
                    "A logging format"
                ],
                correct: 1,
                explanation: "An EventBridge event pattern is a JSON structure that defines which events match a rule. For security automation, you can match on source (aws.securityhub), detail-type, severity, finding types, resource IDs, and other attributes to precisely target specific security events.",
                docLink: "https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html"
            },
            {
                id: 17,
                question: "Which service provides pre-built automation runbooks for common remediation tasks?",
                options: [
                    "Amazon S3",
                    "AWS Systems Manager (AWS-managed documents)",
                    "Amazon CloudWatch",
                    "AWS Lambda"
                ],
                correct: 1,
                explanation: "AWS Systems Manager provides AWS-managed Automation documents (runbooks) for common operational tasks including security remediation. Examples include AWS-DisablePublicAccessForSecurityGroup, AWS-RevokeUnusedIAMUserCredentials, and many others.",
                docLink: "https://docs.aws.amazon.com/systems-manager-automation-runbooks/latest/userguide/automation-ref.html"
            },
            {
                id: 18,
                question: "How should you log and monitor automated remediation actions?",
                options: [
                    "Logging isn't necessary for automation",
                    "Use CloudWatch Logs, CloudTrail, and custom metrics to track all actions",
                    "Only log failures",
                    "Use console access logs only"
                ],
                correct: 1,
                explanation: "Comprehensive logging is essential: use CloudWatch Logs for Lambda and Step Functions execution, CloudTrail for API calls made by automation, custom CloudWatch metrics for success/failure rates, and SNS notifications for significant events. This enables auditing and troubleshooting.",
                docLink: "https://docs.aws.amazon.com/lambda/latest/dg/monitoring-cloudwatchlogs.html"
            },
            {
                id: 19,
                question: "What is the purpose of 'input transformation' in EventBridge rules?",
                options: [
                    "To encrypt event data",
                    "To modify or extract specific parts of an event before passing to the target",
                    "To validate events",
                    "To store events in S3"
                ],
                correct: 1,
                explanation: "Input transformation allows you to modify or extract specific parts of an event before passing it to the target. You can use input path to select fields and input template to format the data for the target, making it easier for Lambda or other targets to process.",
                docLink: "https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-transform-target-input.html"
            },
            {
                id: 20,
                question: "What is the recommended approach for handling remediation failures?",
                options: [
                    "Ignore failures and continue",
                    "Implement retry logic, dead-letter queues, and alerting for failed remediations",
                    "Manually retry all failures",
                    "Disable automation if failures occur"
                ],
                correct: 1,
                explanation: "Handle failures with: exponential backoff retry logic in Step Functions, dead-letter queues (DLQ) for Lambda to capture failed events, CloudWatch alarms for failure rates, SNS notifications for failed critical remediations, and runbooks for manual intervention when automation fails.",
                docLink: "https://docs.aws.amazon.com/lambda/latest/dg/invocation-async.html#invocation-dlq"
            }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        function shuffleArray(array) { const a = [...array]; for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; } return a; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], c = document.getElementById('questionsContainer'), letters = ['A','B','C','D'], ua = userAnswers[currentQuestion]; let opts = q.options.map((o,i) => { let cls = 'option'; if (currentMode === 'learn' && ua !== null) { cls += ' disabled'; if (i === q.correct) cls += ' correct'; else if (i === ua) cls += ' incorrect'; } else if (ua === i) cls += ' selected'; return `<div class="${cls}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${ua !== null ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; c.innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Automation</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && ua === null ? '<button class="btn btn-primary" style="margin-top: 1rem; width: 100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && userAnswers[currentQuestion] !== null) return; userAnswers[currentQuestion] = i; if (currentMode === 'exam') renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] !== null && userAnswers[i] !== -1 && userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), passed = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); const se = document.getElementById('scorePercent'); se.textContent = pct + '%'; se.className = 'results-score ' + (passed ? 'pass' : 'fail'); const st = document.getElementById('resultStatus'); st.textContent = passed ? 'üéâ PASSED!' : 'üìö Keep Studying'; st.className = 'results-status ' + (passed ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
