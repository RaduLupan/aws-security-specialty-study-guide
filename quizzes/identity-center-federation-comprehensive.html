<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAM Identity Center & Federation Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #06b6d4; --accent-secondary: #22d3ee; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(6, 182, 212, 0.1); }
        .option.selected { border-color: var(--accent-primary); background: rgba(6, 182, 212, 0.15); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(6, 182, 212, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(6, 182, 212, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(6, 182, 212, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 4: Identity & Access Management (20%)</span>
            <h1>IAM Identity Center & Federation</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What was IAM Identity Center previously known as?", options: ["AWS IAM", "AWS SSO (Single Sign-On)", "AWS Directory Service", "AWS Cognito"], correct: 1, explanation: "IAM Identity Center was previously known as AWS Single Sign-On (AWS SSO). It was renamed in 2022 to better reflect its role as the central place to manage workforce identity and access to AWS accounts and applications.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html" },
            { id: 2, question: "What are the supported identity sources for IAM Identity Center?", options: ["Only AWS Directory Service", "Identity Center directory, Active Directory, and external SAML 2.0 IdP", "Only external OAuth providers", "Only on-premises LDAP servers"], correct: 1, explanation: "IAM Identity Center supports three identity sources: its built-in Identity Center directory, AWS Managed Microsoft AD or AD Connector (Active Directory), and external identity providers via SAML 2.0 (like Okta, Azure AD, Ping Identity).", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/manage-your-identity-source.html" },
            { id: 3, question: "What is a Permission Set in IAM Identity Center?", options: ["A group of IAM users", "A collection of IAM policies that define access for users to AWS accounts", "A set of MFA requirements", "A list of permitted IP addresses"], correct: 1, explanation: "A Permission Set is a template that defines what policies (managed or custom) will be applied when a user is assigned access to an AWS account. When assigned, Identity Center creates an IAM role in the target account with those policies.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/permissionsetsconcept.html" },
            { id: 4, question: "How does SAML 2.0 federation work with AWS?", options: ["Users authenticate with AWS first, then IdP validates", "IdP authenticates users, then provides SAML assertion to AWS STS for temporary credentials", "AWS creates permanent credentials for federated users", "SAML replaces IAM roles entirely"], correct: 1, explanation: "In SAML 2.0 federation, users authenticate with their corporate identity provider (IdP), which then sends a SAML assertion to AWS. AWS STS validates the assertion and returns temporary security credentials, allowing access to AWS resources.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html" },
            { id: 5, question: "What is the AWS access portal in IAM Identity Center?", options: ["The AWS Management Console", "A user-facing web portal where users can access their assigned AWS accounts and applications", "The IAM dashboard", "The CloudWatch console"], correct: 1, explanation: "The AWS access portal is a web-based portal where users can sign in once and see all their assigned AWS accounts and applications. From here, they can launch the console or get CLI credentials for any account they have access to.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/using-the-portal.html" },
            { id: 6, question: "What protocol does IAM Identity Center use for external identity provider integration?", options: ["OAuth 2.0 only", "SAML 2.0 and SCIM", "LDAP only", "Kerberos only"], correct: 1, explanation: "IAM Identity Center uses SAML 2.0 for authentication with external identity providers. It also supports SCIM (System for Cross-domain Identity Management) for automatic provisioning and deprovisioning of users and groups from your IdP.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/provision-automatically.html" },
            { id: 7, question: "Which STS API is used for SAML-based federation?", options: ["AssumeRole", "AssumeRoleWithSAML", "GetFederationToken", "GetSessionToken"], correct: 1, explanation: "AssumeRoleWithSAML is the STS API used for SAML 2.0 federation. It takes a SAML assertion from your IdP and returns temporary security credentials for the specified role. The role must have a trust policy that allows the SAML provider.", docLink: "https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html" },
            { id: 8, question: "What is the maximum session duration for IAM Identity Center sessions?", options: ["1 hour only", "Configurable up to 12 hours", "24 hours", "Unlimited"], correct: 1, explanation: "IAM Identity Center session duration is configurable from 1 to 12 hours per permission set. The default is 1 hour. Longer sessions reduce the need for users to re-authenticate but may increase security risk if credentials are compromised.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/howtosessionduration.html" },
            { id: 9, question: "What is 'attribute-based access control' (ABAC) in IAM Identity Center?", options: ["Access based on user attributes like department or cost center", "Access based on time of day", "Access based on geographic location only", "Access based on password strength"], correct: 0, explanation: "ABAC uses identity attributes (like department, job code, or cost center) passed from your IdP to make access control decisions. You can create permission sets that use these attributes in policy conditions, enabling dynamic, fine-grained access control.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/abac.html" },
            { id: 10, question: "What is Trusted Identity Propagation in IAM Identity Center?", options: ["Propagating IAM users across accounts", "Passing user identity context from one AWS service to another", "Copying permissions between accounts", "Syncing users from Active Directory"], correct: 1, explanation: "Trusted Identity Propagation allows user identity to be passed between AWS services without re-authentication. For example, a user authenticated in QuickSight can access data in S3 or Redshift with their identity preserved for audit and access control purposes.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/trustedidentitypropagation.html" },
            { id: 11, question: "What is required to use IAM Identity Center with AWS Organizations?", options: ["Only the management account can enable it", "Any member account can enable it", "AWS Enterprise Support is required", "All accounts must be in the same region"], correct: 0, explanation: "IAM Identity Center must be enabled in the AWS Organizations management account or a delegated administrator account. Once enabled, it can manage access to all accounts in the organization from a central location.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/getting-started.html" },
            { id: 12, question: "What is web identity federation in AWS?", options: ["Federation using web browsers only", "Allowing users to sign in using social IdPs like Google, Facebook, or Amazon", "Federation using HTTP APIs", "Web-based IAM management"], correct: 1, explanation: "Web identity federation allows users to authenticate using social identity providers (Google, Facebook, Amazon) or any OIDC-compatible IdP. It's commonly used in mobile and web applications to grant users access to AWS resources without creating IAM users.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_oidc.html" },
            { id: 13, question: "Which STS API is used for web identity federation?", options: ["AssumeRole", "AssumeRoleWithSAML", "AssumeRoleWithWebIdentity", "GetFederationToken"], correct: 2, explanation: "AssumeRoleWithWebIdentity is used for web identity federation. It takes an OIDC token from an identity provider (like Google or Facebook) and returns temporary AWS credentials. The role must trust the OIDC provider.", docLink: "https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" },
            { id: 14, question: "What is the difference between AssumeRole and GetSessionToken?", options: ["They are identical", "AssumeRole switches to another role; GetSessionToken gets MFA-protected credentials for current identity", "GetSessionToken is for cross-account access", "AssumeRole doesn't support MFA"], correct: 1, explanation: "AssumeRole returns credentials for a different role (same or different account). GetSessionToken returns temporary credentials for your current IAM user identity, commonly used for MFA-protected API access without switching roles.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html" },
            { id: 15, question: "What is SCIM used for in IAM Identity Center?", options: ["Security scanning", "Automatic user and group provisioning from external IdPs", "Certificate management", "Session management"], correct: 1, explanation: "SCIM (System for Cross-domain Identity Management) enables automatic provisioning of users and groups from your external identity provider to IAM Identity Center. When users are added or removed in your IdP, changes sync automatically.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/provision-automatically.html" },
            { id: 16, question: "How do you provide CLI access through IAM Identity Center?", options: ["Create long-term access keys", "Use the AWS CLI v2 SSO integration for temporary credentials", "Download permanent credentials from the portal", "Create IAM users in each account"], correct: 1, explanation: "AWS CLI v2 integrates with IAM Identity Center. Users can run 'aws configure sso' to set up profiles that authenticate through the access portal and automatically obtain temporary credentials without managing long-term access keys.", docLink: "https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html" },
            { id: 17, question: "What is the role of the IAM SAML provider resource?", options: ["It's an IAM user for SAML users", "It represents the external IdP and stores its metadata for trust establishment", "It's a type of IAM group", "It manages SAML certificates"], correct: 1, explanation: "An IAM SAML provider is a resource that describes an external IdP. It contains the IdP's SAML metadata (including its certificate). You reference this provider in role trust policies to enable SAML federation.", docLink: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_saml.html" },
            { id: 18, question: "What happens when a user's Identity Center session expires?", options: ["They are automatically logged out of all AWS consoles", "They must re-authenticate through the access portal to get new credentials", "Their access is permanently revoked", "Nothing - sessions never expire"], correct: 1, explanation: "When an Identity Center session expires, users must re-authenticate through the access portal to obtain new temporary credentials. Active console sessions may persist until their own expiration, but new sessions require re-authentication.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/howtosessionduration.html" },
            { id: 19, question: "Can you use IAM Identity Center with accounts outside your AWS Organization?", options: ["No, only organization accounts are supported", "Yes, by configuring them as custom SAML applications", "Only with AWS Enterprise Support", "Only in the same AWS Region"], correct: 1, explanation: "While Identity Center primarily manages access to organization accounts, you can configure external AWS accounts as custom SAML 2.0 applications. This allows Identity Center to provide SSO to accounts outside your organization.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/saml-custom-idp.html" },
            { id: 20, question: "What is the benefit of using IAM Identity Center over creating IAM users in each account?", options: ["IAM users are more secure", "Centralized management, SSO, no long-term credentials in accounts", "IAM Identity Center is free while IAM users cost money", "There is no benefit"], correct: 1, explanation: "IAM Identity Center provides centralized identity management, single sign-on across all accounts, automatic credential rotation, and eliminates the need for long-term credentials in each account. This improves security and simplifies administration.", docLink: "https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0;
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && ans !== null) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${ans !== null ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Identity Center & Federation</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && ans === null ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && userAnswers[currentQuestion] !== null) return; userAnswers[currentQuestion] = i; if (currentMode === 'exam') renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
