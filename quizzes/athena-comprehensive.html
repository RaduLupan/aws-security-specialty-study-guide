<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Athena Quiz | AWS Security Specialty (SCS-C03)</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #06b6d4; --accent-secondary: #22d3ee; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(6, 182, 212, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(6, 182, 212, 0.2); box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.25), inset 0 0 12px rgba(6, 182, 212, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(6, 182, 212, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(6, 182, 212, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(6, 182, 212, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(6, 182, 212, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(6, 182, 212, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(6, 182, 212, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "‚úì "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(6, 182, 212, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">Domain 1: Detection (16%)</span>
            <h1>Amazon Athena</h1>
            <p class="subtitle">Comprehensive Quiz for AWS Security Specialty (SCS-C03)</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">üìö Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">‚è±Ô∏è Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">üîÄ Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>‚Üê Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">‚Üê Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">üîÄ Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next ‚Üí</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">üìä Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">üí° Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">‚Üê Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What is the primary purpose of Amazon Athena?", options: ["A managed data warehouse for running complex analytics workloads with high concurrency", "An interactive query service that analyzes data directly in Amazon S3 using standard SQL without managing infrastructure", "A streaming analytics service for real-time log processing and alerting", "An ETL service for transforming and loading data from sources into a relational database"], correct: 1, explanation: "Amazon Athena is an interactive query service that makes it easy to analyze data directly in S3 using standard SQL. It is serverless‚Äîno infrastructure to set up or manage‚Äîand you pay only for the queries you run. You point Athena at your S3 data and run ad-hoc queries.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/what-is.html" },
            { id: 2, question: "A security team wants to analyze CloudTrail logs to identify API calls made from a specific IP address. Which approach would be most appropriate?", options: ["Use Amazon Redshift to load CloudTrail logs into a data warehouse and run complex joins", "Use Amazon Athena to query CloudTrail log files directly in S3 with SQL, isolating activity by source IP", "Use CloudWatch Logs Insights to search the logs in real-time", "Use Amazon OpenSearch Service to index and search the log files"], correct: 1, explanation: "Athena with CloudTrail logs is a powerful way to analyze AWS service activity. You create tables for CloudTrail log files (from the CloudTrail console or manually in Athena) and run SQL queries to identify trends and isolate activity by attributes such as source IP address or user.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/cloudtrail-logs.html" },
            { id: 3, question: "Which service does Athena integrate with to provide a persistent metadata store for tables and databases?", options: ["Amazon RDS for schema storage", "AWS Glue Data Catalog for metadata about S3 data", "DynamoDB for table definitions", "Amazon DocumentDB for document schemas"], correct: 1, explanation: "Athena integrates with the AWS Glue Data Catalog, which offers a persistent metadata store for your data in S3. This allows you to create tables and query data in Athena based on a central metadata store available throughout your AWS account, integrated with ETL and data discovery features.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/when-should-i-use-ate.html" },
            { id: 4, question: "A security analyst needs to run SQL queries on CloudTrail event information across multiple accounts, regions, and custom date ranges. What AWS alternative might be better than Athena?", options: ["Amazon Redshift with a custom ETL pipeline", "CloudTrail Lake, which stores events in a searchable data lake with built-in SQL queries", "Amazon EMR with Presto for federated queries", "AWS Glue for batch ETL jobs"], correct: 1, explanation: "CloudTrail Lake is an AWS alternative that aggregates information into a single, searchable event data store. It stores events in a data lake (not S3 bucket storage), allowing richer, faster queries. CloudTrail Lake queries run within the CloudTrail console and do not require Athena.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/cloudtrail-logs.html" },
            { id: 5, question: "Which IAM permissions are required to run Athena queries? (Select the most complete answer)", options: ["Only athena:StartQueryExecution and athena:GetQueryResults", "Athena API actions, S3 read access to the underlying data, and Glue Data Catalog access for metadata", "S3 and Glue permissions only; Athena API is public", "IAM Identity Center federation with no additional permissions"], correct: 1, explanation: "Permissions for Athena include: (1) S3 locations where the data is stored, (2) metadata and resources in the AWS Glue Data Catalog (databases, tables), and (3) Athena API actions. All three are required to run queries successfully.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/security-iam-athena.html" },
            { id: 6, question: "What is the purpose of Athena workgroups?", options: ["Workgroups are required to run any Athena query; without one, queries fail", "Workgroups separate workloads, control team access, enforce configuration, and track query metrics and costs", "Workgroups are only used for capacity reservations and do not affect access control", "Workgroups are deprecated in favor of IAM policies alone"], correct: 1, explanation: "Athena workgroups let you separate workloads, control team access, enforce configuration (e.g., query results location, encryption), and track query metrics and costs. They act as IAM resources, so you can use resource-level policies to control who can access a workgroup.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/workgroups-manage-queries-control-costs.html" },
            { id: 7, question: "Which data formats does Athena support for querying in S3?", options: ["Only CSV and JSON", "CSV, JSON, Apache Parquet, and Apache ORC", "Only Parquet and ORC for optimal performance", "Any format; Athena automatically detects and converts"], correct: 1, explanation: "Athena helps analyze unstructured, semi-structured, and structured data in S3. Examples include CSV, JSON, or columnar formats such as Apache Parquet and Apache ORC. You run ad-hoc queries using ANSI SQL without aggregating or loading data into Athena.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/when-should-i-use-ate.html" },
            { id: 8, question: "When should you choose Amazon Athena over Amazon Redshift for analytics?", options: ["When you need to run complex joins across many large tables with high concurrency", "When you want to run interactive ad-hoc SQL queries on S3 data without managing infrastructure or loading data", "When you need real-time streaming analytics with sub-second latency", "When you require ACID transactions and referential integrity"], correct: 1, explanation: "Use Athena when you want interactive ad-hoc SQL queries against data on S3, without managing infrastructure. Athena provides the easiest way to run ad-hoc queries for S3 data without setting up or managing servers. Redshift is better for complex joins across large tables and sophisticated reporting.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/when-should-i-use-ate.html" },
            { id: 9, question: "A security team wants to control costs and receive alerts when a workgroup exceeds a data-scanning threshold. What Athena feature supports this?", options: ["CloudWatch Logs integration for query logging", "Per-query and per-workgroup data usage controls that can cancel queries or trigger SNS alarms", "Cost allocation tags only; no threshold-based alerts", "Reserved capacity pricing for predictable costs"], correct: 1, explanation: "Athena supports per-query and per-workgroup data usage controls. Athena can cancel queries when they exceed a specified threshold, or activate an Amazon SNS alarm when a workgroup threshold is breached.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/workgroups-manage-queries-control-costs.html" },
            { id: 10, question: "Which AWS services can you query using Athena for security and compliance analysis?", options: ["Only CloudTrail and VPC Flow Logs", "CloudTrail, CloudFront, Elastic Load Balancing, VPC, S3 Inventory, and Systems Manager Inventory", "Only services that export to S3 in Parquet format", "Only AWS Glue-integrated data sources"], correct: 1, explanation: "Athena integrates with many AWS services for querying logs: CloudTrail, CloudFront, Application Load Balancer, Classic Load Balancer, VPC, S3 Inventory, Systems Manager Inventory, and others. Each has documentation for creating tables and querying.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/athena-aws-service-integrations.html" },
            { id: 11, question: "What is the default workgroup in Athena, and how does it handle access?", options: ["There is no default; users must create a workgroup before running queries", "Each account has a primary workgroup; default permissions allow all authenticated users access", "The primary workgroup requires explicit IAM policies for each user", "The default workgroup is read-only and cannot be modified"], correct: 1, explanation: "Each account has a primary workgroup. By default, if you have not created any workgroups, all queries run in the primary workgroup. The primary workgroup cannot be deleted. Default permissions allow all authenticated users access to this workgroup.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/workgroups-manage-queries-control-costs.html" },
            { id: 12, question: "How can you monitor Athena query performance and set alarms?", options: ["Athena does not support monitoring; use CloudTrail for audit logs only", "Publish query metrics to CloudWatch, create dashboards, and set thresholds and alarms", "Use AWS X-Ray for distributed tracing of Athena queries", "Athena sends metrics only to Security Hub"], correct: 1, explanation: "You can publish query metrics for your workgroup to CloudWatch. In the Athena console you view query metrics per workgroup. In CloudWatch you create custom dashboards and set thresholds and alarms on these metrics.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/workgroups-manage-queries-control-costs.html" },
            { id: 13, question: "Athena integrates with Amazon QuickSight for what purpose?", options: ["To run Spark workloads for machine learning", "Easy data visualization‚Äîgenerate reports or explore data with BI tools", "To schedule and orchestrate ETL jobs", "To provide a managed Hive metastore"], correct: 1, explanation: "Athena integrates with Amazon QuickSight for easy data visualization. You can use Athena to generate reports or explore data with business intelligence tools or SQL clients connected via JDBC or ODBC drivers.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/when-should-i-use-ate.html" },
            { id: 14, question: "Is Amazon Athena serverless?", options: ["No; you must provision and manage EC2 clusters or Lambda functions", "Yes; Athena SQL and Apache Spark are serverless‚Äîno infrastructure to set up, pay only for queries run", "Partially; only the query engine is serverless, S3 storage is separate", "Only when using the primary workgroup"], correct: 1, explanation: "Athena SQL and Apache Spark on Athena are serverless. There is no infrastructure to set up or manage, and you pay only for the queries you run. Athena scales automatically‚Äîrunning queries in parallel‚Äîso results are fast even with large datasets.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/what-is.html" },
            { id: 15, question: "A common security use case for Athena with CloudTrail is described in AWS documentation. What is it?", options: ["Real-time blocking of malicious API calls", "Analyzing security, compliance, and operational activity using CloudTrail and Athena", "Replacing GuardDuty for threat detection", "Automatically remediating non-compliant resources"], correct: 1, explanation: "A common application is to use CloudTrail logs to analyze operational activity for security and compliance. AWS documentation references a Big Data Blog post: 'Analyze security, compliance, and operational activity using AWS CloudTrail and Amazon Athena'.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/cloudtrail-logs.html" },
            { id: 16, question: "What is the maximum number of workgroups you can create per AWS Region?", options: ["10 workgroups per region", "100 workgroups per region", "1000 workgroups per region", "No limit; workgroups scale automatically"], correct: 2, explanation: "You can create up to 1000 workgroups per AWS Region in your account. When you have access to a workgroup, you can view its settings, metrics, and data usage control limits.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/workgroups-manage-queries-control-costs.html" },
            { id: 17, question: "Which statement about Athena and Amazon EMR is correct?", options: ["Athena and EMR are mutually exclusive; you must choose one for analytics", "You can use Athena to query data processed by EMR; Athena's catalog is Hive metastore compatible", "EMR replaces Athena for all S3-based SQL workloads", "Athena runs on top of EMR clusters"], correct: 1, explanation: "You can use Athena to query data processed by EMR. Athena supports many of the same data formats as EMR. Athena's data catalog is Hive metastore compatible. If you use EMR with a Hive metastore, you can run DDL on Athena and query immediately without affecting EMR jobs.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/when-should-i-use-ate.html" },
            { id: 18, question: "How can workgroups enforce configuration for queries?", options: ["Workgroups cannot enforce configuration; only IAM policies control behavior", "By optionally enforcing workgroup-wide settings: query results location in S3, encryption, and control of objects written to the results bucket", "Only by disabling the workgroup to block all queries", "By requiring approval from an administrator before each query runs"], correct: 1, explanation: "You can optionally enforce the same workgroup-wide settings for all queries in the workgroup. These include query results location in S3, expected bucket owner, encryption, and control of objects written to the query results bucket.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/workgroups-manage-queries-control-costs.html" },
            { id: 19, question: "What happens when you disable an Athena workgroup?", options: ["All saved queries are permanently deleted", "Queries fail with an error until you re-enable the workgroup", "The workgroup is deleted after 30 days", "Only new users are blocked; existing sessions continue"], correct: 1, explanation: "Workgroups can be disabled. Disabling a workgroup prevents queries from running in that workgroup until you re-enable it. Athena warns you if you attempt to delete a workgroup that contains saved queries.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/workgroups-manage-queries-control-costs.html" },
            { id: 20, question: "Besides SQL, what other analytics capability does Athena offer?", options: ["Only SQL; no other query languages", "Apache Spark‚Äîrun interactive data analytics using Spark without managing resources", "Python and R notebooks via SageMaker integration", "GraphQL for schema-based queries"], correct: 1, explanation: "Amazon Athena also supports running data analytics using Apache Spark. When you run Spark applications on Athena, you submit Spark code for processing and receive results directly. Use the simplified notebook experience in the Athena console or Athena Spark APIs.", docLink: "https://docs.aws.amazon.com/athena/latest/ug/what-is.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">üìñ Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">üìÑ View AWS Documentation ‚Üí</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">Athena</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next ‚Üí'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? 'üéâ PASSED!' : 'üìö Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '‚úì' : '‚úó'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
